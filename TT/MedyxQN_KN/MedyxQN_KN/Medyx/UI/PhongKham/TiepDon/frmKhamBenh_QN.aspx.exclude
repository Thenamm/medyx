<%@ page title="" language="C#" masterpagefile="~/AdminCode1.master" autoeventwireup="true" inherits="UI_PhongKham_KhamBenh_frmKhamBenh_QN"  CodeFile="frmKhamBenh_QN.aspx.cs" enableeventvalidation="false" %>

<%-- <%@ Register Src="~/UserControls/HTCReportViewer.ascx" TagName="HTCReportViewer" TagPrefix="uc1" %> --%>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <%if (txtindextab.Value == "0") %>
    <% { %>
    <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">

        <script type="text/javascript">
            $(function () {
                $("#<%= dtNgayHen.ClientID %>").datepicker({
                    dateFormat: 'dd/mm/yy',
                    altFormat: "dd/mm/yy",
                    minDate: '01/01/1900',
                    maxDate: '31/12/2100'
                }).keyup(function (e) {
                    if (e.keyCode == 8 || e.keyCode == 46) {
                        $(this).mask('');
                        $(this).val('');

                    }
                });
            });
            $(document).ready(function () {
                $("#<%= dtNgayHen.ClientID %>").mask("99/99/9999");
                $("#<%= dtNgaySinh.ClientID %>").mask("99/99/9999");
                $("#<%= dtBHYTDN.ClientID %>").mask("99/99/9999");

            });
            function subtinhtuoi(sender, eventArgs) {
                var dtns = document.getElementById("<%= dtNgaySinh.ClientID %>");
                var txttuoi = document.getElementById("<%= txtTuoi.ClientID %>");

                var d = new Date();
                if ((dtns.value) != "")
                    txttuoi.value = d.getFullYear() - parseInt(dtns.value.substr(dtns.value.length - 4), 10);
                else if (txttuoi.value != "")
                    dtns.value = "01/01/" + (d.getFullYear() - txttuoi.value).toString();


            }
            function comboSelectedIndexChangedCD(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");
                var obbenh = document.getElementById("<%= txtChanDoan.ClientID %>");


                obbenh.value = tenbenh; sender.set_select = 0; var input = combo.get_inputDomElement();


            }
            function comboSelectedIndexChangedCDKem(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");

                var obbenh = document.getElementById("<%= txtChanDoanKem.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                obbenh.value = tenbenh; var input = combo.get_inputDomElement();
            }
            function comboSelectedIndexChangedCDKem2(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");

                var obbenh = document.getElementById("<%= txtChanDoanKem2.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                obbenh.value = tenbenh; var input = combo.get_inputDomElement();
            }
            function comboSelectedIndexChangedCDKem3(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");
                var maicd = item.get_attributes().getAttribute("MaICD");

                var obbenh = document.getElementById("<%= txtChanDoanKem3.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                if (obbenh.value == "")
                    obbenh.value = maicd + "-" + tenbenh;
                else
                    obbenh.value = obbenh.value + ";   " + maicd + "-" + tenbenh; var input = combo.get_inputDomElement();
            }
            function comboSelectedIndexChangedCDKem3(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");

                var obbenh = document.getElementById("<%= txtChanDoanKem3.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                obbenh.value = tenbenh; var input = combo.get_inputDomElement();
            }
            function comboSelectedIndexChangedKBD(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh vien
                var tenbv = item.get_attributes().getAttribute("TenBV");
                var obbenhvien = document.getElementById("<%= txtTenBVBD.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));

                obbenhvien.value = tenbv; var input = combo.get_inputDomElement();
            }
            function comboSelectedIndexChangedBS(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var txtmanv = document.getElementById("<%= txtMaNV .ClientID %>"); //item.set_text(item.get_text().substr(0, 7));

                txtmanv.value = val; //obbenh.focus();// sender.set_select = 0; var input = combo.get_inputDomElement();

            }
        </script>
    </telerik:RadCodeBlock>
    <% } %>
    <%if (txtindextab.Value == "1" || txtindextab.Value == "2" || txtindextab.Value == "3" || txtindextab.Value == "6") %>
    <% { %>
    <telerik:RadCodeBlock ID="RadCodeBlock2" runat="server">
        <script type="text/javascript">
            function GridCreated(sender, args) {
                var scrollArea = sender.GridDataDiv;
                var parent = $get("gridContainer");
                var gridHeader = sender.GridHeaderDiv;
                scrollArea.style.height = parent.clientHeight - gridHeader.clientHeight + "px";
            }

            function RowDblClickForGrdDichVu(sender, eventArgs) {
                var selecteditem = $find("<%= grdDanhSachDY.MasterTableView.ClientID %>").get_selectedItems();
                editedRowDS = eventArgs.get_itemIndexHierarchical();
                var grid = $find("<%= grdDanhSachDY.ClientID %>");
                grid.get_masterTableView().fireCommand("Edit", editedRowDS); //add master editing activities in the grid}
            }

            function FireInsertCommand(grid, eventArgs) {
                editedRow = eventArgs.get_itemIndexHierarchical();
                grid.get_masterTableView().get_dataItems()[editedRow].set_selected(true);
                grid.get_masterTableView().fireCommand("Edit", editedRow);
            }
            function subtiendon(sender, eventArgs) {
                var tt = document.getElementById("<%= txtTT.ClientID %>");
                var txttong = document.getElementById("<%= txtTongDon.ClientID %>");
                var txtsl = document.getElementById("<%= txtSLThang.ClientID %>");
                txttong.value = parseInt(tt.value) * parseInt(txtsl.value);

            }


            <% if (txtindextab.Value=="1")   %>
           <%  { %>
            var ComboText = '';
            var ComboInput;
            function OnClientItemsRequesting(sender, eventArgs) {
                var combo = sender;
                ComboText = combo.get_text();
                ComboInput = combo.get_element().getElementsByTagName('input')[0];
                ComboInput.focus = function () { this.value = ComboText };

                if (ComboText != '') {
                    window.setTimeout(TrapBlankCombo, 30);
                };
            }

            function TrapBlankCombo() {
                if (ComboInput) {
                    if (ComboInput.value == '') {
                        ComboInput.value = ComboText;
                    }
                    else {
                        window.setTimeout(TrapBlankCombo, 30);
                    };
                };
            }
            function CheckAllEmp(sender) {
                var checked = sender.checked;
                var masterTable = $find("<%= grdXNTT.ClientID %>").get_masterTableView();
                var row = masterTable.get_dataItems();

                for (var i = 0; i < row.length; i++) {
                    masterTable.get_dataItems()[i].findElement("chkSelect").checked = checked; // for checking the checkboxes
                }
            }

            function OnClientFocus(sender, args) {
                //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                if (!sender.get_dropDownVisible())
                    sender.showDropDown();//show dropdown after entering some characters
            }
            function OnClientDropDownClosing(sender, eventArgs) {
                var grid = (sender.get_parent().get_parent());

                var indextab;// = tab.get_selectedIndex();
                var name = grid.get_id();
                //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                //txthidedv.value = "";
                if (name.substr(name.length - 7) == "grdXNTT")
                    indextab = 1;
                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");

                if (indextab == 1 && ((sender.get_id()).substr((sender.get_id()).length - 9) == "cboDichVu" || (sender.get_id()).substr((sender.get_id()).length - 11) == "cboMaDichVu")) {
                    if (txtmadv.value != "")
                        grid.get_masterTableView().fireCommand("PerformInsert", ""); //"AddXN"Cancel any editing activities in the grid

                }

            }

            function OnClientDropDownOpening(sender, eventArgs) {
                values = "";
                //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                //txthidedv.value = "1";
            }
            var values;

            function clicked_chkBox(value) {
                // var MasterTable = grid.get_masterTableView();
                // var row = MasterTable.get_dataItems()[index];
                // var item = sender.getItem(index);


                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");
                values += value + ",";
                txtmadv.value = values;



                // var label_text = row.findElement("Label1").innerHTML;//getting label value
                // row._element.style.backgroundColor = "red";
                // row._element.style.backgroundImage = "none";
            }

            function OnClientItemChecked(sender, eventArgs) {
                var item = eventArgs.get_item();
                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");

                if (item.get_checked() == true) {
                    if (item.get_attributes().getAttribute("NhapSL") == "True" && (item.get_attributes().getAttribute("DonGiaTT") != "" && item.get_attributes().getAttribute("DonGiaTT") != "0")) {
                        var grid = (sender.get_parent().get_parent());
                        //txtmadv.value = "";

                        //values = "";
                        values += item.get_value() + ",";
                        txtmadv.value = values;
                        grid.get_masterTableView().fireCommand("PerformInsert", ""); //"AddXN"Cancel any editing activities in the grid
                    }
                    else {
                        values += item.get_value() + ",";
                    }
                }
                else
                    values = values.replace(item.get_value() + ",", "");
                txtmadv.value = values;

            }
           <%} %>
                    function OnClientSelectedIndexChanged(sender, eventArgs) {


                        // get the text and value elements
                        //  var text = item.get_text();
                        //  var val = item.get_value();
                        var grid = (sender.get_parent().get_parent());
                        var indextab;// = tab.get_selectedIndex();
                        var name = grid.get_id();
                        var item = eventArgs.get_item();

                        if (name.substr(name.length - 12) == "grdKeTTNgoai")
                            indextab = 5;
                        else if (name.substr(name.length - 8) == "grdThuoc")
                            indextab = 1;
                        else if (name.substr(name.length - 10) == "grdThuocDY")
                            indextab = 2;
                        else if (name.substr(name.length - 7) == "grdXNTT")
                            indextab = 1;


                        if (indextab == 1 || indextab == 2 || indextab == 3) {

                            var tbTENDVT = $telerik.findElement(grid.get_element(), "tbTENDVT");

                            if (tbTENDVT != null) {
                                // dvt
                                var TENDVT = item.get_attributes().getAttribute("tendvt");

                                tbTENDVT.value = TENDVT;
                            }
                        }


                        // dongia
                        var UnitPrice = item.get_attributes().getAttribute("DongiaTT");
                        if (UnitPrice != "") {

                            var tbUnitPrice = $telerik.findElement(grid.get_element(), "tbUnitPriceTT"); //$telerik.findControl(grid.get_element(), "tbUnitPriceTT");
                            tbUnitPrice.value =UnitPrice;
                        }
                        if (name.substr(name.length - 12) != "grdKeTTNgoai") {

                            var UnitPriceBH = item.get_attributes().getAttribute("DongiaBH");
                            if (UnitPriceBH != "") {

                               var tbUnitPriceBH = $telerik.findElement(grid.get_element(), "tbUnitPriceBH"); //$telerik.findControl(grid.get_element(), "tbUnitPriceBH");
                                tbUnitPriceBH.value =UnitPriceBH;
                            }
                            var BHTinhTien = item.get_attributes().getAttribute("BHTinhTien");

                            var ckBH = $telerik.findElement(grid.get_element(), "chkBH");
                            if (BHTinhTien == "True")
                                ckBH.Checked = true;
                            else
                                ckBH.Checked = false;
                        }
                        if (name.substr(name.length - 12) == "grdKeTTNgoai") {
                            var NhapSL = item.get_attributes().getAttribute("NhapSL");

                            if (UnitPrice != "" && NhapSL == "False") {
                                var node = Telerik.Web.UI.Grid.GetFirstParentByTagName(sender.get_element(), "tr");
                                var editedRowDS = node.Index;
                                grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid
                            }
                        }
                        else if (name.substr(name.length - 7) == "grdXNTT") {

                            var NhapSL = item.get_attributes().getAttribute("NhapSL");


                            if (UnitPrice != "" && NhapSL == "True") {

                                var node = Telerik.Web.UI.Grid.GetFirstParentByTagName(sender.get_element(), "tr");
                                var editedRowDS = node.Index;
                                grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid

                            }
                            else if (UnitPrice == "") {


                                var node = Telerik.Web.UI.Grid.GetFirstParentByTagName(sender.get_element(), "tr");
                                var editedRowDS = node.Index;

                                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");
                                txtmadv.value = item.get_value() + ",";
                                grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid
                            }
                            else if (NhapSL == "False") {
                                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");

                            txtmadv.value = item.get_value() + ",";

                            grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid

                        }
            }
            else {
                var tbSoLuong = $telerik.findControl(grid.get_element(), "tbSoLuong");

                tbSoLuong.set_selected;

            }

    }
        </script>
    </telerik:RadCodeBlock>
    <% } %>
    <%if (txtindextab.Value == "4") %>
    <% { %>
    <telerik:RadCodeBlock ID="RadCodeBlock3" runat="server">
        <script type="text/javascript">
            function RowSelectedDT(sender, eventArgs) {
                var selecteditem = $find("<%= grdDSDieuTri.MasterTableView.ClientID %>").get_selectedItems();
                editedRowDS = eventArgs.get_itemIndexHierarchical();
                var grid = $find("<%= grdDSDieuTri.ClientID %>");
                grid.get_masterTableView().fireCommand("Edit", editedRowDS); //add master editing activities in the grid}
            }

        </script>
    </telerik:RadCodeBlock>
    <% } %>
   <%if (txtindextab.Value == "5") %>
    <% { %>
    <telerik:RadCodeBlock ID="RadCodeBlock4" runat="server">
        <script type="text/javascript">
            function RowDblClickForGrdKetQua(sender, eventArgs) {
                var selecteditem = $find("<%= grdKQXN.MasterTableView.ClientID %>").get_selectedItems();
                editedRowDS = eventArgs.get_itemIndexHierarchical();
                var grid = $find("<%= grdKQXN.ClientID %>");
                 grid.get_masterTableView().fireCommand("Edit", editedRowDS); //add master editing activities in the grid}
             }

        </script>
    </telerik:RadCodeBlock>
    <% } %>
      <%  if (txtindextab .Value =="6") %>
    <%{ %>
     <telerik:RadCodeBlock ID="RadCodeBlock5" runat="server">

        <script type="text/javascript">
            function OnClientSelectedIndexChangedKeNgoai(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var text = item.get_text();
                var val = item.get_value();
                var grid = $find("<%= grdKeNgoai.ClientID %>");


                var tbTENDVT = $telerik.findElement(grid.get_element(), "tbTENDVT");
                tbTENDVT.value = item.get_attributes().getAttribute("TenDVT");

                var tbSoLuong = $telerik.findElement(grid.get_element(), "tbSoLuong");
                tbSoLuong.focus();

            }
                </script>
    </telerik:RadCodeBlock>
    <%} %>
    <telerik:RadCodeBlock ID="RadCodeBlock6" runat="server">
        <script type="text/javascript">
            document.onkeydown = keyHandler;
            function keyHandler(e) {
                var pressedKey;
                if (document.all) {
                    e = window.event;
                    pressedKey = e.keyCode;
                }

                if (e.which) {
                    pressedKey = e.which;
                }

                if (pressedKey == 113) { //f2 - GHI
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdSave");
                    templateButton.click();
                }
                else if (pressedKey == 123) { //f12 - thêm thuôc
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddThuoc");
                    templateButton.click();
                }
                else if (pressedKey == 115) { //f12 - thêm thuôc dy
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddThuocDY");
                    templateButton.click();
                }
                else if (pressedKey == 119) { //f8 - thêm xn
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddXN");
                    templateButton.click();
                }
                else if (pressedKey == 114) { //f3 - thêm dv
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddDV");
                    templateButton.click();
                }
                else if (pressedKey == 115) { //f4 - thêm tt
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddTT");
                    templateButton.click();
                }
                else if (pressedKey == 112) { //f5 - thêm cd
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                      var templateButton = toolbar1.findItemByValue("cmdAddCD");
                      templateButton.click();
                  }
                  else if (pressedKey == 112) { //f5 - thêm cd
                      var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddCD");
                    templateButton.click();
                }
                else if (pressedKey == 121) { //f10-thoat
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdExit");
                    templateButton.click();
                }
                else if (pressedKey == 120) { //f9-In
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdPrintThuoc");
                    templateButton.click();
                }
                else if (pressedKey == 117) { //f6 - in cd
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdPrintCD");
                    templateButton.click();
                }


                else if (pressedKey == 123) { //f12-Thêm       
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                         var templateButton = toolbar1.findItemByValue("cmdAdd");
                         templateButton.click();
                     }
}
function processClick(sender, args) {
    var commandName = args.get_item().get_commandName();

    if (commandName == 'cmdExit') {
        var up = document.getElementById("<%= txtupdate.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                    if (up == "") {
                        var ok = confirm("Thực sự muốn thoát khỏi chức năng này?");
                        if (ok) {
                            window.opener = null;
                            window.close();
                        }
                        else
                            return args.set_cancel(true);
                    }
                    else {
                        window.opener = null;
                        window.close();
                    }
                    return false;
                }
            }
            function showbmi(sender, eventArgs) {
                var txtcannang = document.getElementById("<%= txtCanNang.ClientID %>");
                var txtchieucao = document.getElementById("<%= txtChieuCao.ClientID %>");
                var cannang = txtcannang.value;
                var chieucao = txtchieucao.value;
                var bmi = document.getElementById("<%= txtBMI.ClientID %>");
                if (chieucao != "") {
                    if (parseFloat(chieucao) > 0) {
                        bmi.value = (parseFloat(cannang) * 10000 / (parseFloat(chieucao) * parseFloat(chieucao))).toFixed(2);
                    }
                }
            }
        </script>

        <style type="text/css">
        
            
             ul.rcbList li
            {
	            width: 100% !important;
            }

           
            ul.rcbList li label
            {
	            width:30px!important;float:left;
            }
            .rtsLI
            {
                width: 120px !important;
            }

            .RadForm.rfdTextbox input.rfdDecorated[type="text"], .RadForm.rfdTextbox input.rfdDecorated[type="password"], .RadForm.rfdTextbox input.rfdDecorated[type="search"], .RadForm.rfdTextbox input.rfdDecorated[type="url"], .RadForm.rfdTextbox input.rfdDecorated[type="tel"], .RadForm.rfdTextbox input.rfdDecorated[type="email"]
            {
                width: 100% !important;
            }

            /*
                table, td, th
                {
                    border:1px solid black;
                }*/

            /*
                div.RadGrid_Default .RadForm.rfdTextbox
                {
                    width:100% !important;
                }
                   */
              .ButtonCSS
            {
                margin-left: 200px;
            }

        </style>

    </telerik:RadCodeBlock>

    <telerik:RadToolBar ID="baraction" runat="server" OnClientButtonClicked="processClick" 
        EnableRoundedCorners="true"
        EnableShadows="true" OnButtonClick="baraction_ButtonClick" Width="100%" >
        <Items>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F8-XN" Group="Align" CheckOnClick="false" Value="cmdAddXN" CommandName="cmdAddXN">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F3-D.Vụ" Group="Align" CheckOnClick="false" Value="cmdAddDV" CommandName="cmdAddDV">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F4-TT" Group="Align" CheckOnClick="false" Value="cmdAddTT" CommandName="cmdAddTT">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F1-CĐHA" Group="Align" CheckOnClick="false" Value="cmdAddCD" CommandName="cmdAddCD">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F12-Thuốc" Group="Align" CheckOnClick="false" Value="cmdAddThuoc" CommandName="cmdAddThuoc">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F7-Đơn ĐY" Group="Align" CheckOnClick="false" Value="cmdAddThuocDY" CommandName="cmdAddThuocDY">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="Kê ngoài" Group="Align" CheckOnClick="false" Value="cmdAddKe" CommandName="cmdAddKe">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/edit.png"
                Text="Ghi" CheckOnClick="false" Value="cmdSave" CommandName="cmdSave">
            </telerik:RadToolBarButton>
             <telerik:RadToolBarButton ImageUrl="~/img/icon/print.gif"
                Text="F6-In CĐ" CheckOnClick="false" Value="cmdPrintCD" CommandName="cmdPrintCD">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/print.gif"
                Text="F9-In đơn" CheckOnClick="false" Value="cmdPrintThuoc" CommandName="cmdPrintThuoc">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/exitprint.png" Visible="false"
                Text="Đóng báo cáo" Value="exitcmdPrint">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/cancel.jpg"
                Text="F10-Thoát" Group="Align" CheckOnClick="false" Value="cmdExit" CommandName="cmdExit">
            </telerik:RadToolBarButton>
             <telerik:RadToolBarButton  Visible="false"
                Text="Tương tác thuốc" CheckOnClick="false" Value="cmdTuongTac" CommandName="cmdTuongTac">
            </telerik:RadToolBarButton>
             <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif" 
                Text="Up load" CheckOnClick="false" Value="cmdUpLoad" CommandName="cmdUpLoad">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/View.png"
                Text="Xem file" CheckOnClick="false" Value="cmdXemFile" CommandName="cmdXemFile">
            </telerik:RadToolBarButton>
        </Items>

    </telerik:RadToolBar>

  

    <div style="clear: both">
        &nbsp;
    </div>
      <asp:HiddenField ID="txtupdate" runat ="server" />
       <asp:HiddenField ID ="txtindextab" runat ="server" value ="0"/>
     <asp:HiddenField id="txthidedv" runat ="server" Value="" />
    <div>
        <asp:FileUpload ID="fuFileUploader" runat="server" text="Upfile" Visible ="false" />
      </div>
   
    <div id="gridContainer">

        <telerik:RadTabStrip runat="server"
            ID="RadTabStrip1"
            Align="Justify"
            AutoPostBack="True"
            MultiPageID="RadMultiPage1"
            SelectedIndex="1"
            Width="100%"
            ClickSelectedTab="True"
            OnTabClick="RadTabStrip1_TabClick">
            <Tabs>
                <telerik:RadTab Text="Hỏi bệnh-khám bệnh" Value="0"></telerik:RadTab>
                <telerik:RadTab Text="XN.TT.XQ.TDCN" Value="1" Selected="True"></telerik:RadTab>
                <telerik:RadTab Text="Thuốc " Value="2"></telerik:RadTab>
                <telerik:RadTab Text="Thuốc thang" Value="3"></telerik:RadTab>

                 <telerik:RadTab Text="Quá trình điều trị" Value="4"></telerik:RadTab>
                  <telerik:RadTab Text="Kết quả xét nghiệm" Value="5"></telerik:RadTab>
                 <telerik:RadTab Text="Kê ngoài " Value="6"></telerik:RadTab>
            </Tabs>
        </telerik:RadTabStrip>
        <telerik:RadMultiPage runat="server" ID="RadMultiPage1" SelectedIndex="1">
            <telerik:RadPageView runat="server" ID="RadPageView1" SelectedIndex="0">
                 <%if (txtindextab.Value =="0") %>
             <% { %>
                <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                Thông tin bệnh án
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label7" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTen" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label8" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="lblGioitinh" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" Selected ="True">Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label9" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinh" Enabled="false" onchange="subtinhtuoi(this)"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label10" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoi" Width="50px" Enabled="false" onchange="subtinhtuoi(this)"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label41" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="80px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaQL" Width="80px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="Label11" runat="server" Text="N.nghiệp"></asp:Label>
                                </td>

                                <td>
                                  
                                    <asp:TextBox ID ="txtNgheNghiep"  runat="server"  CssClass="span-all" Width="100%" Enabled ="false" ></asp:TextBox>
                                </td>
                                                            
                                <td >
                                    <asp:Label ID="Label12" runat="server" Text="Đ.chỉ"></asp:Label>
                                </td>
                                <td colspan="6">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtDiaChi" Enabled="false" style="width:100% !important"></asp:TextBox>
                                </td>
                                 <td >
                                    <asp:Label ID="Label64" runat="server" Text="Đ.thoại"></asp:Label>
                                </td>
                                <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtDienThoai" Enabled="false" style="width:100% !important"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="Label13" runat="server" Text="Số thẻ "></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtSoThe" MaxLength="16" Enabled="false" AutoPostBack="false" 
                                        ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label113" runat="server" Text="BHYT TN"></asp:Label>
                                </td>


                                <td>
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtBHYTDN" Enabled="false"></asp:TextBox>

                                </td>

                                <td>
                                    <asp:Label ID="Label114" runat="server" Text="Nơi ĐKBD"></asp:Label>
                                </td>
                               
                                <td colspan="6">

                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTenBVBD" Enabled="false"
                                        style="width:100% !important"></asp:TextBox>

                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="Label115" runat="server" Text="Đối tượng"></asp:Label>
                                </td>

                                <td>
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtDoiTuong" Width="100%" Enabled="false"></asp:TextBox>

                                </td>
                                <td>
                                    <asp:Label ID="Label116" runat="server" Text="CĐ NGT"></asp:Label>
                                </td>
                                <td colspan="5">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtBenhNGT" Enabled="false" style="width:100% !important"></asp:TextBox>

                                </td>
                                <td>Ngày ĐK</td>

                                 <td colspan ="2">
                                   <asp:TextBox ID="lblngaydk" runat="server" Enabled ="false"></asp:TextBox>
                                </td>
                            </tr>
                        </table>

                    </fieldset>
                </div>

                <%} %>
                      <div class="form-container">
                <fieldset align="center" style = "width:98%">
                    <table>
                        <tr>
                                <td>
                                <asp:Label ID="Label25" runat="server" Text="Tiền sử"></asp:Label>
                            </td>
                            <td width ="420px">
                                <asp:TextBox runat="server" TabIndex="1" ID="txtTiensubenh" Enabled="true" Width ="100%"></asp:TextBox>
                            </td>
                           
                          
                           <td>
                                <asp:Label ID="Label35" runat="server" Text="Dị ứng thuốc"></asp:Label>
                            </td>
                            <td colspan="5">
                                <asp:TextBox runat="server" TabIndex="1" ID="txtDiungthuoc" Enabled="true" Width ="100%"></asp:TextBox>
                            </td>
                        </tr>
                        <tr>
                            
                            
                            <td>
                                <asp:Label ID="Label61" runat="server" Text="Tiền sử GĐ"></asp:Label>
                            </td>
                            <td >
                                <asp:TextBox runat="server" TabIndex="1" ID="txtTiensugiadinh" Enabled="true"></asp:TextBox>
                            </td>
                           <td>
                                <asp:Label ID="Label65" runat="server" Text="Nhóm Máu"></asp:Label>
                            </td>
                             <td width ="50px">
                               <telerik:RadComboBox  IsCaseSensitive ="false"               
                                     ID="cboNhomMau" runat="server" Enabled="true" DataSourceID="odsDMNhomMau"
                                        DataValueField="Key" TabIndex="1"
                                        DataTextField="Value"
                                        Width="100%" >
                                    </telerik:RadComboBox>
                            </td>
                            <td >
                                <asp:Label ID="Label170" runat="server" Text="Đã tiêm chủng"></asp:Label>
                            </td>
                            <td  style="padding-left:20px">
                                <asp:CheckBox TabIndex="1"  ID="chkRubella" runat="server" Text="Rubella" />
                                </td>
                            <td >
                                <asp:CheckBox TabIndex="1"  ID="chkUonVan" runat="server" Text="Uốn ván" />
                                </td>
                            <td  width ="70px">
                                <asp:CheckBox TabIndex="1"  ID="chkTiemChungKhac" runat="server" Text="Khác" width ="70px" />
                              
                            </td>
                        
                        </tr>
                    </table>
                </fieldset>
            </div>
                <div class="form-container">
                    <fieldset align="center">
                        <legend></legend>

                        <table width ="100%">
                            <tr>
                                <td width="55px">
                                    <asp:Label ID="Label43" runat="server" Text="Mạch"></asp:Label>
                                </td>
                                <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMach" ></asp:TextBox>
                                </td>
                                <td width="75px">
                                    <asp:Label ID="Label42" runat="server" Text="I/p &nbsp;&nbsp; Nhiệt độ"></asp:Label>
                                </td>
                                <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtNhietdo" ></asp:TextBox>
                                </td>
                                <td width="75px">                                    
                                    <asp:Label ID="Label45" runat="server" Text="*C&nbsp;&nbsp;&nbsp;Huyết áp"></asp:Label>                                    
                                </td>
                                <td >
                                     <asp:TextBox runat="server" TabIndex="1" ID="txtHuyetap"  Visible="false" ></asp:TextBox>
                             
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHuyetapmin"  style="text-align:left; width:35px !important"></asp:TextBox>
                                </td>
                                 <td width="15px">/</td>
                                 <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHuyetapmax"  style="text-align:left; width:35px !important" ></asp:TextBox>
                                </td>
                                <td style="text-align:left; width:85px !important">
                                    <asp:Label ID="Label47" runat="server" Text="mmHg&nbsp;&nbsp; Nhịp thở" ></asp:Label>
                                </td>
                                <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtNhiptho" ></asp:TextBox>
                                </td>
                                <td width="75px">
                                    <asp:Label ID="Label56" runat="server" Text="I/p&nbsp;&nbsp; Cân nặng"></asp:Label>
                                </td>
                                <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtCanNang" onkeypress=" return onlyFaxs(event)" onchange ="showbmi(this)"></asp:TextBox>
                                </td>
                                <td  width="75px">
                                    <asp:Label ID="Label51" runat="server" Text="Kg&nbsp;&nbsp;Chiều cao"></asp:Label>
                                </td>
                                <td style="">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChieuCao"  onkeypress=" return onlyFaxs(event)" onchange ="showbmi(this)"></asp:TextBox>
                                </td>
                                
                                <td width="70px">
                                    <asp:Label ID="Label36" runat="server" Text="Cm&nbsp;&nbsp;BMI"></asp:Label>
                                </td>
                                 <td >
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtBMI" ></asp:TextBox>
                                </td>
                            </tr>


                        </table>
                    </fieldset>
                </div>
              
                   <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                Thông tin khám
                            </label>
                        </legend>

                        <table>
                            <tr>
                                

                                <td>
                                    <asp:Label ID="Label20" runat="server" Text="Lý do ĐT"></asp:Label>
                                </td>
                                <td colspan="7">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtlydo" Width="100%"></asp:TextBox>
                                </td>
                                </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="Label22" runat="server" Text="QT bệnh lý"></asp:Label>
                                </td>
                                <td colspan="7">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtbenhly" Width="100%"></asp:TextBox>
                                </td>
                            </tr>

                            <tr>
                                <td width="70px">
                                    <asp:Label ID="Label23" runat="server" Text="Toàn thân"></asp:Label>
                                </td>
                                <td colspan="7">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtToanthan" style="width:99% !important"></asp:TextBox>
                                </td>
                                </tr>
                            <tr>
                                <td width="70px">
                                    <asp:Label ID="Label24" runat="server" Text="Hô hấp"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHohap" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label26" runat="server" Text="Tiêu hóa"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTieuHoa" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label77" runat="server" Text="Cơ X.Khớp"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtCoxuongkhop" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label78" runat="server" Text="Thận-t.niệu"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtThan" style="width:95% !important"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                              
                                <td width="80px">
                                    <asp:Label ID="Label79" runat="server" Text="Tuần hoàn"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txttuanhoan" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label80" runat="server" Text="RHM"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtrhm" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label81" runat="server" Text="TMH"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txttmh" Width="100%"></asp:TextBox>
                                </td>
                                 <td width="80px">
                                    <asp:Label ID="Label82" runat="server" Text="Mắt"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtmat" style="width:95% !important"></asp:TextBox>
                                </td>
                            </tr>
                            <tr>
                             
                                <td width="80px">
                                    <asp:Label ID="Label84" runat="server" Text="Thần kinh"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtthankinh" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label85" runat="server" Text="N.tiết-D.D"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtnoitiet" Width="100%"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label86" runat="server" Text="Khác"></asp:Label>
                                </td>
                                <td colspan="3">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtkhac" style="width:98% !important"></asp:TextBox>
                                </td>

                            </tr>
                            <tr>
                                <td>
                                    <asp:Label ID="Label87" runat="server" Text="Xử trí"></asp:Label>
                                </td>
                                <td colspan="7">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtXutri" style="width:99% !important"></asp:TextBox>
                                </td>
                            </tr>
                        </table>

                    </fieldset>
                </div>
       
                <div class="form-container">
                    <fieldset align="center">
                        <legend>
                            <label>
                                Chẩn đoán
                            </label>
                        </legend>

                        <table width="95%">
                              
                            <tr>
                                <td>
                                    <asp:Label ID="Label58" runat="server" Text="Chẩn đoán(*)"></asp:Label>
                                </td>
                                <td width="70px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                    <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" runat="server" ID="cboChanDoan" Width="70px"
                                        DataSourceID="ObjectDanhMucBenh" DropDownWidth="470px"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                         AppendDataBoundItems="true" 
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        DataValueField="MaBenhID" 
                                        HighlightTemplatedItems="true" MarkFirstMatch="true"
                                        DataTextField="MaICDTen"  Filter ="Contains"
                                        OnItemDataBound="cboBenh_ItemDataBound"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedCD">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout" width ="100%">
                                                <tr>
                                                    <td>Mã ICD</td>
                                                    <td>Tên bệnh</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                              <table class="NHTC_table_layout" width ="100%">
                                                <tr>
                                                    <td width="70px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                                    </td>
                                                    <td width="400px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                    </td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>
                                <td colspan="3">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChanDoan" Width="100%" ></asp:TextBox>

                                </td>
                                <td style ="text-align:right">
                                    <asp:Label ID="Label2" runat="server" Text="Chẩn đoán YHCT"></asp:Label>
                                </td>
                                <td width="70px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                    <telerik:RadComboBox  IsCaseSensitive ="false"                
                                          TabIndex="1" runat="server" ID="cboChanDoanKem" Width="70px"
                                        DataSourceID="ObjectDanhMucBenh" DropDownWidth="470px"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                         AppendDataBoundItems="true" 
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        DataValueField="MaBenhID"
                                        HighlightTemplatedItems="true" MarkFirstMatch="true"
                                         DataTextField="MaICDTen"  Filter="Contains"
                                        OnItemDataBound="cboBenh_ItemDataBound"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedCDKem">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout" width ="100%">
                                                <tr>
                                                    <td>Mã ICD</td>
                                                    <td>Tên bệnh</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                              <table class="NHTC_table_layout" width ="100%">
                                                <tr>
                                                    <td width="70px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                                    </td>
                                                    <td width="400px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                    </td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>
                                <td width="300px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChanDoanKem" Width="100%"></asp:TextBox>

                                </td>

                            </tr>
                                 <tr>
                                <td>
                                    <asp:Label ID="Label93" runat="server" Text="C.Đoán kèm 2"></asp:Label>
                                </td>
                                <td width="70px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                   <telerik:RadComboBox  IsCaseSensitive ="false"                
                                         TabIndex="1" runat="server" ID="cboChanDoanKem2" Width="70px"
                                        DataSourceID="ObjectDanhMucBenh" DropDownWidth="470px"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                         AppendDataBoundItems="true" 
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        DataValueField="MaBenhID"
                                        HighlightTemplatedItems="true" MarkFirstMatch="true"
                                        DataTextField="MaICDTen"  Filter="Contains"
                                        OnItemDataBound="cboBenh_ItemDataBound"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedCDKem2">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout">
                                                <tr>
                                                    <td>Mã ICD</td>
                                                    <td>Tên bệnh</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>
                                                <tr>
                                                    <td width="70px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                                    </td>
                                                    <td width="400px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                    </td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>
                                <td colspan="3">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChanDoanKem2" Width="100%"></asp:TextBox>

                                </td>
                                <td>
                                    <asp:Label ID="Label94" runat="server" Text="C.Đoán kèm 3"></asp:Label>
                                </td>
                                <td width="70px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                   <telerik:RadComboBox  IsCaseSensitive ="false"                
                                         TabIndex="1" runat="server" ID="cboChanDoanKem3" Width="70px"
                                        DataSourceID="ObjectDanhMucBenh" DropDownWidth="470px"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                         AppendDataBoundItems="true" 
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        DataValueField="MaBenhID"
                                        HighlightTemplatedItems="true" MarkFirstMatch="true"
                                         DataTextField="MaICDTen"  Filter="Contains"
                                        OnItemDataBound="cboBenh_ItemDataBound"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedCDKem3">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout">
                                                <tr>
                                                    <td>Mã ICD</td>
                                                    <td>Tên bệnh</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>
                                                <tr>
                                                    <td width="70px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                                    </td>
                                                    <td width="400px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                    </td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>
                                <td width="300px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChanDoanKem3" style="width:98% !important"></asp:TextBox>

                                </td>

                            </tr>
                            <tr>
                                <td width="80px">
                                    <asp:Label ID="Label38" runat="server" Text="Hướng ĐT"></asp:Label>
                                </td>
                                <td colspan="2" width="170px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                    <telerik:RadComboBox  IsCaseSensitive ="false"                 ID="cboHuongDT" runat="server" Enabled="true" DataSourceID="odsHuongDT"
                                        DataValueField="Key" TabIndex="1"
                                        DataTextField="Value"
                                        Width="100%" OnSelectedIndexChanged="cboHuongDT_SelectedIndexChanged"
                                        AutoPostBack="true">
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>
                                    <td >
                                     <asp:Label ID="lblHuongDT" runat="server" Text="Hướng ĐT" Visible="false"></asp:Label>
                                              
                                  </td>
                              
                                           
                                              <td colspan="3" align="left" runat="server" id="duantest" >
                                                 <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                                    <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" ID="cboBVChuyen" 
                                                         runat="server" Width="220px" Visible="false"
                                                    AppendDataBoundItems="True" 
                                                    DataSourceID="odsNoiDK"
                                                    AutoPostBack="false"
                                                    DataTextField="TenBV" DataValueField="MaBV"
                                                    DropDownWidth="470px"
                                                      EnableAutomaticLoadOnDemand="true"
                                      EnableLoadOnDemand="true"
                                                             EnableVirtualScrolling="true"
                                                    ItemsPerRequest="50"
                                                    ShowMoreResultsBox="true"
                                                    ShowDropDownOnTextboxClick="true"
                                                    MarkFirstMatch="true"
                                                    Filter="Contains"
                                                    HighlightTemplatedItems="true"
                                                    OpenDropDownOnLoad="false"
                                                  >
                                                    <HeaderTemplate>
                                                        <table class="NHTC_table_layout" width ="100%">
                                                            <tr>

                                                               
                                                                <td>Tên BV</td>
                                                                 <td>Mã BHXH</td>
                                                            </tr>
                                                        </table>
                                                    </HeaderTemplate>
                                                    <Items>
                                                        <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                                    </Items>
                                                    <ItemTemplate>
                                                          <table class="NHTC_table_layout" width ="100%">
                                                            <tr>
                                                              
                                                                <td width="400px">
                                                                    <%# DataBinder.Eval(Container.DataItem, "TenBV") %>
                                                                </td>
                                                                  <td align="right" width="70px">
                                                                    <%# DataBinder.Eval(Container.DataItem, "MaBHXH")%>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </ItemTemplate>
                                                </telerik:RadComboBox>
                                        
                                                <telerik:RadComboBox  IsCaseSensitive ="false"                
                                                      TabIndex="1" ID="cboKhoaNV" runat="server"
                                                    DataTextField="Value" DataValueField="Key"
                                                    DataSourceID="odskhoaNV"
                                                    Enabled="true" width="220px"
                                                    AppendDataBoundItems="True" CssClass="span-all"
                                                    AutoPostBack="false"
                                                    EnableVirtualScrolling="true"
                                                    EnableLoadOnDemand="true"
                                                    EnableAutomaticLoadOnDemand="true"
                                                   
                                                    ShowMoreResultsBox="true"
                                                    ShowDropDownOnTextboxClick="true"
                                                    MarkFirstMatch="true"
                                                    Filter="Contains"
                                                    HighlightTemplatedItems="true"
                                                   
                                                    Visible="false">
                                                </telerik:RadComboBox>
                                          
                                                 
                                 <% } %>
                                                <asp:TextBox runat="server" TabIndex="1" ID="dtNgayHen"
                                                   style="width:40px !important"
                                                   
                                                     Visible="false"></asp:TextBox>
                          
                                            </td>
                                           
                                        <td><asp:Button ID ="cmdInPhieu"  runat ="server"  Text ="In phiếu" OnClick ="cmdInPhieu_Click" /> </td>
                 
                               
                            </tr>
                            <tr>

                                <td width="80px">
                                    <asp:Label ID="Label60" runat="server" Text="Chăm sóc"></asp:Label>
                                </td>
                                <td colspan="4">
                                    <asp:TextBox ID="txtLoidan" runat="server" Enabled="true" Width="100%" TabIndex="1"></asp:TextBox>
                                </td>
                                <td width="80px">
                                    <asp:Label ID="Label59" runat="server" Text="Bác sĩ khám(*)"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox ID="txtMaNV" runat="server" Enabled="true" Width="50px"  TabIndex="1" OnTextChanged="txtMaNV_TextChanged" AutoPostBack="true"></asp:TextBox>
                                </td>
                                <td width="250px">
                                     <%if (txtindextab.Value == "0") %>
                                 <% { %>
                                    <telerik:RadComboBox  IsCaseSensitive ="false"                 
                                         TabIndex="1" ID="cboNhanVien" runat="server"
                                        AppendDataBoundItems="True" AutoPostBack="false"
                                        CaseSensitive="false" CssClass="span-all"
                                        DataSourceID="ObjectDanhMucNV" DataTextField="HoTen"
                                        DataValueField="MaNV" DropDownWidth="470px"
                                        EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                        EnableVirtualScrolling="true" ExpandDirection="Down"
                                        Filter="Contains" HighlightTemplatedItems="true" 
                                             OnClientSelectedIndexChanged="comboSelectedIndexChangedBS" 
                                   
                                        ItemsPerRequest="50" MarkFirstMatch="true" ShowDropDownOnTextboxClick="true"
                                        ShowMoreResultsBox="true" Width="100%">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout" width ="100%">
                                                <tr>
                                                    <td width="200px">Họ tên</td>
                                                    <td width="200px">Khoa</td>
                                                    <td width="70px">Mã NV</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                              <table class="NHTC_table_layout" width ="100%">

                                                <tr>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "HoTen") %></td>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "TenKhoa") %></td>
                                                    <td width="70px"><%# DataBinder.Eval(Container.DataItem, "MaNV") %></td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                    <%} %>
                                </td>

                            </tr>
                        </table>

                    </fieldset>
                </div>
            </telerik:RadPageView>
               <%if (txtindextab.Value == "1") %>
            <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView2">
                <asp:HiddenField ID="txtmadv" runat="server" />
                <table >
                    <tr>
                        <td colspan ="4">
              <div class="form-container">
                <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>
                        <table>
                            <tr>
                                <td width="70px">
                                    <asp:Label ID="Label33" runat="server" Text="Họ tên"></asp:Label>
                                </td>
                                <td width="180px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenDV" Enabled="false"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label34" runat="server" Text="Giới tính"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTDV" Enabled="false" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>
                                <td>
                                    <asp:Label ID="Label40" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiDV" Enabled="false" width="50px"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label44" runat="server" Text="Mã BN"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNDV" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div> 
              
                <fieldset align="center">
                    <legend>
                        <label>
                        </label>
                    </legend>
                    <div align="center">
                        <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="100%">
                            <tr>
                                <td>
                                    <asp:Label ID="Label6" runat="server" Text="Tổng tiền"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTongTien" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label14" runat="server" Text="Tiền XN"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTienXN" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label15" runat="server" Text="Tiền thuốc"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTienThuoc" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>

                            </tr>
                        </table>

                    </div>
                </fieldset>
              </td>
                        <td>
                               <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true"      
                   ID="grdKhoa" GroupingSettings-CaseSensitive ="false" runat="server"
                    AutoGenerateColumns="false" Visible="false"
                    GridLines="None"
                        HeaderStyle-Font-Bold="true"
                    Selecting-AllowRowSelect="true"                                
                 OnNeedDataSource ="grdKhoa_NeedDataSource" 
                      height="150px" width ="300px"
                    Skin="Default" 
                    ClientSettings-Scrolling-AllowScroll="true"
                  >
            <MasterTableView   ShowHeadersWhenNoRecords="true" AutoGenerateColumns="False" 
                CommandItemDisplay="None" EditMode="InPlace"
                 HorizontalAlign="Center" >
                <Columns>                                                                   
                    <telerik:GridBoundColumn ItemStyle-Width="190px" HeaderStyle-Width="190px" 
                        DataField="TenKhoa" HeaderText="Khoa"
                         ReadOnly="true" SortExpression="TenKhoa" UniqueName="TenKhoa"
                       >
                    </telerik:GridBoundColumn>   
                     <telerik:GridBoundColumn DataField="soLuotDangK" HeaderText="Số BN" ReadOnly="true" 
                         SortExpression="soLuotDangK" UniqueName="soLuotDangK"
                          AllowFiltering="false"
                          ItemStyle-Width="70px" HeaderStyle-Width="70px">                          
                    </telerik:GridBoundColumn> 
                  
  	            <telerik:GridBoundColumn DataField="SoLuotCK" HeaderText="C.khám" ReadOnly="true"
                         SortExpression="SoLuotCK" UniqueName="SoLuotCK"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn>  
                     <telerik:GridBoundColumn DataField="SoLuotDK" HeaderText="Đ.khám" ReadOnly="true" SortExpression="SoLuotDK" UniqueName="SoLuotDK"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn> 

                </Columns>
            </MasterTableView>
        </telerik:RadGrid> 
               
                        </td>
                        </tr>
                    </table>
                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdXNTT" runat="server"
                    Height="500px"
                    Skin="Default"
                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                    HeaderStyle-Font-Bold="true"
                    OnNeedDataSource="grdDichVu_NeedDataSource"
                    OnItemCommand="grdDichVu_ItemCommand"
                    OnDeleteCommand="grdDichVu_DeleteCommand"
                    OnUpdateCommand="grdDichVu_UpdateCommand"
                    OnInsertCommand="grdDichVu_InsertCommand"
                    OnItemDataBound="grdDichVu_ItemDataBound"
                    OnItemCreated ="grdXNTT_ItemCreated"

                    MasterTableView-EditMode="InPlace">
                    <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                         KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true" 
                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />

                    </ClientSettings>
                    <HeaderStyle Width="100px"></HeaderStyle>
                    <MasterTableView    AutoGenerateColumns="false" CommandItemDisplay="None"
                        HorizontalAlign="Center" DataKeyNames="STT">
                        <CommandItemSettings />
                        <EditFormSettings CaptionFormatString="TT-XN-CDHA-TDCN" CaptionDataField="">
                            <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                        </EditFormSettings>
                         <SortExpressions>
                    <telerik:GridSortExpression FieldName="STT" SortOrder="Descending" />
                </SortExpressions>
                        <Columns>
                              <telerik:GridBoundColumn DataField="NhapSL" HeaderText="Nhập SL"
                            ReadOnly="true" SortExpression="NhapSL" UniqueName="NhapSL" Display="false">
                        </telerik:GridBoundColumn>
                            <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                UniqueName="Edit"
                                EditText="Sửa" InsertText="Enter-Ghi"
                                ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                ItemStyle-HorizontalAlign="Center">
                            </telerik:GridEditCommandColumn>
                            <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                HeaderText="" Text="Delete">
                                <HeaderStyle Width="20px" HorizontalAlign="Center" />
                            </telerik:GridButtonColumn>
                            <telerik:GridBoundColumn DataField="STT"
                                FooterAggregateFormatString="Tổng số: {0} "
                                HeaderText="STT" SortExpression="STT"
                                UniqueName="STT" ItemStyle-Width="30px"
                                HeaderStyle-Width="30px" ReadOnly="true">
                            </telerik:GridBoundColumn>

                              <telerik:GridTemplateColumn HeaderText="Mã DV" DataField="MaDV"
                                UniqueName="MaDVXN" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="90px"
                                HeaderStyle-Width="90px">
                                <ItemTemplate>
                                    <%# Eval("MaDV")%>
                                </ItemTemplate>
                                <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"  ID="cboMaDichVu" runat="server"
                                        AppendDataBoundItems="True" CssClass="span-all" 
                                        DataSourceID="odsDichVu" Culture="vi-VN"
                                        AutoPostBack="false"
                                        DataTextField="MaDV" DataValueField="MaDV"
                                        Filter="StartsWith"
                                        MarkFirstMatch="true"
                                        HighlightTemplatedItems="true"
                                        DropDownAutoWidth="Disabled"
                                        DropDownWidth="680px"
                                        DropDownHeight="200px"
                                        ExpandDirection="Up"
                                        OnItemDataBound="comboDataBound"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50" 
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                       
                                        OnClientDropDownOpening="OnClientDropDownOpening"
                                        OnClientDropDownClosing="OnClientDropDownClosing"
                                        OnClientItemChecked="OnClientItemChecked"
                                    OnClientItemsRequesting ="OnClientItemsRequesting"
                                        CheckBoxes="true"
                                        CheckedItemsTexts="DisplayAllInInput"
                                        OnClientKeyPressing ="OnClientFocus"
                                        Width="100%" Height="200px">
                                        <HeaderTemplate>
                                            <table>
                                                <tr>
                                                    <td width="20px"></td>
                                                     <td width="80px">Mã DV</td>
                                                    <td width="300px">Tên DV</td>
                                                    <td width="80px">Đơn giá TT</td>
                                                    <td width="80px">Đơn giá BH</td>
                                                    <td width="80px">Đơn giá CL</td>

                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>
                                                <tr>
                                                       <td width="50px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaDV") %>
                                                    </td>
                                                    <td width="300px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenDV") %>
                                                    </td>

                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "DongiaTT") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "Dongia") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "GiaChenhlenh") %>
                                                    </td>
                                                </tr>
                                            </table>

                                        </ItemTemplate>
                                    </telerik:RadComboBox></InsertItemTemplate>
                            </telerik:GridTemplateColumn>

                            <telerik:GridTemplateColumn HeaderText="Tên DV" DataField="MaDV"
                                UniqueName="MaDV" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                HeaderStyle-Width="350px">
                                <ItemTemplate>
                                    <%# Eval("TenTM")%>
                                </ItemTemplate>
                                <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"      
                                        ID="cboDichVu" runat="server"
                                        AppendDataBoundItems="True" CssClass="span-all"
                                        DataSourceID="odsDichVu" 
                                        AutoPostBack="false"
                                        DataTextField="TenDV" DataValueField="MaDV"
                                        Filter="Contains"
                                        HighlightTemplatedItems="true"
                                      MarkFirstMatch="true" 
                                        DropDownAutoWidth="Disabled"
                                        DropDownWidth="680px"
                                        DropDownHeight="200px"
                                        ExpandDirection="Up"
                                        OnItemDataBound="comboDataBound"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        OnClientSelectedIndexChanged="OnClientSelectedIndexChanged"
                                       
                                   Width ="100%" Height="200px">
                                        <HeaderTemplate>
                                              <table >
                                                <tr>
                                                    <td width="20px"></td>
                                                    <td width="300px">Tên DV</td>
                                                    <td width="50px">Đơn giá TT</td>
                                                    <td width="50px">Đơn giá BH</td>

                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                              <table >
                                                <tr>
                                                   
                                                    <td width="300px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenDV") %>
                                                    </td>

                                                    <td width="50px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "DongiaTT") %>
                                                    </td>
                                                    <td width="50px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "Dongia") %>
                                                    </td>

                                                </tr>
                                            </table>

                                        </ItemTemplate>
                                    </telerik:RadComboBox>

                                </InsertItemTemplate>
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="DonGiaTT"
                                HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaTT"
                                UniqueName="DonGiaTT">
                                <ItemTemplate>
                                    <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                        readonly="true" Text='<%# Eval("DonGiaTT", "{0:C}") %>'>&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>

                                    
                                        <asp:TextBox Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaTT", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="BHTinhTien"
                                HeaderText="BH" SortExpression="BHTinhTien"
                                UniqueName="BHTinhTien">
                                <ItemTemplate>
                                    <asp:CheckBox  ID="chBH" runat="server"
                                        readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                </ItemTemplate>
                                <EditItemTemplate>

                                    
                                        <asp:CheckBox  Enabled="false" ID="chkBH" runat="server"
                                            readonly="true" Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'></asp:CheckBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="SoLuong"
                                HeaderText="SL" SortExpression="SoLuong"
                                UniqueName="SoLuong">
                                <ItemTemplate>
                                    <asp:Label ID="lbUnit" runat="server"
                                        Text='<%# Eval("Soluong", "{0:#,###.0}") %>' Width="50px"> </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate><telerik:RadNumericTextBox ID="tbSoLuong" runat="server"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("SoLuong", "{0:#,###.0}") %>'
                                            Width="50px">
                                        </telerik:RadNumericTextBox>
                                   
                                </EditItemTemplate>
                                <HeaderStyle Width="60px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                HeaderText="Tự túc"
                                AllowFiltering="false"
                                HeaderStyle-Width="50px"
                                SortExpression="TinhTien" UniqueName="TinhTien">
                            </telerik:GridCheckBoxColumn>
                              <telerik:GridTemplateColumn DataField="GhiChu" 
                                    HeaderText="Ghi chú"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="200px" 
                                    SortExpression="GhiChu" UniqueName="GhiChu">
                                  <ItemTemplate>
                                    <%# Eval("GhiChu")%>
                                </ItemTemplate>
                                   <EditItemTemplate>

                                    
                                        <asp:TextBox Enabled="false" ID="tbGhiChu" runat="server" 
                                             Text='<%# Bind("GhiChu") %>'
                                            Width="200px">
                                        </asp:TextBox>
                                </EditItemTemplate>
                                </telerik:GridTemplateColumn>
                              <telerik:GridTemplateColumn HeaderText="Khoa TH" DataField="MaKhoa"
                                    UniqueName="MaKhoa" DataType="System.String" AllowFiltering="false"
                                    HeaderStyle-Font-Bold="true" ItemStyle-Width="200px"
                                    HeaderStyle-Width="200px">
                                    <ItemTemplate>
                                    <%# Eval("TenKhoa")%>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"   ID="cboKhoa" runat="server"
                                        AppendDataBoundItems="True" CssClass="span-all"
                                        DataSourceID="cdsKhoaKB" Width ="100%"
                                        AutoPostBack="false"
                                        MarkFirstMatch="true"  
                                          DataTextField="Value" DataValueField="Key"
                                        Filter="Contains"
                                        HighlightTemplatedItems="true"
                                        DropDownAutoWidth="Disabled"
                                    DropDownWidth="250px"
                                        DropDownHeight="200px"
                                        ExpandDirection="Up"
                                     
                                        EnableLoadOnDemand="true"
                                      
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true">     
                                                                             
                                    </telerik:RadComboBox>

                                    </EditItemTemplate>
                                </telerik:GridTemplateColumn>
                              <telerik:GridTemplateColumn DataField="DonGiaBH"
                                HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaBH"
                                UniqueName="DonGiaBH">
                                <ItemTemplate>
                                    <asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                        readonly="true" Text='<%# Eval("DonGiaBH", "{0:C}") %>'>&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>

                                    
                                        <asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBH", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="GiaChenhLech"
                                HeaderText="Giá CL" ItemStyle-HorizontalAlign="Right" SortExpression="GiaChenhLech"
                                UniqueName="GiaChenhLech">
                                <ItemTemplate>
                                    <asp:Label Enabled="false" ID="lbUnitPriceCL" runat="server"
                                        readonly="true" Text='<%# Eval("GiaChenhLech", "{0:C}") %>'>&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>

                                    
                                        <asp:TextBox Enabled="false" ID="tbUnitPriceCL" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("GiaChenhLech", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                        
                            <telerik:GridBoundColumn DataField="DaTT" HeaderText="Đã TT"
                                ReadOnly="true" SortExpression="DaTT" UniqueName="DaTT" >
                                  <HeaderStyle Width="50px" />
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                            </telerik:GridBoundColumn>


                            <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                HeaderText="Hủy" ReadOnly="true"
                                AllowFiltering="false"
                                HeaderStyle-Width="50px"
                                SortExpression="Huy" UniqueName="Huy">
                            </telerik:GridCheckBoxColumn>

                         

                            <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                SortExpression="NgayLap" UniqueName="NgayLap">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                SortExpression="TenNguoiSD" UniqueName="TenNguoiLap">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                SortExpression="NgaySD" UniqueName="NgaySD">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn  CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                SortExpression="TenNguoiSD" UniqueName="TenNguoiSD">
                            </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaHuongDT" HeaderText="Hướng ĐT" ReadOnly="true"
                                SortExpression="MaHuongDT" UniqueName="MaHuongDT">
                            </telerik:GridBoundColumn>


                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
                
            </telerik:RadPageView>


            <%} %>
                <%if (txtindextab.Value == "2") %>
            <% { %>
        
            <telerik:RadPageView runat="server" ID="RadPageView3">
                 <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label27" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenT" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label28" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTT" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label29" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinhT" Enabled="false" ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label30" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiT" Width="50px" Enabled="false"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label31" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNT" Width="70px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div>
                       <fieldset align="center">
                    <legend>
                        <label>
                        </label>
                    </legend>
                    <div align="center">
                        <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="100%">

                            <tr>
                                <td>
                                    <asp:Label ID="Label4" runat="server" Text="Tổng tiền"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTongTienT" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label17" runat="server" Text="Tiền XN"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTienXNT" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label21" runat="server" Text="Tiền thuốc"></asp:Label>
                                </td>
                                <td>
                                    <asp:TextBox Enabled="false" ID="txtTienThuocT" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0"
                                        Width="100px">
                                    </asp:TextBox>
                                </td>

                            </tr>
                        </table>

                    </div>
                </fieldset>
                <div class="contentWrapper">
                    <fieldset align="center">
                        <legend>
                            <label>
                            </label>
                        </legend>
                        <div align="center">
                            <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="100%">

                                <tr>


                                    <td>Bài thuốc                            
                                    </td>
                                    <td>
                                         <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" runat="server" ID="cboGoiTY" AutoPostBack="true"
                                            OnSelectedIndexChanged="cboGoi_SelectedIndexChanged"
                                            EnableVirtualScrolling="true" CssClass="span-all"
                                            EnableLoadOnDemand="true" CaseSensitive="false"
                                            DataSourceID="ObjectDanhMucBT"
                                            EnableAutomaticLoadOnDemand="true"
                                             AppendDataBoundItems="true" 
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            Filter="Contains"
                                            DataValueField="Key"
                                            DataTextField="Value"
                                             >
                                              <Items>
                                    <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                </Items>
                                        </telerik:RadComboBox>
                                       
                                    </td>
                                    <td width="100px">
                                        <asp:Label ID="Label83" runat="server" Text="Nhập hỗ trợ" Width="100px"></asp:Label>
                                    </td>
                                    <td>
                                        <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" ID="cboNhapHoTroTY" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsNhapHoTro" CaseSensitive="false"
                                            AutoPostBack="true"
                                            DataTextField="NgayDK" DataValueField="MaSoKham" DropDownWidth="470px"
                                            EnableVirtualScrolling="true"
                                            OnSelectedIndexChanged="cboNhapHoTroTY_SelectedIndexChanged"
                                            EnableLoadOnDemand="true"
                                            EnableAutomaticLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            Filter="Contains">
                                            <HeaderTemplate>
                                                <table class="NHTC_table_layout" width ="100%">
                                                    <tr>


                                                        <td width="80px">Ngày ĐK</td>

                                                        <td width="200px">Chẩn đoán</td>
                                                        <td width="200px">Bác sỹ khám</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                  <table class="NHTC_table_layout" width ="100%">

                                                    <tr>
                                                        <td width="80px">
                                                            <%# DataBinder.Eval(Container.DataItem, "NgayDK") %>
                                                        </td>

                                                        <td width="200px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                        </td>
                                                        <td width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "bschidinh") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>
                                    </td>
                                    <td>
                                        <%--<asp:Button ID="cmdNhapHoTroTY" Text="..."  runat="server" />--%>

                                    </td>
                                </tr>
                            </table>
                        </div>
                    </fieldset>
                    <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdThuoc" runat="server"
                        Height="500px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                        OnDeleteCommand="grdDichVu_DeleteCommand"
                        OnUpdateCommand="grdDichVu_UpdateCommand"
                        OnInsertCommand="grdDichVu_InsertCommand"
                        OnItemDataBound="grdDichVu_ItemDataBound"
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True" KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true" AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" FrozenColumnsCount="4"  />

                        </ClientSettings>
                        <HeaderStyle Width="130px" />
                        <MasterTableView    AutoGenerateColumns="false"
                            CommandItemDisplay="None" HorizontalAlign="Center" DataKeyNames="STT">
                            <CommandItemSettings />

                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Sử Dụng" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>
                             <SortExpressions>
                    <telerik:GridSortExpression FieldName="STT" SortOrder="Descending" />
                </SortExpressions>
                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STT"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STT"
                                    UniqueName="STT" ItemStyle-Width="30px"
                                    HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>

                                <telerik:GridTemplateColumn HeaderText="Tên thuốc" DataField="MaThuoc"
                                    UniqueName="MaThuoc" DataType="System.String" AllowFiltering="false"
                                    HeaderStyle-Font-Bold="true" ItemStyle-Width="250px"
                                    HeaderStyle-Width="250px">
                                    <ItemTemplate>
                                        <%# Eval("TenTM")%>
                                    </ItemTemplate>
                                    <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"                   ID="cboThuoc" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsThuoc" Width ="100%"
                                            AutoPostBack="false"
                                            DataTextField="TenTM" DataValueField="MaThuoc"
                                            Filter="StartsWith"
                                            MarkFirstMatch="true" 
                                            HighlightTemplatedItems="true"
                                            DropDownAutoWidth="Disabled"
                                            DropDownWidth="680px"
                                            DropDownHeight="200px"
                                            ExpandDirection="Up"
                                            OnItemDataBound="comboDataBound"
                                            OnClientSelectedIndexChanged="OnClientSelectedIndexChanged"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                            EnableAutomaticLoadOnDemand="true">
                                            <HeaderTemplate>
                                                  <table class="NHTC_table_layout" width ="100%">
                                                    <tr>

                                                        <td width="260px">Tên thuốc</td>
                                                        <td width="50px">ĐVT</td>
                                                        <td width="70px">Tồn CK</td>
                                                        <td width="50px">Đơn giá TT</td>
                                                        <td width="50px">Đơn giá BH</td>
                                                        <td width="260px">Hoạt chất</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                  <table class="NHTC_table_layout" width ="100%">
                                                    <tr>

                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenTM") %>
                                                        </td>
                                                        <td width="50px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenDVT") %>
                                                        </td>
                                                        <td align="right" width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TonCKD", "{0:#,###}")%>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaD") %>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaBHD") %>
                                                        </td>
                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenGoc") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>

                                    </InsertItemTemplate>
                                </telerik:GridTemplateColumn>


                                <telerik:GridTemplateColumn DataField="TENDVT"
                                    HeaderText="ĐVT" SortExpression="TENDVT" UniqueName="TENDVT">
                                    <ItemTemplate>
                                        <asp:Label ID="lbTENDVT" runat="server" readonly="true" Enabled="false"
                                            Text='<%# Eval("TENDVT") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>
                                        
                                            <asp:TextBox ID="tbTENDVT" runat="server" Text='<%# Bind("TENDVT") %>'
                                                Enabled="false"></asp:TextBox>
                                       
                                    </EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaTTD"
                                    HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaTTD"
                                    UniqueName="DonGiaTTD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaTTD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:TextBox Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaTTD", "{0:C}") %>'
                                                Width="70px">
                                            </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaBHD"
                                    HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaBHD"
                                    UniqueName="DonGiaBHD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaBHD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBHD", "{0:C}") %>'
                                                Width="70px">
                                            </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="BHTinhTien"
                                    HeaderText="BH" SortExpression="BHTinhTien" DefaultInsertValue="false"
                                    UniqueName="BHTinhTien">
                                    <ItemTemplate>
                                        <asp:CheckBox  ID="chBH" runat="server"
                                            readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:CheckBox  Enabled="false" ID="chkBH" runat="server"
                                                Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'
                                                readonly="true"></asp:CheckBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="40px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="SoLuongD"
                                    HeaderText="SL" SortExpression="SoLuongD"
                                    UniqueName="SoLuongD">
                                    <ItemTemplate>
                                        <asp:Label ID="lbUnit" runat="server"
                                            Text='<%# Eval("SLKeDon", "{0:#,###.###}") %>' Width="50px"> </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadNumericTextBox ID="tbSoLuong" runat="server"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("SoLuongD", "{0:#,###.###}") %>'
                                                Width="50px">
                                            </telerik:RadNumericTextBox>
                                       
                                    </EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                    HeaderText="Tự túc"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="TinhTien" UniqueName="TinhTien">
                                </telerik:GridCheckBoxColumn>
                                   <telerik:GridCheckBoxColumn DataField="DaDung" DataType="System.Boolean"
                                    HeaderText="Đã dùng"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="DaDung" UniqueName="DaDung">
                                </telerik:GridCheckBoxColumn>
                              <telerik:GridBoundColumn DataField="sothuoc" HeaderText="SL/lần" 
                                    UniqueName="sothuoc" ItemStyle-Width="60px"
                                    HeaderStyle-Width="60px">
                                </telerik:GridBoundColumn>
                                  <telerik:GridBoundColumn DataField="lieuluong" HeaderText="Lần/Ngày" 
                                    UniqueName="lieuluong" ItemStyle-Width="60px"
                                    HeaderStyle-Width="60px">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="cachdungTT" HeaderText="Thời gian" 
                                    UniqueName="cachdungTT" ItemStyle-Width="60px"
                                    HeaderStyle-Width="60px">
                                </telerik:GridBoundColumn>

                                 <telerik:GridBoundColumn DataField="duongdung" HeaderText="Đường dùng" 
                                    UniqueName="duongdung" ItemStyle-Width="60px"
                                    HeaderStyle-Width="60px">
                                </telerik:GridBoundColumn>
                                 <telerik:GridBoundColumn DataField="dvt" HeaderText="ĐVT" 
                                    UniqueName="dvt" ItemStyle-Width="60px"
                                    HeaderStyle-Width="60px">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn DataField="DaTT" HeaderText="Đã TT"
                                    ReadOnly="true" SortExpression="DaTT" UniqueName="DaTT" Display="false">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                    SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="STTKhoa" HeaderText="STT khoa"
                                    ReadOnly="true" SortExpression="STTKhoa" UniqueName="STTKhoa" Display="false">
                                </telerik:GridBoundColumn>


                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="Huy" UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>


                                <telerik:GridBoundColumn  CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="Tenkhoa"
                                    HeaderText="Tên khoa" ReadOnly="true"
                                    SortExpression="tenkhoa" UniqueName="tenkhoa">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>

                </div>
            </telerik:RadPageView>
            <%} %>
               <%if (txtindextab.Value == "3") %>
            <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView4">
                  <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label50" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenLS" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label52" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTLS" Enabled="false" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label53" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinhLS" Enabled="false" ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label54" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiLS" Width="50px" Enabled="false"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label55" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNLS" Width="70px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div>
                <div class="contentWrapper">

                    <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdDanhSachDY" runat="server"
                        Height="120px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                         OnDeleteCommand="grdDichVu_DeleteCommand"
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True" KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true" AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />
                            <ClientEvents OnRowClick="RowDblClickForGrdDichVu" />
                        </ClientSettings>
                        <HeaderStyle Width="100px"></HeaderStyle>
                        <MasterTableView    AutoGenerateColumns="false" CommandItemDisplay="None" HorizontalAlign="Center"
                            DataKeyNames="MaSoKham,STT">
                            <CommandItemSettings />
                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Đông Y" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>

                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STT"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STT"
                                    UniqueName="STT" ItemStyle-Width="30px" HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="70px" HeaderStyle-Width="70px" 
                                    DataField="SLThang" HeaderText="SL thang" ReadOnly="true" SortExpression="SLThang" UniqueName="SLThang">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="LieuDung" HeaderText="Liều dùng" ReadOnly="true" SortExpression="LieuDung" UniqueName="LieuDung">
                                </telerik:GridBoundColumn>


                                <telerik:GridTemplateColumn DataField="TongDon"
                                    HeaderText="Tổng đơn" ItemStyle-HorizontalAlign="Right" SortExpression="TongDon"
                                    UniqueName="TongDon">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbTongDon" runat="server"
                                            readonly="true" Text='<%# Eval("TongDon", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>

                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                    HeaderText="Tự túc"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="TinhTien" UniqueName="TinhTien">
                                </telerik:GridCheckBoxColumn>


                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="Huy" UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                    SortExpression="NgayLap" UniqueName="NgayLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                    SortExpression="TenNguoiSD" UniqueName="TenNguoiLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                    SortExpression="NgaySD" UniqueName="NgaySD">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn  CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                    SortExpression="TenNguoiSD" UniqueName="TenNguoiSD">
                                </telerik:GridBoundColumn>



                                <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true" SortExpression="MaSoKham" UniqueName="MaSoKham">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>
                    <fieldset align="center">
                        <legend>
                            <label>
                            </label>
                        </legend>
                        <div align="center">
                            <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="100%">
                                <tr>

                                   <td>

                                        <asp:Label ID="Label18" runat="server" Text="Bài thuốc"></asp:Label>
                                    </td>
                                    <td Width ="200px">

                                        <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" runat="server" ID="cboGoiDY" AutoPostBack="true"
                                            OnSelectedIndexChanged="cboGoi_SelectedIndexChanged" CssClass="span-all"
                                            EnableVirtualScrolling="true" CaseSensitive="false"
                                            DataSourceID="ObjectDanhMucBT"
                                             AppendDataBoundItems="true" 
                                            EnableLoadOnDemand="true" Width ="200px"
                                            EnableAutomaticLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            Filter="Contains"
                                            DataValueField="Key"
                                            DataTextField="Value">
                                             <Items>
                                    <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                </Items>
                                        </telerik:RadComboBox>
                                    </td>
                                    <td width="100px">
                                        <asp:Label ID="Label1" runat="server" Text="Nhập hỗ trợ " Width="100px"></asp:Label>
                                    </td>
                                    <td colspan="6">
                                        <telerik:RadComboBox  IsCaseSensitive ="false"                  TabIndex="1" ID="cboNhapHoTroDY" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsNhapHoTroDY"
                                            AutoPostBack="true"
                                            DataTextField="NgayDK" DataValueField="MaSoKhamSTT" DropDownWidth="470px"
                                            EnableVirtualScrolling="true" CaseSensitive="false"
                                            EnableLoadOnDemand="true"
                                            EnableAutomaticLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            OnSelectedIndexChanged="cboNhapHoTroDY_SelectedIndexChanged"
                                            Filter="Contains">
                                            <HeaderTemplate>
                                                <table class="NHTC_table_layout" width ="100%">
                                                    <tr>


                                                        <td width="80px">Ngày ĐK</td>
                                                        <td width="200px">Bác sỹ khám</td>
                                                        <td width="50px">Số thang</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                  <table class="NHTC_table_layout"  width ="100%">
                                              

                                                    <tr>
                                                        <td width="80px">
                                                            <%# DataBinder.Eval(Container.DataItem, "NgayDK") %>
                                                        </td>

                                                        <td width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenBSChidinh") %>
                                                        </td>
                                                        <td width="50px">
                                                            <%# DataBinder.Eval(Container.DataItem, "SLThang") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>
                                    </td>
                                    <td>
                                        <asp:Button ID="cmdChitietDY" Text="..."  runat="server" />

                                    </td>
                                    <td width="80px"></td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:Label ID="Label19" runat="server" Text="Liều dùng"></asp:Label>
                                    </td>
                                    <td colspan ="3">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtLieuDungDY" text ="Ngày 1 thang chia 3 lần"
                                            ></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label39" runat="server" Text="Lưu ý"></asp:Label>
                                    </td>
                                    <td colspan ="5">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtLuuY" text =""
                                           ></asp:TextBox>
                                    </td>
                                   </tr>
                                <tr>
                                     <td width="80px">
                                        <asp:Label ID="Label37" runat="server" Text="Tổng 1 thang"></asp:Label>
                                    </td>
                                    <td >
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtDonThang" Enabled ="false" ></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:Label ID="Label16" runat="server" Text="SL thang"></asp:Label>
                                    </td>
                                    <td width="40px">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtSLThang"  
                                             onkeypress=" return onlyNumbers(event)" OnTextChanged ="txtSLThang_TextChanged"
                                           
                                            AutoPostBack="true"></asp:TextBox>
                                    </td>
                                    <td width="80px">
                                        <asp:Label ID="Label5" runat="server" Text="Thang TT"></asp:Label>
                                    </td>
                                    <td width="40px">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtSLThangTT" ></asp:TextBox>
                                    </td>
                                    <td width="80px">
                                        <asp:Label ID="Label3" runat="server" Text="Tổng đơn"></asp:Label>
                                    </td>
                                    <td colspan="2">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtTongDon" Enabled ="false" ></asp:TextBox>
                                                 <asp:HiddenField ID ="txtTT" runat ="server" />
                              
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </fieldset>
                    <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdThuocDY" runat="server"
                        Height="400px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                        OnDeleteCommand="grdDichVu_DeleteCommand"
                        OnUpdateCommand="grdDichVu_UpdateCommand"
                        OnInsertCommand="grdDichVu_InsertCommand"
                        OnItemDataBound="grdDichVu_ItemDataBound"
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True" 
                            KeyboardNavigationSettings-AllowSubmitOnEnter="true" 
                            KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                             AllowKeyboardNavigation="true"  KeyboardNavigationSettings-AllowActiveRowCycle="true"  >
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />

                        </ClientSettings>
                        <HeaderStyle Width="100px"></HeaderStyle>
                        <MasterTableView    AutoGenerateColumns="false" CommandItemDisplay="Top" HorizontalAlign="Center"
                            DataKeyNames="STTThuoc">
                               <CommandItemSettings AddNewRecordText="F12-Thêm" 
                                ShowAddNewRecordButton="true"     
                                ShowRefreshButton="false" 
                                ShowCancelChangesButton="false"
                                AddNewRecordImageUrl="~/img/icon/addCT.gif"
                                />       
                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Đông Y" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>
                              <SortExpressions>
                    <telerik:GridSortExpression FieldName="STTThuoc" SortOrder="Descending" />
                </SortExpressions>
                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STTThuoc"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STTThuoc"
                                    UniqueName="STTThuoc" ItemStyle-Width="30px" HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>


                                <telerik:GridTemplateColumn HeaderText="Tên thuốc"
                                    DataField="MaThuoc" UniqueName="MaThuoc" DataType="System.String"
                                    ItemStyle-Width="260px" HeaderStyle-Width="260px"
                                    AllowFiltering="false" HeaderStyle-Font-Bold="true">
                                    <ItemTemplate>
                                        <%# Eval("TenTM")%>
                                    </ItemTemplate>
                                    <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"                   ID="cboThuoc" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsThuocDY"
                                            AutoPostBack="false"
                                            DataTextField="TenTM" DataValueField="MaThuoc"
                                            Filter="Contains"
                                            HighlightTemplatedItems="true"
                                            DropDownAutoWidth="Disabled"
                                            DropDownWidth="680px"
                                            DropDownHeight="200px" Width ="100%"
                                            MarkFirstMatch="true" 
                                            ExpandDirection="Up"
                                            OnItemDataBound="comboDataBound"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                            EnableAutomaticLoadOnDemand="true"
                                            OnClientSelectedIndexChanged="OnClientSelectedIndexChanged">
                                            <HeaderTemplate>
                                                  <table class="NHTC_table_layout" width ="100%">
                                                    <tr>
                                                        <td width="260px">Tên thuốc</td>
                                                        <td width="50px">ĐVT</td>
                                                        <td width="70px">Tồn CK</td>

                                                        <td width="50px">Đơn giá TT</td>
                                                        <td width="50px">Đơn giá BH</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                  <table class="NHTC_table_layout" width ="100%">
                                                    <tr>

                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenTM") %>
                                                        </td>
                                                        <td width="50px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenDVT") %>
                                                        </td>
                                                        <td align="right" width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TonCKD", "{0:#,###}")%>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaD") %>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaBHD") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>

                                    </InsertItemTemplate>
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="DonGiaTTD"
                                    HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaTTD"
                                    UniqueName="DonGiaTTD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaTTD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:TextBox Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaTTD", "{0:C}") %>'
                                                Width="70px">
                                            </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaBHD"
                                    HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaBHD"
                                    UniqueName="DonGiaBHD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaBHD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBHD", "{0:C}") %>'
                                                Width="70px">
                                            </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="BHTinhTien"
                                    HeaderText="BH" SortExpression="BHTinhTien"
                                    UniqueName="BHTinhTien">
                                    <ItemTemplate>
                                        <asp:CheckBox  ID="chBH" runat="server"
                                            readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        
                                            <asp:CheckBox  Enabled="false" ID="chkBH" runat="server"
                                                readonly="true"
                                                Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'></asp:CheckBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="40px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="SoLuongD"
                                    HeaderText="SL" SortExpression="SoLuongD"
                                    UniqueName="SoLuongD">
                                    <ItemTemplate>
                                        <asp:Label ID="lbUnit" runat="server"
                                            Text='<%# Eval("SoLuongD", "{0:#,###.###}") %>' Width="50px"> </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadNumericTextBox ID="tbSoLuong" runat="server"
                                                NumberFormat-DecimalDigits="0" Text='<%# Bind("SoLuongD", "{0:#,###.###}") %>'
                                                Width="50px">
                                            </telerik:RadNumericTextBox>
                                       
                                    </EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                               
                                <telerik:GridBoundColumn DataField="ThanhTien" HeaderText="Thành Tiền"
                                     ReadOnly="true" SortExpression="ThanhTien" UniqueName="ThanhTien">
                                </telerik:GridBoundColumn>

                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="Huy" UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                    SortExpression="NgayLap" UniqueName="NgayLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                    SortExpression="TenNguoiSD" UniqueName="TenNguoiLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                    SortExpression="NgaySD" UniqueName="NgaySD">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn  CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                    SortExpression="TenNguoiSD" UniqueName="TenNguoiSD">
                                </telerik:GridBoundColumn>



                                <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true" SortExpression="MaSoKham" UniqueName="MaSoKham">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>

                </div>
            </telerik:RadPageView>

            <%} %>

            <%if (txtindextab.Value == "4") %>
            <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView5">
                   <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label32" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenDT" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label46" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTDT" Enabled="false" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label57" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinhDT" Enabled="false" ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label62" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiDT" Width="50px" Enabled="false"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label63" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNDT" Width="70px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div>
                <div class="contentWrapper">
                    <table>
                        <tr>
                              <td width="400px" valign="top" height="50px" style="vertical-align:top !important">
                                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdDSDieuTri" runat="server"
                                    AutoGenerateColumns="false"
                                    GridLines="None"
                                    OnItemCommand="grdDSDieuTri_ItemCommand"
                                    OnNeedDataSource="grdDSDieuTri_NeedDataSource"
                                    HeaderStyle-Font-Bold="true"
                                    Selecting-AllowRowSelect="true" EnablePostBackOnRowClick="true"
                                   Height="300px" Width="400px"
                                    Skin="Default"
                                    ClientSettings-Scrolling-AllowScroll="true"
                                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true">

                                    <ClientSettings KeyboardNavigationSettings-AllowSubmitOnEnter="true"
                                         KeyboardNavigationSettings-EnableKeyboardShortcuts="true" 
                                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" FrozenColumnsCount="5" />
                                        <ClientEvents OnRowClick="RowSelectedDT" />
                                    </ClientSettings>
                                    <HeaderStyle Width="100px"></HeaderStyle>
                                    <MasterTableView  EnableColumnsViewState ="false" ViewStateMode ="Disabled"  AutoGenerateColumns="False" CommandItemDisplay="None" EditMode="InPlace" HorizontalAlign="Center" DataKeyNames="MaSoKham">
                                        <CommandItemSettings ShowCancelChangesButton="true" ShowRefreshButton="false" ShowAddNewRecordButton="true" AddNewRecordText="F12 - Thêm" />
                                        <Columns>
                                            <telerik:GridBoundColumn DataField="NgayDK" HeaderText="Ngày khám" ReadOnly="true" SortExpression="NgayDK" UniqueName="NgayDK">
                                                <ItemStyle Width="70px" />
                                            </telerik:GridBoundColumn>
                                             <telerik:GridBoundColumn DataField="TenBenh" HeaderText="Chẩn đoán" ReadOnly="true" SortExpression="TenBenh" UniqueName="TenBenh">
                                                <ItemStyle Width="200px" />
                                            </telerik:GridBoundColumn>
                                               <telerik:GridBoundColumn DataField="BSChiDinh" HeaderText="Bác sỹ" ReadOnly="true" SortExpression="BSChiDinh" UniqueName="BSChiDinh">
                                                <ItemStyle Width="130px" />
                                            </telerik:GridBoundColumn>
                                            <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                                                <ItemStyle Width="70px" />
                                            </telerik:GridBoundColumn>

                                        </Columns>
                                    </MasterTableView>
                                </telerik:RadGrid>
                            </td>
                            <td width="540px">
                                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdChiTietDichVu" runat="server"
                                    AutoGenerateColumns="false"
                                    GridLines="None"
                                   
                                    HeaderStyle-Font-Bold="true"
                                    Selecting-AllowRowSelect="true" EnablePostBackOnRowClick="true"
                                     Height="300px" Width="540px"
                                    Skin="Default"
                                    ClientSettings-Scrolling-AllowScroll="true"
                                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true">

                                    <ClientSettings KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true" AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" FrozenColumnsCount="5" />
                                
                                    </ClientSettings>
                                    <HeaderStyle Width="100px"></HeaderStyle>
                                    <MasterTableView  EnableColumnsViewState ="false" ViewStateMode ="Disabled"  AutoGenerateColumns="False" CommandItemDisplay="None" EditMode="InPlace" HorizontalAlign="Center" Width="100%" >
                                        <CommandItemSettings ShowCancelChangesButton="true" ShowRefreshButton="false" ShowAddNewRecordButton="true" AddNewRecordText="F12 - Thêm" />
                                        <Columns>

                                            <telerik:GridBoundColumn  CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="TenDV" ItemStyle-Width="220px" HeaderStyle-Width="220px" HeaderText="Tên DV" ReadOnly="true"
                                                SortExpression="TenDV" UniqueName="TenDV">
                                            </telerik:GridBoundColumn>
                                              <telerik:GridBoundColumn DataField="slmua" HeaderText="SL" ReadOnly="true" SortExpression="soluong" UniqueName="soluong">
                                                <ItemStyle Width="50px" />
                                            </telerik:GridBoundColumn>
                                            <telerik:GridBoundColumn DataField="DongiaTT" HeaderText="Đơn giá TT" ReadOnly="true" SortExpression="TenKhoa" UniqueName="TenKhoa">
                                            </telerik:GridBoundColumn>

                                            <telerik:GridBoundColumn DataField="DongiaBH" HeaderText="Đơn giá BH" ReadOnly="true" SortExpression="DongiaBH" UniqueName="DongiaBH">
                                                <ItemStyle Width="60px" />
                                            </telerik:GridBoundColumn>

                                            <telerik:GridBoundColumn DataField="giachenhlech" HeaderText="Đơn giá CL" ReadOnly="true" SortExpression="giachenhlech" UniqueName="giachenhlech">
                                                <ItemStyle Width="60px" />
                                            </telerik:GridBoundColumn>
                                          


                                            <telerik:GridBoundColumn DataField="CK" HeaderText="MG" ReadOnly="true" SortExpression="CK" UniqueName="CK">
                                                <ItemStyle Width="70px" />
                                            </telerik:GridBoundColumn>

                                            <telerik:GridBoundColumn DataField="ThanhTien" HeaderText="Thành Tiền" ReadOnly="true" SortExpression="ThanhTien" UniqueName="ThanhTien">
                                                <ItemStyle Width="70px" />
                                            </telerik:GridBoundColumn>

                                        </Columns>
                                    </MasterTableView>
                                </telerik:RadGrid>
                            </td>
                        </tr>
                    </table>
                </div>

            </telerik:RadPageView>
            <%} %>
               <%if (txtindextab.Value == "5") %>
            <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView6">
                <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label67" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenKQ" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label68" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTKQ" Enabled="false" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label69" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinhKQ" Enabled="false" ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label70" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiKQ" Width="50px" Enabled="false"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label71" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNKQ" Width="70px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div>
                <div class="contentWrapper">
          <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdKQXN" GridLines="Both" EnableViewState ="true"  ClientSettings-Scrolling-AllowScroll="true" ShowStatusBar="true" runat="server"
                    Height="400px" 
                    Skin="Default"
                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                    HeaderStyle-Font-Bold="true"
              OnItemCommand="grdKetQua_ItemCommand"
                    OnNeedDataSource="grdDichVu_NeedDataSource"
                    MasterTableView-EditMode="InPlace">
                    <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                        KeyboardNavigationSettings-AllowSubmitOnEnter="true"
                        KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />
                          <ClientEvents OnRowClick="RowDblClickForGrdKetQua" />

                    </ClientSettings>
                    <HeaderStyle Width="100px"></HeaderStyle>
                    <MasterTableView  EnableColumnsViewState ="false" ViewStateMode ="Disabled"  AutoGenerateColumns="false" CommandItemDisplay="None"
                        HorizontalAlign="Center" DataKeyNames="STT, MADV, MaSoKham">
                        <CommandItemSettings />
                        <EditFormSettings CaptionFormatString="Kết quả XN" CaptionDataField="">
                            <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                        </EditFormSettings>
                        <Columns>


                            <telerik:GridBoundColumn DataField="STT"
                                FooterAggregateFormatString="Tổng số: {0} "
                                HeaderText="STT" SortExpression="STT"
                                UniqueName="STT" ItemStyle-Width="30px"
                                HeaderStyle-Width="30px" ReadOnly="true">
                            </telerik:GridBoundColumn>



                            <telerik:GridBoundColumn HeaderText="Tên DV" DataField="TenDV"
                                UniqueName="TenDV" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                HeaderStyle-Width="350px">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn HeaderText="Chỉ số" DataField="TenCS"
                                UniqueName="TenCS" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="120px"
                                HeaderStyle-Width="120px">
                            </telerik:GridBoundColumn>
                              <telerik:GridBoundColumn HeaderText="KQ" DataField="TenKQ"
                                UniqueName="TenKQ" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="100px"
                                HeaderStyle-Width="100px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="Kết quả" DataField="KQ"
                                UniqueName="KQ" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="100px"
                                HeaderStyle-Width="100px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="CS thấp" DataField="Chisothapnam"
                                UniqueName="Chisothapnam" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="50px"
                                HeaderStyle-Width="50px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="CS cao" DataField="Chisocaonam"
                                UniqueName="Chisocaonam" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="50px"
                                HeaderStyle-Width="50px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="Đơn vị" DataField="DonVi"
                                UniqueName="DonVi" DataType="System.String" AllowFiltering="false"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="50px"
                                HeaderStyle-Width="50px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="DaTT" HeaderText="Đã TT"
                                ReadOnly="true" SortExpression="DaTT" UniqueName="DaTT" Display="false">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn   CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false" DataField="MADV" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MADV" UniqueName="MADV" Display="false">
                            </telerik:GridBoundColumn>
                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
                    </div> 
    </telerik:RadPageView> 
            <%} %>
               <%if (txtindextab.Value == "6") %>
            <% { %>
 
            <telerik:RadPageView runat="server" ID="RadPageView7">
                   <div class="form-container">
                    <fieldset align="center" style = "width:98%">
                        <legend>
                            <label>
                                
                            </label>
                        </legend>

                        <table>
                            <tr>

                                <td width="70px">
                                    <asp:Label ID="Label72" runat="server" Text="Họ tên" Width="70px"></asp:Label>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtHoTenKN" Enabled="false" Width="100%"></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label73" runat="server" Text="Giới tính" Width="80px"></asp:Label>
                                </td>
                                <td>
                                   <asp:RadioButtonList TabIndex="1" ID="optGTKN" Enabled="false" runat="server" RepeatDirection="Horizontal">
                                        <asp:ListItem Value="1">Nam</asp:ListItem>
                                        <asp:ListItem Value="0" >Nữ</asp:ListItem>
                                    </asp:RadioButtonList>
                                </td>

                                <td>

                                    <asp:Label ID="Label74" runat="server" Text="Ngày sinh" Width="60px"></asp:Label>
                                </td>
                                <td colspan="2">
                                    <asp:TextBox runat="server" TabIndex="1" ID="dtNgaySinhKN" Enabled="false" ></asp:TextBox>
                                </td>
                                <td>
                                    <asp:Label ID="Label75" runat="server" Text="Tuổi"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtTuoiKN" Width="50px" Enabled="false"></asp:TextBox>
                                </td>
                                <td style="text-align:right">
                                    <asp:Label ID="Label76" runat="server" Text="Mã BN" Width="50px"></asp:Label>
                                </td>
                                <td width="70px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtMaBNKN" Width="70px" Enabled="false"></asp:TextBox>
                                </td>
                            </tr>
                           
                        </table>

                    </fieldset>
                </div>
                <div class="contentWrapper">
                    <fieldset align="center">
                         <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true"       
                               ID="grdKeNgoai" GridLines="None" runat="server" AllowAutomaticDeletes="True"  
            AllowAutomaticInserts="True"  Skin="Default"  
       
           height ="400px"
                AllowAutomaticUpdates= "true" 
            AutoGenerateColumns="false" Width="100%" 
              onneeddatasource="grdKeNgoai_NeedDataSource" 
             OnDeleteCommand ="grdKeNgoai_DeletedCommand"
                onupdatecommand="grdKeNgoai_UpdateCommand" 
                oninsertcommand="grdKeNgoai_InsertCommand" 
           
             onitemdatabound="grdKeNgoai_ItemDataBound" 
                    >
                 <ClientSettings  EnableRowHoverStyle="false" AllowKeyboardNavigation="true" 
                  >
                <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                <Scrolling AllowScroll="True"  /> <%--UseStaticHeaders="true" SaveScrollPosition="true"--%>
            <KeyboardNavigationSettings AllowActiveRowCycle ="true" AllowSubmitOnEnter ="true" FocusKey ="Y"  
            EnableKeyboardShortcuts="true"  ValidationGroup="CustomValidatioGroup"  /> 
               
                    
             </ClientSettings>
            <MasterTableView   NoMasterRecordsText ="" NoDetailRecordsText="" CommandItemDisplay="None" DataKeyNames="OrderNumber" 
                 
                 HorizontalAlign="NotSet" EditMode="InPlace"   AutoGenerateColumns="False"
                 AllowAutomaticUpdates="True" Width ="100%"
                  AllowAutomaticInserts="True" AllowAutomaticDeletes="True">
                   <CommandItemSettings  />  
                <SortExpressions>
                    <telerik:GridSortExpression FieldName="OrderNumber" SortOrder="Descending" />
                </SortExpressions>
              
                <Columns>
                     <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                    EditText="Sửa" InsertText ="Enter-Ghi" ItemStyle-Width="50px" HeaderStyle-Width="50px">
                </telerik:GridEditCommandColumn>
                     <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="Xóa" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                   <telerik:GridBoundColumn DataField="OrderNumber"  AllowFiltering="false" HeaderStyle-Width="20px"
                             FilterControlAltText="Filter OrderNumber column" readonly ="true" HeaderText="STT" 
                             SortExpression="STT" UniqueName="OrderNumber">
                 <HeaderStyle Width="20px" />   
                 </telerik:GridBoundColumn>  
                   <telerik:GridTemplateColumn HeaderText="Kê ngoài" HeaderStyle-Width="200px" UniqueName="MaKe" DataField="MaKe" >
                         <ItemTemplate>
                            <%# Eval("TenTM") %>
                        </ItemTemplate>
            
                        <InsertItemTemplate><telerik:RadComboBox  runat="server" ID="cboDichVu" 
                            DataTextField="TenTMHL"   
                           DataSourceID  ="ObjectDanhMuc"  AutoPostBack ="false" ExpandDirection="Up"
                             HighlightTemplatedItems="true" onitemdatabound="comboDataBoundKeNgoai" 
                                  DropDownWidth ="470px"    Width ="100%" 
                            OnClientSelectedIndexChanged="OnClientSelectedIndexChangedKeNgoai"
                             Filter ="Contains" 
                           
                            AppendDataBoundItems="True"   EnableVirtualScrolling="true"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                             ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                            EnableAutomaticLoadOnDemand="true"                
                                            MarkFirstMatch="true"  
                            DataValueField="MaKe"> 
                           
                              
                          <%-- selectedvalue =  '<%# Bind("MaThuoc")%>'onitemsrequested="cboDoiTuong_ItemsRequested"OnClientSelectedIndexChanging = "ClientSelectedIndexChanging" --%>
                          <HeaderTemplate>
         <table class ="NHTC_table_layout">
                <tr >
                <td width = "300px"  >Tên TM</td>
                    <td width = "100px"  >Tên ĐVT</td>
               
                  <td width = "70px"  >Tồn CK</td>
                  </tr></table>
             
              
					
			</HeaderTemplate>
                <Items > <telerik:RadComboBoxItem runat="server" Text="" Value="0"  /></Items>
               
               <ItemTemplate>
                         
				<table ><%--class ="NHTC_table_layout"--%>
                <tr>
                    <td width = "300px" >
						<%# DataBinder.Eval(Container.DataItem, "TenTMHL") %></td>
                     <td width = "100px" >
						<%# DataBinder.Eval(Container.DataItem, "TenDVT") %></td>
					 <td align="right" width="70px">
                      <%# DataBinder.Eval(Container.DataItem, "Nguong", "{0:#,###}")%>
                       </td>
				 </tr>
                </table>
                </ItemTemplate>
            </telerik:RadComboBox>
             
                                       
         </InsertItemTemplate>
 
                         <HeaderStyle Width="200px" />
 
    </telerik:GridTemplateColumn> 
                   <telerik:GridTemplateColumn DataField="TENDVT" 
                                HeaderText="Tên ĐVT" SortExpression="TENDVT" UniqueName="TENDVT" >
                                <ItemTemplate>
                                    <asp:Label ID="lbTENDVT"  runat="server" readonly="true" Enabled ="false"
                                        Text='<%# Eval("TENDVT") %>' >&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>
                                    
                                        <asp:TextBox ID="tbTENDVT"  runat="server" Text='<%# Bind("TENDVT") %>'
                                          Enabled="false"  ></asp:TextBox>
                                   
                                </EditItemTemplate>
                                <HeaderStyle Width="60px" />
                            </telerik:GridTemplateColumn>

                             <telerik:GridTemplateColumn  ItemStyle-HorizontalAlign ="Right" HeaderText="Số lượng" HeaderStyle-Width="70px" SortExpression="SLKeDon" UniqueName="SLKeDon"
                        DataField="SLKeDon">
                        <ItemTemplate>
                            <asp:Label  readonly = "true"  width ="70px" runat="server" ID="lbSoLuong"  Text='<%# Eval("SLKeDon", "{0:#,###0}") %>'  >
                            </asp:Label>
                          
                        </ItemTemplate>
                        <EditItemTemplate><telerik:RadNumericTextBox Width="70px" NumberFormat-DecimalDigits="0" 
                             runat="server" ID="tbSoLuong" Text='<%# Bind("SLKeDon", "{0:#,###0}") %>' >
                                </telerik:RadNumericTextBox>
                        
                                
                           
                        </EditItemTemplate>
                                 <HeaderStyle Width="70px" />
                                 <ItemStyle HorizontalAlign="Right" />
                    </telerik:GridTemplateColumn>
                    
                   <telerik:GridBoundColumn DataField="lieudung" HeaderText="Liều dùng"
                                    UniqueName="lieudung" ItemStyle-Width="170px"
                                    HeaderStyle-Width="170px">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn DataField="CachDung" HeaderText="Cách dùng"
                                    UniqueName="CachDung" ItemStyle-Width="170px"
                                    HeaderStyle-Width="170px">
                                </telerik:GridBoundColumn>
                            <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    AllowFiltering="false"
                                    HeaderStyle-Width="50px"
                                    SortExpression="Huy" UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>
                               </Columns>
                
            </MasterTableView>
        </telerik:RadGrid>
                   </fieldset>
                </div>
            </telerik:RadPageView>
            <% } %>     
     
        </telerik:RadMultiPage>
    </div>
      <%if (txtindextab.Value == "1") %>
    <% { %>
      <asp:ObjectDataSource ID="cdsKhoaKB" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMKhoaListcb" EnableViewState="true"></asp:ObjectDataSource>
  <%} %> 
     <%if (txtindextab.Value == "2") %>
    <% { %>
   
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="60" ID="odsThuoc" runat="server" SelectMethod="FindDMThuocKhoaMaTY"
        TypeName="HTC.Business.CategoryList.DMThuocKhoaList" EnableViewState="true" OnSelecting="odsThuoc_VT_HC_M_Selecting">
        <SelectParameters>
            <asp:Parameter Name="maKhoa" Type="String" />
            <asp:Parameter Name="maDT" Type="String" />
            <asp:Parameter Name="Ma" Type="String" DefaultValue="" />
            <asp:Parameter Name="loai" Type="Byte" DefaultValue="3" />
        </SelectParameters>
    </asp:ObjectDataSource>
 
   
        <asp:ObjectDataSource ID="odsNhapHoTro" runat="server" SelectMethod="GetAllKhamBenh_GETsMABNInfoTT" OnSelecting="odsNhapHoTro_Selecting"
        TypeName="HTC.Business.PhongKham.KhamBenh_GETsMABNListInfo" EnableViewState="true">
        <SelectParameters>

            <asp:Parameter Name="MaBN" Type="String" DefaultValue="" />

            <asp:Parameter Name="loai" Type="byte" DefaultValue="" />

            <asp:Parameter Name="dk" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
   <%} %>
    <%if(txtindextab.Value =="5"||txtindextab .Value =="1")  %>
    <%{ %>
<asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="600" ID="odsDichVu" runat="server" SelectMethod="FindDMDichVu_Gia_DTByDK" OnSelecting="odsDichVu_Selecting"
        TypeName="HTC.Business.CategoryList.DMDichVu_Gia_DTList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="DK" Type="String" DefaultValue="" />
            <asp:Parameter Name="MaDT" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
      <% } %>
     <%if (txtindextab.Value == "2"||txtindextab .Value =="3") %>
    <% { %>
     <asp:ObjectDataSource  ID="ObjectDanhMucBT" runat="server" SelectMethod="GetList" OnSelecting="ObjectDanhMucBT_Selecting"
        TypeName="HTC.Business.CategoryList.DMBaiThuocListcb" EnableViewState="true">
          <SelectParameters>
            <asp:Parameter Name="_loai" Type="byte" DefaultValue="0" />
            <asp:Parameter Name="mabs" Type="String" DefaultValue="" />

        </SelectParameters>
    </asp:ObjectDataSource> 
      <% } %>
      <%if (txtindextab.Value == "2") %>
    <% { %>
     <asp:ObjectDataSource  ID="odsLieuDung" runat="server" SelectMethod="GetList" 
        TypeName="HTC.Business.CategoryList.DMLieuDungListcb" EnableViewState="true">
          <SelectParameters>
            <asp:Parameter Name="loai" Type="byte" DefaultValue="1" />
        </SelectParameters>
    </asp:ObjectDataSource> 
    <asp:ObjectDataSource  ID="odsCachDung" runat="server" SelectMethod="GetList" 
        TypeName="HTC.Business.CategoryList.DMCachDungListcb" EnableViewState="true">
          <SelectParameters>
            <asp:Parameter Name="loai" Type="byte" DefaultValue="1" />
        </SelectParameters>
    </asp:ObjectDataSource> 
      <% } %>
    <%if (txtindextab.Value == "3") %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="60" ID="odsThuocDY" runat="server" SelectMethod="FindDMThuocKhoaMaDY"
        TypeName="HTC.Business.CategoryList.DMThuocKhoaList" EnableViewState="true" OnSelecting="odsThuoc_VT_HC_M_Selecting">
        <SelectParameters>
            <asp:Parameter Name="maKhoa" Type="String" />
            <asp:Parameter Name="maDT" Type="String" />
            <asp:Parameter Name="Ma" Type="String" DefaultValue="" />
            <asp:Parameter Name="loai" Type="Byte" DefaultValue="1" />
        </SelectParameters>
    </asp:ObjectDataSource>
     <asp:ObjectDataSource ID="odsNhapHoTroDY" runat="server" SelectMethod="GetAllKhamBenh_ThuocSD_DY" OnSelecting="odsNhapHoTroDY_Selecting"
        TypeName="HTC.Business.PhongKham.KhamBenh_ThuocSD_DYList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="masokham" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
     <% } %>
    <%if (txtindextab.Value == "0") %>
    <% { %>
    <asp:ObjectDataSource ID="odsDMNhomMau" runat="server" SelectMethod="GetList"
        TypeName="HTC.Business.CategoryList.DMNhomMauListcb" EnableViewState="true">
      
    </asp:ObjectDataSource>
     <asp:ObjectDataSource EnableCaching="true" CacheExpirationPolicy="Absolute" CacheDuration="600" ID="ObjectDanhMucBenh" runat="server" SelectMethod="FindDMBenhTatByMa"
        TypeName="HTC.Business.CategoryList.DMBenhTatList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="MaDV" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <asp:ObjectDataSource ID="odsHuongDT" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMHuongDTListcb" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="Loai" Type="Byte" DefaultValue="2" />
        </SelectParameters>
    </asp:ObjectDataSource>
     <asp:ObjectDataSource ID="odskhoaBN" runat="server" SelectMethod="GetList" 
         TypeName="HTC.Business.CategoryList.DMKhoaListcb" 
         EnableViewState="true"></asp:ObjectDataSource>

      <asp:ObjectDataSource  ID="odskhoaNV" runat="server" SelectMethod="GetListNoiTruMa" 
          TypeName="HTC.Business.CategoryList.DMKhoaListcb" 
          EnableViewState="true" >
          <SelectParameters>
            <asp:Parameter Name="account" Type="String" DefaultValue="admin" />
        </SelectParameters>

      </asp:ObjectDataSource>
    

    <asp:ObjectDataSource  ID="ObjectDanhMucNV" runat="server" SelectMethod="FindDMNhanVienByMa"
        TypeName="HTC.Business.CategoryList.DMNhanVienList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="ma" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <asp:ObjectDataSource  ID="odsNoiDK" runat="server" SelectMethod="FindDMBenhVienByMa" TypeName="HTC.Business.CategoryList.DMBenhVienList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="MaBV" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
      <% } %>
      <% if (txtindextab.Value =="6") %>
    <%{ %>
     <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="180" ID="ObjectDanhMuc" runat="server"  EnableViewState ="true"
    SelectMethod="FindDMThuoc_KeMa" 
    TypeName="HTC.Business.CategoryList.DMThuoc_KeList">
        <SelectParameters>
            <asp:Parameter Name="Ma" Type="String" DefaultValue=""  />
        </SelectParameters>
</asp:ObjectDataSource>
    <%} %>
</asp:Content>


