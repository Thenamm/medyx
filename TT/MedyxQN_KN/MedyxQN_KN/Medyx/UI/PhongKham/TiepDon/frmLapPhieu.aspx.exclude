<%@ Page Title="" Language="C#" MasterPageFile="~/AdminCode.master" AutoEventWireup="true" CodeFile="frmLapPhieu.aspx.cs" Inherits="UI_PhongKham_TiepDon_frmLapPhieu" EnableEventValidation="false" %>

<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
    <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
      <%--  <script type="text/javascript" src='<%: ResolveUrl("~/js/jquery.min.js") %>'></script>
        <script type="text/javascript" src='<%: ResolveUrl("~/js/maskinput/jquery.maskedinput-1.3.1.min_.js") %>'></script>--%>
      
        <script type="text/javascript">
           
            <%if (txtview.Value !="PS") %>
             <%{ %>
            $(function () {
                $("#<%= dtNgayDK.ClientID %>, #<%= dtNgaySinh.ClientID %>, #<%= dtCSTuNgay.ClientID %>, #<%= dtCSDenNgay.ClientID %>").datepicker({
                    dateFormat: 'dd/mm/yy',
                    altFormat: "dd/mm/yy",
                    minDate: '01/01/1900',
                    maxDate: '31/12/2100'
                })
            });
            $(function () {
                $("#<%= dtBHYTTN.ClientID %>  #<%= dtBHYTDN.ClientID %>, #<%= dtNgayGT.ClientID %>, #<%= dtNgayQT.ClientID %>").datepicker({
                    dateFormat: 'dd/mm/yy',
                    altFormat: "dd/mm/yy",
                    minDate: '01/01/1900',
                    maxDate: '31/12/2100'
                }).keyup(function (e) {
                    if (e.keyCode == 8 || e.keyCode == 46) {
                        $(this).mask('');
                        $(this).val('');

                    }
                });
            });
            <%} %>

            $(document).ready(function () {
                $("#<%= dtNgayDK.ClientID %>").mask("99/99/9999");
                $("#<%= dtCSTuNgay.ClientID %>").mask("99/99/9999");
                $("#<%= dtCSDenNgay.ClientID %>").mask("99/99/9999");
                $("#<%= dtBHYTTN.ClientID %>").mask("99/99/9999");
                $("#<%= dtNgaySinh.ClientID %>").mask("99/99/9999");
                $("#<%= dtBHYTDN.ClientID %>").mask("99/99/9999");
                $("#<%= dtNgayGT.ClientID %>").mask("99/99/9999");
                $("#<%= dtNgayQT.ClientID %>").mask("99/99/9999");
                $("#<%= dtgio.ClientID %>").mask("99:99");
            });



            function RowDblClickForGrdDichVu(sender, eventArgs) {
                var selecteditem = $find("<%= grdDanhSachDY.MasterTableView.ClientID %>").get_selectedItems();
                editedRowDS = eventArgs.get_itemIndexHierarchical();
                var grid = $find("<%= grdDanhSachDY.ClientID %>");
            }

            document.onkeydown = keyHandler;
            function keyHandler(e) {
                var pressedKey;
                if (document.all) {
                    e = window.event;
                    pressedKey = e.keyCode;
                }

                if (e.which) {
                    pressedKey = e.which;
                }
                
                if (pressedKey == 118) { //f7 - thoat
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdHuy");
                    templateButton.click();
                }

                else if (pressedKey == 113) { //f2 - GHI
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdSave");
                    templateButton.click();
                }

                else if (pressedKey == 115) { //f4 - thêm thuôc dy
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddThuocDY");
                    templateButton.click();
                }
                else if (pressedKey == 119) { //f8 - thêm xn
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdAddXN");
                    templateButton.click();
                }

                else if (pressedKey == 121) { //f10-thoat
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdExit");
                    templateButton.click();
                }
                else if (pressedKey == 120) { //f9-In
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                    var templateButton = toolbar1.findItemByValue("cmdPrint");
                    templateButton.click();
                }


                else if (pressedKey == 123) { //f12-Thêm       
                    var toolbar1 = $find("<%= baraction.ClientID %>");
                        var templateButton = toolbar1.findItemByValue("cmdAdd");
                        templateButton.click();
                    }
}
function DoubleRowDSBNClick(sender, eventArgs) {
    var selecteditem = $find("<%= grdDanhSach.MasterTableView.ClientID %>").get_selectedItems();
                editedRowDS = eventArgs.get_itemIndexHierarchical();
                var grid = $find("<%= grdDanhSach.ClientID %>");
                 grid.get_masterTableView().fireCommand("Edit", editedRowDS); //add master editing activities in the grid}
             }

             function comboSelectedIndexChangedCD(sender, eventArgs) {
                 var item = eventArgs.get_item();
                
                 // get the text and value elements
                 var val = item.get_value();
                 // benh
                 var tenbenh = item.get_attributes().getAttribute("TenBenh");
                 var obbenh = document.getElementById("<%= txtChanDoan.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));

    obbenh.value = tenbenh; //obbenh.focus();// sender.set_select = 0; var input = combo.get_inputDomElement();

}
function comboSelectedIndexChangedKhoa(sender, eventArgs) {
    var item = eventArgs.get_item();

    // get the text and value elements
    var val = item.get_value();
    // benh
    var txtmakhoa = document.getElementById("<%= txtMaKhoa .ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
    if (txtmakhoa != null)
        txtmakhoa.value = val; //obbenh.focus();// sender.set_select = 0; var input = combo.get_inputDomElement();

}
function comboSelectedIndexChangedBS(sender, eventArgs) {
    var item = eventArgs.get_item();

    // get the text and value elements
    var val = item.get_value();
    // benh
    var txtmanv = document.getElementById("<%= txtMaNV .ClientID %>"); //item.set_text(item.get_text().substr(0, 7));

                txtmanv.value = val; //obbenh.focus();// sender.set_select = 0; var input = combo.get_inputDomElement();

            }
            <% if (txtindextab.Value=="2")   %>
           <%  { %>
            var ComboText = '';
            var ComboInput;
            function OnClientItemsRequesting(sender, eventArgs) {
                var combo = sender;
                ComboText = combo.get_text();
                ComboInput = combo.get_element().getElementsByTagName('input')[0];
                ComboInput.focus = function () { this.value = ComboText };

                if (ComboText != '') {
                    window.setTimeout(TrapBlankCombo, 30);
                };
            }

            function TrapBlankCombo() {
                if (ComboInput) {
                    if (ComboInput.value == '') {
                        ComboInput.value = ComboText;
                    }
                    else {
                        window.setTimeout(TrapBlankCombo, 30);
                    };
                };
            }
            function OnClientDropDownClosing(sender, eventArgs) {
                var grid = (sender.get_parent().get_parent())
                var name = grid.get_id();
                var indextab;// = tab.get_selectedIndex();
                //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                //txthidedv.value = "";
                var Madv = document.getElementById("<%= txtmadv.ClientID %>");


                if (Madv.value != "")
                    grid.get_masterTableView().fireCommand("PerformInsert", ""); //"AddXN"Cancel any editing activities in the grid

            }
            function OnClientFocus(sender, args) {
                if (!sender.get_dropDownVisible())
                    //  //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                    //   if (!sender.get_dropDownVisible())
                    sender.showDropDown();//show dropdown after entering some characters
            }
            function OnClientDropDownOpening(sender, eventArgs) {
                values = "";
                //var txthidedv = document.getElementById("<%= txthidedv.ClientID %>");
                //txthidedv.value = "1";

            }
            var values;
            
            function OnClientItemChecked(sender, eventArgs) {
                var item = eventArgs.get_item();
                var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");
                var cbokhoa = document.getElementById("<%= cboKhoaKB.ClientID %>");

                if (item.get_checked() == true) {

                    if (item.get_attributes().getAttribute("NhapSL") == "True" && (item.get_attributes().getAttribute("DongiaTT") != "" && item.get_attributes().getAttribute("DongiaTT") != "0") && cbokhoa.SelectedValue == "") {
                        var grid = (sender.get_parent().get_parent());
                        txtmadv.value = "";

                        values = "";
                        grid.get_masterTableView().fireCommand("PerformInsert", ""); //"AddXN"Cancel any editing activities in the grid
                    }
                    else {
                        values += item.get_value() + ",";
                    }

                }
                else
                    values = values.replace(item.get_value() + ",", "");
                txtmadv.value = values;

            }
              <% } %>
            function OnClientSelectedIndexChanged(sender, eventArgs) {


                // get the text and value elements
                //  var text = item.get_text();
                //  var val = item.get_value();
                var indextab;// = tab.get_selectedIndex();
                var grid = (sender.get_parent().get_parent());
                var name = grid.get_id();


                var item = eventArgs.get_item();

                if (name.substr(name.length - 8) == "grdThuoc")
                    indextab = 3;
                else if (name.substr(name.length - 10) == "grdThuocDY")
                    indextab = 4;
                else if (name.substr(name.length - 7) == "grdXNTT")
                    indextab = 2;

                var grid;

                if (indextab > 2) {

                    var tbTENDVT = $telerik.findElement(grid.get_element(), "tbTENDVT");
                    if (tbTENDVT != null) {
                        // dvt
                        var TENDVT = item.get_attributes().getAttribute("tendvt");

                        tbTENDVT.value = TENDVT;
                    }
                }
                if (indextab > 1) {
                    // dongia
                    var UnitPrice = item.get_attributes().getAttribute("DongiaTT");
                    if (UnitPrice != "") {

                        var tbUnitPrice = $telerik.findElement(grid.get_element(), "tbUnitPriceTT");  //$telerik.findControl(grid.get_element(), "tbUnitPriceTT");
                        tbUnitPrice.value = UnitPrice;
                    }

                    var UnitPriceBH = item.get_attributes().getAttribute("DongiaBH");
                    if (UnitPriceBH != "") {

                        var tbUnitPriceBH = $telerik.findElement(grid.get_element(), "tbUnitPriceBH");  //$telerik.findControl(grid.get_element(), "tbUnitPriceBH");
                        tbUnitPriceBH.value = UnitPriceBH;
                    }
                    var BHTinhTien = item.get_attributes().getAttribute("BHTinhTien");

                    var ckBH = $telerik.findElement(grid.get_element(), "chkBH");
                    if (BHTinhTien == "True")
                        ckBH.Checked = true;
                    else
                        ckBH.Checked = false;
                }
                if (name.substr(name.length - 7) == "grdXNTT") {

                    var NhapSL = item.get_attributes().getAttribute("NhapSL");
                    var cboDichVu = $telerik.findControl(grid.get_element(), "cboDichVu");


                    if (UnitPrice != "" && NhapSL == "True") {
                        txtmadv.value = item.get_value() + ",";

                        var node = Telerik.Web.UI.Grid.GetFirstParentByTagName(sender.get_element(), "tr");
                        var editedRowDS = node.Index;
                        grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid

                    }
                    else if (UnitPrice == "") {
                        var node = Telerik.Web.UI.Grid.GetFirstParentByTagName(sender.get_element(), "tr");
                        var editedRowDS = node.Index;
                        var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");
                                    txtmadv.value = item.get_value() + ",";
                                    grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid
                                }
                                else if (NhapSL == "False") {
                                    var txtmadv = document.getElementById("<%= txtmadv.ClientID %>");

                                        txtmadv.value = item.get_value() + ",";

                                        grid.get_masterTableView().fireCommand("PerformInsert", editedRowDS); //Cancel any editing activities in the grid

                                    }

                        }
                        else {
                            var tbSoLuong = $telerik.findControl(grid.get_element(), "tbSoLuong");

                            tbSoLuong.set_selected;

                        }

                    }

                    function subtinhtuoi1(sender, eventArgs) {
                        var dtns = document.getElementById("<%= dtNgaySinh.ClientID %>");
            var txttuoi = document.getElementById("<%= txttuoi.ClientID %>");

            var d = new Date();
            if (txttuoi.value != "")
                dtns.value = "01/01/" + (d.getFullYear() - txttuoi.value).toString();


        }
        function subtinhtuoi2(sender, eventArgs) {
            var dtns = document.getElementById("<%= dtNgaySinh.ClientID %>");
                var txttuoi = document.getElementById("<%= txttuoi.ClientID %>");

                var d = new Date();
                if (dtns.value.length > 9)
                    txttuoi.value = d.getFullYear() - parseInt(dtns.value.substr(dtns.value.length - 4), 10);


            }
            function subenableNgayThe(sender, eventArgs) {
                var txtsothe = document.getElementById("<%= txtSoThe.ClientID %>");

            if (txtsothe.value != "") {

                var dttn = document.getElementById("<%= dtBHYTTN.ClientID %>");
                    if (dttn.disabled = true) {
                        var dtdn = document.getElementById("<%= dtBHYTDN.ClientID %>");

                        dttn.disabled = false;
                        dtdn.disabled = false;
                    }

                }
            }
            function comboSelectedIndexChangedNBT(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh
                var tenbenh = item.get_attributes().getAttribute("TenBenh");
                var obbenh = document.getElementById("<%= txtBenhNGT .ClientID %>"); //item.set_text(item.get_text().substr(0, 7)); 
    obbenh.value = tenbenh;//sender.set_select = 0; var input = combo.get_inputDomElement();
}

function subtiendon(sender, eventArgs) {
    var tt = document.getElementById("<%= txtTT.ClientID %>");
                var txttong = document.getElementById("<%= txtTongDon.ClientID %>");
                var txtsl = document.getElementById("<%= txtSLThang.ClientID %>");
                txttong.value = parseInt(tt.value) * parseInt(txtsl.value);

            }
            function comboSelectedIndexChangedKBD(sender, eventArgs) {
                var item = eventArgs.get_item();

                // get the text and value elements
                var val = item.get_value();
                // benh vien
                // var tenbv = item.get_attributes().getAttribute("TenBV");
                var obbenhvien = document.getElementById("<%= txtDKBD.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                   //obbenhvien.value = tenbv;
                   var tenbv = item.get_attributes().getAttribute("MaBHXH");
                   if (tenbv!="undefined" &&tenbv != null && tenbv !="" )
                        obbenhvien.value = tenbv;
                   else
                       obbenhvien.value = "";

               }
               function comboSelectedIndexChangedGT(sender, eventArgs) {
                   var item = eventArgs.get_item();

                   // get the text and value elements
                   var val = item.get_value();
                   // benh vien
                   // var tenbv = item.get_attributes().getAttribute("TenBV");
                   var obbenhvien = document.getElementById("<%= txtDKGT.ClientID %>"); //item.set_text(item.get_text().substr(0, 7));
                //item.set_text(item.get_text().substr(0, 7));

                   var tenbv = item.get_attributes().getAttribute("MaBHXH");
                   if (tenbv != "undefined" && tenbv != null && tenbv != "")
                       obbenhvien.value = tenbv;
                   else
                       obbenhvien.value = "";
            }
            function SetGrid(sender, eventArgs) {
                var grid = $find("<%= grdXNTT.ClientID %>");

                var cboDichVu = $telerik.findElement(grid.get_element(), "cboDichVu");
                cboDichVu.focus();
            }
            function onClientButtonClicking(sender, args) {
                var radToolBar = $find("<%=baraction.ClientID %>");
    var button = radToolBar.findItemByValue("cmdExit");
    if (sender == button) {
        var ok = confirm("Thực sự muốn thoát khỏi chức năng này?");
        if (ok)
            return true;
        else
            return args.set_cancel(true);
    }
  
    <%if (txtview.Value =="PS") %>
             <%{ %>
    var button1 = radToolBar.findItemByValue("cmdPrint");
    if (sender == button1) {
        var ok = confirm("Thực sự muốn ghi bệnh nhân này?");
        if (ok)
            return true;
        else
            return args.set_cancel(true);
    }
                <%}%>
 
    var button2 = radToolBar.findItemByValue("cmdHoanHD");
    if (sender == button2) {
        var ok = confirm("Thực sự muốn hoàn hóa đơn này?");
        if (ok)
            return true;
        else
            return args.set_cancel(true);
    }
    var button2 = radToolBar.findItemByValue("cmdHuyHD");
    if (sender == button3) {
        var ok = confirm("Thực sự muốn hủy hóa đơn này?");
        if (ok)
            return true;
        else
            return args.set_cancel(true);
    }
}
function RowSelected(sender, eventArgs) {
    //           var selecteditem = $find("<%= grdDTT.MasterTableView.ClientID %>").get_selectedItems();
    editedRowDS = eventArgs.get_itemIndexHierarchical();
    var grid = $find("<%= grdDTT.ClientID %>");

    grid.get_masterTableView().fireCommand("ViewDetail", editedRowDS); //add master editing activities in the grid}


}
function processClick(sender, args) {
    var commandName = args.get_item().get_commandName();

    if (commandName == 'cmdExit') {
        // window.location.close;
        window.Location.href = "/Default.aspx";

        return false;
    }
    
                <%if (txtview.Value =="PS") %>
            <%{ %>
                var txtlp = document.getElementById("<%= txtloaiphieu.ClientID %>");
                var commandName = args.get_item().get_commandName();
                if (txtlp.value == "2" || txtlp.value == "9") {
                    var radToolBar = $find("<%=baraction.ClientID %>");
                    var button1 = radToolBar.findItemByValue("cmdPrint");
                    if (commandName == 'cmdPrint') {
                        var ok = confirm("Thực sự muốn ghi bệnh nhân này?");
                        if (ok)
                            return true;
                        else
                            return args.set_cancel(true);
                    }
                }
            <%}%>
            }
            function combokey(sender, args) {
                var e = args.get_domEvent();

                var combo = sender;
                txt.Text = combo.get_attributes("Text");
                alert(args._domEvent.target.value);
            }

        </script>
        <script type="text/javascript">
                       
         function OnSelectedIndexChangedDMTinh(sender, eventArgs) {
            var item = eventArgs.get_item();
            var Value = item.get_value();
           
            $.ajax({
                type: "POST",
                url: "frmLapPhieu.aspx/cboDMTinhChange",
                contentType: 'application/json; charset=utf-8',
                dataType: "Json",
                data: '{Value: "' + Value + '" }',
                success: function (data) {
                    var combo = $find("<%= cbohuyen.ClientID %>");
                    fillCombo(combo,data);
                    sender.highlightAllMatches(sender.get_text());
                },
                error: function (response) {
                    alert(response);
                }
            });
         }
             </script>
  <%--  <script type="text/javascript">
        function OnLoadDMHuyen(sender) {
            alert("a");
            var combo = $find("<%= cbotinh.ClientID %>");
            var Value = combo.get_value();  
            $.ajax({
                type: "POST",
                url: "frmLapPhieu.aspx/cboDMTinhChange",
                contentType: 'application/json; charset=utf-8',
                dataType: "Json",
                data: '{Value: "' + Value + '" }',
                success: function (data) {
                    var combo = $find("<%= cbohuyen.ClientID %>");
                    fillCombo(combo, data);
                    sender.highlightAllMatches(sender.get_text());
                },
                error: function (response) {
                    alert(response);
                }
            });
            }
        function OnSelectedIndexChangedDMTinh(sender, eventArgs) {
            var item = eventArgs.get_item();
            var Value = item.get_value();
            alert("a1");
            $.ajax({
                type: "POST",
                url: "frmLapPhieu.aspx/cboDMTinhChange",
                contentType: 'application/json; charset=utf-8',
                dataType: "Json",
                data: '{Value: "' + Value + '" }',
                success: function (data) {
                    var combo = $find("<%= cbohuyen.ClientID %>");
                    fillCombo(combo,data);
                    sender.highlightAllMatches(sender.get_text());
                },
                error: function (response) {
                    alert(response);
                }
            });
        }
        function OnSelectedIndexChangedDMHuyen(sender, eventArgs) {
            var item = eventArgs.get_item();
            var Value = item.get_value();
               $.ajax({
                type: "POST",
                url: "frmLapPhieu.aspx/cboDMHuyenChange",
                contentType: 'application/json; charset=utf-8',
                dataType: "Json",
                data: '{Value: "' + Value + '" }',
                success: function (data) {
                    var combo = $find("<%= cboPXa.ClientID %>");
                    fillCombo(combo, data);
                    sender.highlightAllMatches(sender.get_text());
                },
                error: function (response) {
                    alert(response);
                }
               });
            document.getElementById('<%=cmdThongTin.ClientID%>').click()
            }
        function fillCombo( combo,result) {
            
                combo.clearItems();

                var items = result.d || result;

                // This just lets your users know that nothing was returned with their search 
                if (items.length == 0) {
                    var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                    comboItem.set_text("");
                    comboItem.set_value("null");
                    combo.get_items().add(comboItem);
                    combo.set_text("");
                }
                for (var i = 0; i < items.length; i++) {
                    var item = items[i];

                    var comboItem = new Telerik.Web.UI.RadComboBoxItem();
                    comboItem.set_text(item.Value);
                    comboItem.set_value(item.Key);
                    combo.get_items().add(comboItem);
                }
            }
        
            </script>--%>
        <style type="text/css">


             select[disabled].DropDownListCss  {
            color: blue!important;
            background-color: white!important;
            font-weight: bold!important;
            backface-visibility: hidden!important;
            font-size: 14px!important;
        }
        	.RadForm.rfdTextbox input.rfdDecorated[type="text"]
        	{
				padding:0px !important;
        	}
         
            ul.rcbList li {
                width: 100% !important;
            }

                ul.rcbList li label {
                    width: 30px!important;
                    float: left;
                }

            .rtsLI {
                width: 150px !important;
            }
            .RadListBox span.rlbText 
{ 
                padding:0; line-height:30px; 
                font-size: xx-large; 
                font-family: Verdana, Arial, Helvetica,
                sans-serif; 
                color: blue; 
                font-weight: bold;
            }
            .RadForm.rfdTextbox input.rfdDecorated[type="text"], .RadForm.rfdTextbox input.rfdDecorated[type="password"], .RadForm.rfdTextbox input.rfdDecorated[type="search"], .RadForm.rfdTextbox input.rfdDecorated[type="url"], .RadForm.rfdTextbox input.rfdDecorated[type="tel"], .RadForm.rfdTextbox input.rfdDecorated[type="email"] {
                width: 100% !important;
            }

				table td
                {
                    
                }

            /*
                div.RadGrid_Default .RadForm.rfdTextbox
                {
                    width:100% !important;
                }
                   */

            .ButtonCSS {
                margin-left: 10px;
            }
        </style>

    </telerik:RadCodeBlock>
    
    <telerik:RadToolBar ID="baraction" runat="server"
        EnableRoundedCorners="true"
        EnableShadows="true" OnButtonClick="baraction_ButtonClick" Width="100%" OnClientButtonClicked="processClick">
        <Items>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="F12-Thêm" Group="Align" CheckOnClick="false" Value="cmdAddXN" CommandName="cmdAddXN">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton 
                Text="Duyệt BH" CheckOnClick="false" Value="cmdDuyetBH" CommandName="cmdDuyetBH" Visible="false">
            </telerik:RadToolBarButton>
             <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif"
                Text="Ký quỹ" Group="Align" CheckOnClick="false" Value="cmdAddKQ" CommandName="cmdAddKQ">
            </telerik:RadToolBarButton>
           
           
            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif" Visible="false"
                Text="F11-Thêm thuốc" Group="Align" CheckOnClick="false" Value="cmdAddThuoc" CommandName="cmdAddThuoc">
            </telerik:RadToolBarButton>

            <telerik:RadToolBarButton ImageUrl="~/img/icon/add.gif" Visible="false"
                Text="F4-Đơn ĐY" Group="Align" CheckOnClick="false" Value="cmdAddThuocDY" CommandName="cmdAddThuocDY">
            </telerik:RadToolBarButton>

            <telerik:RadToolBarButton ImageUrl="~/img/icon/edit.png"
                Text="F2-Ghi" CheckOnClick="false" Value="cmdSave" CommandName="cmdSave">
            </telerik:RadToolBarButton>

            <telerik:RadToolBarButton ImageUrl="~/img/icon/print.gif"
                Text="F9-In" CheckOnClick="false" Value="cmdPrint" CommandName="cmdPrint">
            </telerik:RadToolBarButton>
          
            <telerik:RadToolBarButton ImageUrl="~/img/icon/exitprint.png" Visible="false"
                Text="Đóng báo cáo" Value="exitcmdPrint">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/cancel.jpg"
                Text="F7-Thêm mới BN" Group="Align" CheckOnClick="false" Value="cmdHuy" CommandName="cmdHuy">
            </telerik:RadToolBarButton>
           
           

            <telerik:RadToolBarButton ImageUrl="~/img/icon/cancel.jpg"
                Text="F10-Thoát" Group="Align" CheckOnClick="false" Value="cmdExit" CommandName="cmdExit">
            </telerik:RadToolBarButton>

           
            <telerik:RadToolBarButton ImageUrl="~/img/icon/delete.gif" CssClass="ButtonCSS"
                Text="DS Chưa TT" Group="Align" CheckOnClick="false" Value="cmdChuaTT" CommandName="cmdChuaTT">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/delete.gif"
                Text="DS Đã TT" Group="Align" CheckOnClick="false" Value="cmdDaTT" CommandName="cmdDaTT">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/delete.gif" 
                Text="Lấy lại BN" Group="Align" CheckOnClick="false" Value="cmdLayBN" CommandName="cmdLayBN">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/delete.gif"
                Text="Hoàn HĐ" Group="Align" CheckOnClick="false" Value="cmdHoanHD" CommandName="cmdHoanHD">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/delete.gif"
                Text="Hủy HĐ" Group="Align" CheckOnClick="false" Value="cmdHuyHD" CommandName="cmdHuyHD">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/print.gif"
                Text="In lại" CheckOnClick="false" Value="cmdPrintLai" CommandName="cmdPrintLai" Visible="false">
            </telerik:RadToolBarButton>
            <telerik:RadToolBarButton ImageUrl="~/img/icon/edit.png"
                Text="Sửa BN" Group="Align" CheckOnClick="false" Value="cmdSua" CommandName="cmdSua">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/edit.png"
                Text="QR code" Group="Align" CheckOnClick="false" Value="cmdQRCode" CommandName="cmdQRCode">
            </telerik:RadToolBarButton>
              <telerik:RadToolBarButton ImageUrl="~/img/icon/filter.gif" CommandName ="cmdFilter" Visible="false"
                    Text="F7-Tìm kiếm" CheckOnClick="false" Value="cmdFilter">
                </telerik:RadToolBarButton>

             
        </Items>

    </telerik:RadToolBar>
    <div style="display: none;">
    <asp:HiddenField ID ="txtindextab" runat ="server" />
    <asp:HiddenField ID ="txtloaiphieu" runat ="server" />
    <asp:HiddenField id="txthidedv" runat ="server" Value="" />
     <asp:HiddenField ID="txtmadv" runat="server" />
    <asp:HiddenField runat ="server" ID="txtmabenh" />
    <asp:HiddenField runat ="server" ID="txtmabenhkem" />
    <asp:HiddenField id="txtview" Value =""  runat ="server"/> 
    <%-- <asp:Button runat ="server" ID="cmdThongTin"  OnClick ="cmdThongTin_Click" />--%>
        </div>
     <div class="contentWrapper">
       
    <div class="form-container">
        <fieldset align="center" style="width:98%">
            <legend>
                <label>
                    Thông tin bệnh nhân 
                </label>
            </legend>

            <div align="center" class="form-container">
                <table width="100%" cellpadding="0" cellspacing="0">
                    <tr>
                        <td width="50px">
                             <asp:Label ID="Label51" runat="server" Text="Ngày ĐK" ></asp:Label>
                        </td>
                        <td width="75px">
                            <asp:TextBox runat="server" TabIndex="1" ID="dtNgayDK" AutoPostBack="false"></asp:TextBox>

                        </td>
                           <td width="35px">
                            <asp:TextBox runat="server" TabIndex="1" ID="dtgio" AutoPostBack="false"></asp:TextBox>

                        </td>
                         <td  width="35px" >
                            <asp:Label ID="Label21" width="50px" runat="server" Text="PLBN" ></asp:Label>
                        </td>
                        <td Width ="105px">
                            <asp:DropDownList   IsCaseSensitive ="false"        
                                       TabIndex="1" runat="server" ID="cboLoaiBN"  CssClass="DropDownListCss"  
                                style="width:100% !important" DropDownWidth="200px"
								DataSourceID="odsLoaiBN" Visible="true"  OnSelectedIndexChanged="cboLoaiBN_SelectedIndexChanged1"
                                AutoPostBack="true" DataTextField="Value" DataValueField="Key" 
                                HighlightTemplatedItems="true">
                            </asp:DropDownList>
                        </td>
                         <td width="67px" style="text-align:right">
                            <asp:Label ID="Label9" runat="server" width="67px" Text="Mã BN(*)" ></asp:Label>
                        </td>
                        <td  width="90px" >
                            <asp:TextBox TabIndex="1" runat="server" ID="txtmabn"
                                width="90px" MaxLength="10"
                                 AutoPostBack="true" OnTextChanged="txtmabn_TextChanged"></asp:TextBox>

                        </td>





                        <td width="50px" >
                            <asp:Label ID="Label43" runat="server" Text="Số thẻ "></asp:Label>
                        </td>
                        <td colspan="2">
                            <telerik:RadMaskedTextBox  TabIndex="1" runat="server" ID="txtSoThe" Width ="140px"
                                 MaxLength="16" Enabled="true" onkeypress="subenableNgayThe(this)"
                                AutoPostBack="true" OnTextChanged="txtSoThe_TextChanged"
                                mask="ll.#.##.aa.###.#####"
                                ></telerik:RadMaskedTextBox>
                             <asp:TextBox TabIndex="1"  runat="server" ID="txtMaBAQL"
                                  AutoPostBack="false" Visible ="false" Enabled ="true"  Display ="false"
                              ></asp:TextBox>   
                       
                            <asp:Label ID="Label35" runat="server" Text="CMT" Visible="false" ></asp:Label>
                        </td>
                        <td width="120px">
                           <asp:TextBox TabIndex="1" runat="server" ID="txtSoCMT"
                                width="120px" MaxLength="20" Visible="false"
                                 AutoPostBack="true" OnTextChanged="txtSoCMT_TextChanged"></asp:TextBox>
                            <asp:CheckBox ID="chkTraiTuyen" Visible ="false"  runat ="server" />
                        </td>
                       
                        <td style="text-align:right" width="50px">
                            <asp:Label ID="Label48" runat="server" Text="ĐT" ></asp:Label>
                        </td>

                        <td width="120px">
                            <asp:DropDownList  IsCaseSensitive ="false"    CssClass="DropDownListCss"            
                                  TabIndex="1" runat="server" ID="cboDoiTuong" DataSourceID="odsDoiTuong" 
                                DropDownWidth="250px"
                                AutoPostBack="true" DataTextField="value" DataValueField="Key" Enabled="false"
                                width="120px" OnSelectedIndexChanged="cboDoiTuong_SelectedIndexChanged"
                                HighlightTemplatedItems="true">
                            </asp:DropDownList>
                        </td>

                    </tr>
                    
                    <tr id="ttbh" runat="server">
                        <td >
                            <asp:Label ID="Label45" runat="server" Text="BHYT TN"></asp:Label>
                        </td>
                        <td colspan="2">
                            <asp:TextBox TabIndex="1" runat="server" ID="dtBHYTTN" Enabled="true"></asp:TextBox>
                        </td>
                        <td>
                            <asp:Label ID="Label47" runat="server" Text="ĐN"></asp:Label>
                        </td>

                        <td >
                            <asp:TextBox TabIndex="1" runat="server" ID="dtBHYTDN" Enabled="true"
							
							></asp:TextBox>

                        </td>
                        <td>
                            <asp:Label ID="Label49" runat="server" Text="Nơi ĐKBD"></asp:Label>
                        </td>
                       
                        <td >                           
                            <asp:TextBox runat="server" TabIndex="1" ID="txtDKBD" Enabled="true" AutoPostBack="true"
                                   OnTextChanged ="txtDKBD_TextChanged"
                                 CssClass="span-all"></asp:TextBox>                            
                        </td>
                         <td colspan="5">
                            <telerik:RadComboBox           
                                  IsCaseSensitive="false" TabIndex="1" ID="cboDKBD" runat="server"
                                 CaseSensitive="false"
                                AppendDataBoundItems="True" 
                                DataSourceID="odsNoiDK"
                                AutoPostBack="false"
                                DataTextField="TenBV"  DataValueField="MaBV"
                                Width="100%"
                                DropDownWidth ="270px"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                EnableAutomaticLoadOnDemand="true"
                                ItemsPerRequest="50"
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                                MarkFirstMatch="true"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                OnItemDataBound="cboBenhVien_ItemDataBound"
                                OnClientSelectedIndexChanged="comboSelectedIndexChangedKBD">
                                <HeaderTemplate>
                                    <table class="NHTC_table_layout" width ="100%">
                                        <tr width ="100%">
                                            <td width="70px">Mã BHXH</td>
                                            <td width="200px" >Tên BV</td>
                                        </tr>
                                    </table>
                                </HeaderTemplate>
                                <Items>
                                    <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                </Items>
                                <ItemTemplate>
                                    <table width ="100%">
                                        <tr>

                                            <td width="70px">
                                                <%# DataBinder.Eval(Container.DataItem, "MaBHXH")%>
                                            </td>
                                            <td width="200px">
                                                <%# DataBinder.Eval(Container.DataItem, "TenBV") %>
                                            </td>
                                        </tr>
                                    </table>
                                </ItemTemplate>
                            </telerik:RadComboBox>
                        </td>
                        <td style="text-align:right">
                            <asp:Label ID="Label6" runat="server" Text="Ngày QT"  ></asp:Label>
                        </td>
                        <td  >
                            <asp:TextBox TabIndex="1" runat="server" ID="dtNgayQT" AutoPostBack="false"></asp:TextBox>                            
                                                   
                       </td>
                    </tr> 
                                                 
                    <tr>
                        <td >
                            <asp:Label ID="Label2" runat="server" Text="Họ Tên(*)"></asp:Label>
                        </td>
                        <td colspan="4">
                            <asp:TextBox TabIndex="1" runat="server" ID="txthoten" Enabled="true" ></asp:TextBox>
                        </td>  
                            <td width ="75px">
                            <asp:Label ID="Label7" width ="75px" runat="server" Text="Ngày sinh(*)"></asp:Label>
                        </td>

                        <td >
                            <asp:TextBox TabIndex="1" runat="server" ID="dtNgaySinh" Enabled="true"  
                                onchange="subtinhtuoi2(this)"></asp:TextBox>

                        </td>
                        <td >
                            <asp:Label ID="Label8" runat="server" Text="Tuổi(*)"></asp:Label>
                        </td>
                        <td width ="50px" >
                            <asp:TextBox width ="50px" TabIndex="1" runat="server" ID="txttuoi" Enabled="true" 
                                onkeypress=" return onlyNumbers(event)"
                                 onchange="subtinhtuoi1(this)"></asp:TextBox>

                        </td>                      
                        <td colspan="2">Giới tính(*)
                            <asp:RadioButtonList TabIndex="1" ID="optGT" runat="server" RepeatDirection="Horizontal" RepeatLayout="Flow"
                                >
                                <asp:ListItem Value="1">Nam</asp:ListItem>
                                <asp:ListItem Value="0">Nữ</asp:ListItem>
                            </asp:RadioButtonList>
                        </td>

                    
                        <td  style="text-align:right" >
                            <asp:Label ID="Label22" runat="server" Text="C.Khoa(*)"></asp:Label>
                        </td>
                        <td width="120px">
                            <telerik:RadComboBox  IsCaseSensitive ="false"      CssClass="DropDownListCss"       
                                     TabIndex="1" runat="server" ID="cboChuyenKhoa"
                                 DataSourceID="odsChuyenKhoa"  width="120px"
                                AutoPostBack="false" DataTextField="Value" DataValueField="Key" Enabled="true"
                                HighlightTemplatedItems="true">
                            </telerik:RadComboBox>
                        </td>
                    </tr>


                    
                        <%--<tr>
                    <td >
						<asp:Label  ID="Label39" runat="server" Text="Lý do vào viện "></asp:Label></td>
						  <td colspan = "4">
						
                              <telerik:RadComboBox   OnClientKeyPressing="HandlekeyPressEnter"           
                                 TabIndex="1" ID="cbolydovaovien" DataTextField="LydoVV" 
							DataValueField="MaVV" runat="server"
							Width="100%">
						</telerik:RadComboBox>
						  </td>
                    <td >
						<asp:Label  ID="Label44" runat="server" Text="Đối tượng khám bệnh "></asp:Label></td>
						  <td colspan = "4">
						
                              <telerik:RadComboBox   OnClientKeyPressing="HandlekeyPressEnter"           
                                 TabIndex="1" ID="cbodoituongkhambenh" DataTextField="TenBN" 
							DataValueField="MaKB" runat="server"
							Width="100%">
						</telerik:RadComboBox>
						  </td>
                </tr>--%>





                          <tr id="ttgt" runat="server">

                        <td>
                            <asp:Label ID="Label50" runat="server" Text="Nơi ĐKGT"></asp:Label>
                        </td>
                      
                        <td  >

                            <asp:TextBox TabIndex="1" runat="server" ID="txtDKGT"  AutoPostBack ="true" OnTextChanged ="txtDKGT_TextChanged"
                                CssClass="span-all"></asp:TextBox>

                        </td>
                        <td colspan="4" width ="100%">
                            <telerik:RadComboBox  IsCaseSensitive ="false" TabIndex="1" ID="cboDKGT" runat="server"
                                AppendDataBoundItems="True" 
                                DataSourceID="odsNoiDK"  width ="100%"
                                AutoPostBack="false" 
                                DataTextField="TenBV" Filter ="Contains" DataValueField="MaBV" 
                                 DropDownWidth="270px"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                EnableAutomaticLoadOnDemand="true"
                                ItemsPerRequest="50"
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                                MarkFirstMatch="true"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                OnItemDataBound="cboBenhVien_ItemDataBound"
                                OnClientSelectedIndexChanged="comboSelectedIndexChangedGT">
                                <HeaderTemplate>
                                  
                                    <table class="NHTC_table_layout" width ="100%">
                                        <tr width ="100%">
                                            <td align="right" width="70px">Mã BHXH</td>
                                            <td width="200px" >Tên BV</td>
                                        </tr>
                                    </table>
                                </HeaderTemplate>
                                <Items>
                                    <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                </Items>
                                <ItemTemplate>
                                    <table width ="100%">
                                        <tr>

                                            <td align="right" width="70px">
                                                <%# DataBinder.Eval(Container.DataItem, "MaBHXH")%>
                                            </td>
                                            <td width="200px">
                                                <%# DataBinder.Eval(Container.DataItem, "TenBV") %>
                                            </td>
                                        </tr>
                                    </table>
                                </ItemTemplate>
                            </telerik:RadComboBox>
                          
                        </td>
                        <td style="text-align:right" >
                            <asp:Label ID="Label52" runat="server" Width="50px" Text="CĐ NGT"></asp:Label>
                        </td>
                        <td Width="60px">

                            <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboCDnoiGT" runat="server"
                                AppendDataBoundItems="True" 
                                DataSourceID="ObjectDanhMucBenh" Width="60px"
                                AutoPostBack="false"
                                 DataTextField="MaICD"  Filter="StartsWith" DataValueField="MaBenhID"
                                DropDownWidth="270px"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                ItemsPerRequest="50"
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                                EnableAutomaticLoadOnDemand="true"
                                MarkFirstMatch="true"
                                HighlightTemplatedItems="true"
                                OnItemDataBound="cboBenh_ItemDataBound"
                                OnClientSelectedIndexChanged="comboSelectedIndexChangedNBT">


                                <HeaderTemplate>
                                    <table class="NHTC_table_layout" width ="100%">
                                        <tr>
                                            <td width="70px">Mã ICD</td>
                                            <td width="200px">Tên bệnh</td>
                                        </tr>
                                    </table>
                                </HeaderTemplate>
                                <Items>
                                    <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                </Items>
                                <ItemTemplate>
                                    <table width ="100%">
                                        <tr>
                                            <td width="70px">
                                                <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                            </td>
                                            <td width="200px">
                                                <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                            </td>
                                        </tr>
                                    </table>
                                </ItemTemplate>
                            </telerik:RadComboBox>

                        </td>
                        <td colspan="4">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtBenhNGT" Width="100%"></asp:TextBox>

                        </td>
                        <td width="70px">
                            <asp:Label ID="Label10" Width="70px" runat="server" Text="Ngày GT"></asp:Label>
                        </td>
                        <td width="85px">
                            <asp:TextBox runat="server" TabIndex="1" ID="dtNgayGT" Width="85px" Enabled="true"></asp:TextBox>

                        </td>
                    </tr>
                    <tr  id="ttdcbn" runat="server">

                        <td>
                            <asp:Label ID="Label11" runat="server" Text="Quốc tịch"></asp:Label>
                        </td>

                        <td colspan="2" width ="100%">
                             <telerik:RadComboBox   OnClientKeyPressing="HandlekeyPressEnter"              
                                   TabIndex="1" ID="cboquocgia" DataTextField="value" DataValueField="key" runat="server"
                     Filter="Contains" ExpandDirection="Up" DataSourceID ="odsquocgia" AutoPostBack ="true"  OnSelectedIndexChanged ="cboquocgia_SelectedIndexChanged"
                      EnableVirtualScrolling="true"   width="95px"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                             ShowDropDownOnTextboxClick="true" CaseSensitive="false" 
                                            EnableAutomaticLoadOnDemand="false"                
                                            MarkFirstMatch="true"  >

                       </telerik:RadComboBox>
                          
                        </td>
                         <td width ="50px">
                            <asp:Label ID="Label38" runat="server" Text="Đ.chỉ(*)"></asp:Label>
                        </td>
                        <td colspan="3" runat ="server" id ="diachi">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtDiaChi" Enabled="true"
                              
                                 CssClass="span-all"></asp:TextBox>
                        </td>
                        <td width="50px">
                            <asp:Label ID="Label13" runat="server" Text="Tỉnh.TP(*)"></asp:Label>
                        </td>

                        <td colspan="3" runat ="server" id ="tinh">
                            <telerik:RadComboBox  IsCaseSensitive ="false"    id ="cbotinh"          
                                DataSourceID ="odstinh"
                                TabIndex="1" runat="server" Filter="StartsWith"
                        ExpandDirection="Up" DataTextField="value"
                        DataValueField="key"   
                        EnableVirtualScrolling="true"
                        EnableLoadOnDemand="true" 
                         ItemsPerRequest="50"
                        ShowMoreResultsBox="true"
                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                        EnableAutomaticLoadOnDemand="true"
                   AutoPostBack ="true"
                                OnSelectedIndexChanged ="cbotinh_SelectedIndexChanged"
                        MarkFirstMatch="true"
                        CssClass="span-all" Width ="100%" AppendDataBoundItems ="true"
                             >
                                    <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                            </telerik:RadComboBox>
                        </td>
                        <td>
                            <asp:Label ID="Label36" runat="server" Text="Quận.H(*)"></asp:Label>
                        </td>

                        <td colspan="1" runat ="server" id ="huyen">
                            <telerik:RadComboBox  IsCaseSensitive ="false"           
                                    CaseSensitive="false" TabIndex="1"
                                runat="server" ID="cbohuyen"  DataSourceID ="odshuyen"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                DropDownAutoWidth="Enabled" 
                                Width="100%"
                                EnableAutomaticLoadOnDemand="true"
                                ShowMoreResultsBox="true"
                                  ItemsPerRequest="50"
                                ShowDropDownOnTextboxClick="true"
                                MarkFirstMatch="true"
                                Filter="Contains"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                AutoPostBack="true"
                               
                                OnSelectedIndexChanged="cbohuyen_SelectedIndexChanged"
                                DataTextField="Value" DataValueField="Key" AppendDataBoundItems ="true"
                             >
                                    <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                </telerik:RadComboBox>
                        </td>
                         <td  runat ="server" id ="lblxa">
                            <asp:Label ID="Label18" runat="server" Text="P.Xã(*)"></asp:Label>
                        </td>

                        

                         <td  runat ="server" id ="xa"> 
                            <telerik:RadComboBox  IsCaseSensitive ="false"               CaseSensitive="false" TabIndex="1"
                                runat="server" ID="cboPXa"   DataSourceID="odspxa"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                DropDownAutoWidth="Enabled" 
                                Width="100%"
                                EnableAutomaticLoadOnDemand="true"
                                 ItemsPerRequest="50"
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                                MarkFirstMatch="true"
                                Filter="Contains"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                AutoPostBack="false"
                               
                                DataTextField="Value" DataValueField="Key">
                                
                            </telerik:RadComboBox>
                        </td>
                    </tr>

                    <tr id="ttbngc" runat="server">
                           <td>
                            <asp:Label ID="Label42" runat="server" Text="N.nghiệp"></asp:Label>
                        </td>

                        <td colspan="3">
                            <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" runat="server" ID="cboNgheNghiep" DataSourceID="odsNgheNghiep"
                                AutoPostBack="false" DataTextField="Value" DataValueField="Key"
                                DropDownAutoWidth="Enabled" AppendDataBoundItems ="true"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                EnableAutomaticLoadOnDemand="true" 
                                
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                               
                                MarkFirstMatch="true"
                                Filter="StartsWith"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                OpenDropDownOnFocus="true"
                                CssClass="span-all" >
                                     <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                            </telerik:RadComboBox>
                        </td>
                       
                        <td>
                            <asp:Label ID="Label41" runat="server" Text="Đ.thoại"></asp:Label>
                        </td>
                        <td colspan ="2">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtdienthoai" OnTextChanged="txtdienthoai_TextChanged"
                                onkeypress=" return onlyFaxs(event)" Enabled="true" CssClass="span-all" ></asp:TextBox>
                        </td>
                      <td width ="40px">
                            <asp:Label ID="Label40" runat="server" Text="Liên hệ" ></asp:Label>
                        </td>
                        <td colspan="5">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtBaoTin" Enabled="true" CssClass="span-all"></asp:TextBox>
                        </td>
                    </tr>                
              
                     <tr >
                         <td>
                            <asp:Label ID="Label37" runat="server" Text="Dân tộc"></asp:Label>
                        </td>

                        <td colspan="3">
                            <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" runat="server" ID="cboDanToc" DataSourceID="odsDanToc"
                                AutoPostBack="false" DataTextField="Value" DataValueField="Key"
                                DropDownAutoWidth="Enabled" AppendDataBoundItems ="true"
                                EnableVirtualScrolling="true"
                                EnableLoadOnDemand="true"
                                EnableAutomaticLoadOnDemand="true" 
                                
                                ShowMoreResultsBox="true"
                                ShowDropDownOnTextboxClick="true"
                               
                                MarkFirstMatch="true"
                                Filter="StartsWith"
                                HighlightTemplatedItems="true"
                                OpenDropDownOnLoad="false"
                                OpenDropDownOnFocus="true"
                                CssClass="span-all" >
                                     <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                            </telerik:RadComboBox>
                        </td>
                           <td>
                            <asp:Label ID="Label34" runat="server" Text="Nơi LV"></asp:Label>
                        </td>
                         <td colspan="6">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtNoiLV" Enabled="true"
                              
                                 CssClass="span-all"></asp:TextBox>
                        </td>
                         
                         </tr> 


                    <tr>
                    <td >
						<asp:Label  ID="Label39" runat="server" Text="Lý do vào viện "></asp:Label></td>
						  <td colspan = "4">
						
                              <telerik:RadComboBox   OnClientKeyPressing="HandlekeyPressEnter"           
                                 TabIndex="1" ID="cbolydovaovien" DataTextField="LydoVV" 
							DataValueField="MaVV" runat="server"
							Width="100%">
						</telerik:RadComboBox>
						  </td>
                    <td >
						<asp:Label  ID="Label44" runat="server" Text="Đối tượng khám bệnh "></asp:Label></td>
						  <td colspan = "4">
						
                              <telerik:RadComboBox   OnClientKeyPressing="HandlekeyPressEnter"           
                                 TabIndex="1" ID="cbodoituongkhambenh" DataTextField="TenBN" 
							DataValueField="MaKB" runat="server"
							Width="100%">
						</telerik:RadComboBox>
						  </td>
                </tr>



                </table>
            </div>
        </fieldset>
    </div>
    <%if (txtloaiphieu.Value == "11" || txtloaiphieu.Value == "2" || (txtloaiphieu.Value == "1" && txtview.Value == "YH") || (txtloaiphieu.Value == "1" && txtview.Value == "HU") || (txtloaiphieu.Value == "1" && txtview.Value == "QN")  || (txtloaiphieu.Value == "1" && txtview.Value == "PH"))  %>
    <% { %>
     <div class="form-container" id="ttqrcode" runat="server"  >
        <fieldset id="Fieldset1" align="center" style="width:98%"  runat ="server"  >
            <legend>
                <label>
                    Thông tin QR Code
                </label>
            </legend>
            <div align="center" class="form-container">
                <table width="100%">
                    <tr>
                        <td>
                            <asp:Label ID="Label25" runat="server" Text="QR code"></asp:Label>
                        </td>
                        <td width="90%">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtQRCode" AutoPostBack="true" OnTextChanged="txtQRCode_TextChanged" ></asp:TextBox>
                        </td>
                        </tr>
                    </table> 
                </div> 
            </fieldset>
     </div>
    <%} %>
       <div class="form-container" id="Div2" runat="server"  >
        <fieldset id="idCSTN" align="center" style="width:98%"  runat ="server"  >
            <legend>
                <label>
                    Thông tin bổ sung
                </label>
            </legend>
            <div align="center" class="form-container">
                <table width="100%">
                    <tr>
                        <td width ="80px">
                            <asp:Label ID="Label26" runat="server" Text="ĐT 2"  onkeypress=" return onlyFaxs(event)"></asp:Label>
                        </td>
                        <td >
                            <asp:TextBox runat="server" TabIndex="1" ID="txtDTDD"  ></asp:TextBox>
                        </td>
                         <td width ="80px">
                            <asp:Label ID="Label27" runat="server" Text="ĐT 3"  onkeypress=" return onlyFaxs(event)"></asp:Label>
                        </td>
                        <td >
                            <asp:TextBox runat="server" TabIndex="1" ID="txtDTCQ"  ></asp:TextBox>
                        </td>
                         <td width ="80px">
                            <asp:Label ID="Label30" runat="server" Text="Nơi CS"></asp:Label>
                        </td>
                        <td colspan="5">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtNoiLamViec"  ></asp:TextBox>
                        </td>
                       
                        </tr>
                    <tr>
                        <td width ="80px">
                            <asp:Label ID="Label28" runat="server" Text="Từ ngày"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox TabIndex="1" runat="server" ID="dtCSTuNgay" Enabled="true"></asp:TextBox>
                        </td>
                        <td width ="80px">
                            <asp:Label ID="Label29" runat="server" Text="ĐN"></asp:Label>
                        </td>

                        <td >
                            <asp:TextBox TabIndex="1" runat="server" ID="dtCSDenNgay" Enabled="true"
							
							></asp:TextBox>

                        </td>
                         <td width ="80px">
                            <asp:Label ID="Label31" runat="server" Text="Ghi chú"></asp:Label>
                        </td>
                        <td colspan="5">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtGhiChu"  ></asp:TextBox>
                        </td>
                        </tr>
                    </table> 
                </div> 
            </fieldset>
         </div>
    <%if (txtloaiphieu.Value !="1"  )  %>
    <% { %>
    <div class="form-container" id="tthd" runat="server" >
        <fieldset align="center" style="width:98%">
            <legend>
                <label>
                    Thông tin hóa đơn
                </label>
            </legend>

            <div align="center" class="form-container">
                <table>
                    <tr>
                        <td>
                            <asp:Label ID="Label12" runat="server" Text="Ký hiệu"></asp:Label>
                        </td>
                        <td width="70px">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtKyhieu" Width="70px"></asp:TextBox>
                        </td>
                        <td>
                            <asp:Label ID="Label14" runat="server" Text="Số"></asp:Label>
                        </td>
                        <td width="70px">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtsohd" Width="70px"></asp:TextBox>

                        </td>
                        <td>
                            <asp:Label ID="Label15" runat="server" Text="Tạm thu"></asp:Label>
                        </td>
                        <td width="60px">
                            <asp:TextBox  NumberFormat-DecimalDigits="0" runat="server" onkeypress=" return onlyNumbers(event)" 
                                TabIndex="1" ID="txtkyquy" Width="60px"></asp:TextBox>
                           
                        </td>
                        <td>
                            <asp:Label ID="Label17" runat="server" Text="MG"></asp:Label>
                        </td>
                        <td width="30px">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtMG" Width="30px"
                                AutoPostBack="true" OnTextChanged="txtMG_TextChanged"></asp:TextBox>
                        </td>
                         <td width="140px">
                                    <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboNguoiDuyet" runat="server"
                                        AppendDataBoundItems="false" AutoPostBack="false"
                                        DataSourceID="ObjectDanhMucNV" DataTextField="HoTen"
                                        DataValueField="MaNV" DropDownWidth="470px"
                                        CaseSensitive="false" CssClass="span-all"
                                        EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                        EnableVirtualScrolling="true" ExpandDirection="Down"
                                        Filter="Contains" HighlightTemplatedItems="true"
                                        MarkFirstMatch="true" ShowDropDownOnTextboxClick="true"
                                        ShowMoreResultsBox="true" Width="100%">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout">
                                                <tr>
                                                    <td width="200px">Họ tên</td>
                                                    <td width="200px">Khoa</td>
                                                    <td width="70px">Mã NV</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>

                                                <tr>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "HoTen") %></td>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "TenKhoa") %></td>
                                                    <td width="70px"><%# DataBinder.Eval(Container.DataItem, "MaNV") %></td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                </td>
                         <td>
                            <asp:Label ID="lblSothang" runat="server" Text="" ForeColor="Red" Font-Bold="true" Font-Size="Large"></asp:Label>
                        </td>
                        
                        <td>
                            <asp:Label ID="Label20" runat="server" Text="Tổng CTT"></asp:Label>
                        </td>
                        <td width="75px">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtTongCTT" Width="90px" ReadOnly="true" ForeColor="Blue"  Font-Bold="True"></asp:TextBox>
                       
                          </td>
                        <td>
                            <asp:Label ID="Label56" runat="server" Text="Tổng HD"></asp:Label>
                        </td>
                        <td width="75px">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtTongHD" Width="90px" ReadOnly="true" ForeColor="Blue"  Font-Bold="True"></asp:TextBox>
                        </td>
                         <td width="50px">
                            <asp:Label width="50px" ID="Label24" runat="server" Text="Tổng ĐTT" Visible ="false"></asp:Label>
                        </td>
                        <td width="75px">
                            <asp:TextBox TabIndex="1" runat="server" ID="txtTongDTT" Width="90px" Visible ="false"  ReadOnly="true" ForeColor="Blue" Font-Bold="True"></asp:TextBox>
                         <asp:TextBox  NumberFormat-DecimalDigits="0" runat="server" ReadOnly ="true"  Visible="false" ForeColor="Blue" 
                                TabIndex="1" ID="txtConLai" Width="60px"></asp:TextBox>
                        </td>
                    </tr>

                        <tr>
                        <td>
                            <asp:Label ID="Label32" runat="server" Text="Ghi chú"  Visible ="false" ></asp:Label>
                        </td>
                              <td colspan="15">
                            <asp:TextBox runat="server" TabIndex="1" ID="txtGhiChuHD" Width="70px" Visible ="false"></asp:TextBox>
                        </td>
                            </tr>
                </table>
            </div>
        </fieldset>
    </div>
    <% } %>
    <div id="gridContainer">

        <telerik:RadTabStrip runat="server"
            ID="RadTabStrip1"
            Align="Justify"
            AutoPostBack="True"
            MultiPageID="RadMultiPage1"
            SelectedIndex="0"
            Width="98%"
            ClickSelectedTab="True"
            OnTabClick="RadTabStrip1_TabClick">
            <Tabs>
                <telerik:RadTab Text="Dịch vụ chưa thanh toán" Value="0" TabIndex="0" Selected="True" PageViewID="RadPageView1"></telerik:RadTab>
                <telerik:RadTab Text="Dịch vụ đã thanh toán" Value="1" TabIndex="1" PageViewID="RadPageView2"></telerik:RadTab>

                <telerik:RadTab Text="XN.TT.XQ.TDCN" Value="2" TabIndex="2" PageViewID="RadPageView3"></telerik:RadTab>
                <telerik:RadTab Text="Thuốc" Value="3" TabIndex="3" PageViewID="RadPageView4"></telerik:RadTab>
                <telerik:RadTab Text="Thuốc thang" Value="4" TabIndex="4" PageViewID="RadPageView5"></telerik:RadTab>



            </Tabs>
        </telerik:RadTabStrip>
          <telerik:RadMultiPage runat="server" ID="RadMultiPage1" SelectedIndex="0">
             <%if (txtindextab.Value =="0")  %>
             <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView1" SelectedIndex="0" TabIndex="0">
                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdCTT" runat="server"
                    Height="300px" Visible="false"
                    Skin="Default"
                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                    HeaderStyle-Font-Bold="true"
                    OnUpdateCommand="grdDichVu_UpdateCommand"
                    OnItemCommand="grdDichVu_ItemCommand"
                    OnDeleteCommand="grdDichVu_DeleteCommand"
                    OnNeedDataSource="grdDichVu_NeedDataSource"
                    MasterTableView-EditMode="InPlace">
                    <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                        KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />

                    </ClientSettings>
                    <HeaderStyle Width="100px"></HeaderStyle>
                    <MasterTableView   AutoGenerateColumns="false" CommandItemDisplay="None"
                        HorizontalAlign="Center" DataKeyNames="SoTT,OrderNumber,LoaiDV">
                        <CommandItemSettings />
                        <EditFormSettings CaptionFormatString="Chưa TT" CaptionDataField="">
                            <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                        </EditFormSettings>
                        <Columns>
                            <telerik:GridTemplateColumn UniqueName="CheckBoxTemplateColumn" Display="false"
                                ItemStyle-Width="50px" HeaderStyle-Width="50px">
                                <ItemTemplate>
                                    <asp:CheckBox TabIndex="1" ID="Chkbox" runat="server" />
                                </ItemTemplate>
                                <HeaderTemplate>
                                    <asp:CheckBox TabIndex="1" ID="headerChkbox" runat="server" OnCheckedChanged="grdChiTiet_ToggleSelectedState" AutoPostBack="true" Text="Chọn" />
                                </HeaderTemplate>
                            </telerik:GridTemplateColumn>
                            <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                UniqueName="Edit"
                                EditText="Sửa" InsertText="Enter-Ghi"
                                ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                ItemStyle-HorizontalAlign="Center">
                            </telerik:GridEditCommandColumn>
                            <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                HeaderText="" Text="Delete">
                                <HeaderStyle Width="20px" HorizontalAlign="Center" />
                            </telerik:GridButtonColumn>
                            <telerik:GridBoundColumn DataField="OrderNumber"
                                FooterAggregateFormatString="Tổng số: {0} "
                                HeaderText="STT" SortExpression="STT"
                                UniqueName="OrderNumber" ItemStyle-Width="30px"
                                HeaderStyle-Width="30px" ReadOnly="true">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn HeaderText="Mã DV" DataField="tentat"
                                UniqueName="tentat" DataType="System.String"  Display="false"
                                HeaderStyle-Font-Bold="true">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn HeaderText="Tên DV" DataField="TenDV" ReadOnly="true"
                                UniqueName="TenDV" DataType="System.String" 
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                HeaderStyle-Width="350px">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn HeaderText="SL" DataField="SLMua"
                                UniqueName="SLTT" DataType="System.Decimal" 
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="70px"
                                HeaderStyle-Width="70px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="DongiaTT" HeaderText="Đơn Giá DV" ReadOnly="true"  UniqueName="DongiaTT">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="DonGiaBH" HeaderText="Đơn Giá BH" ReadOnly="true"  UniqueName="DonGiaBH">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="GiaChenhLech" HeaderText="Giá CL" ReadOnly="true"  UniqueName="GiaChenhLech">
                            </telerik:GridBoundColumn>
                            <telerik:GridCheckBoxColumn DataField="BHTinhTien" DataType="System.Boolean"
                                HeaderText="BH" ReadOnly="false"
                                
                                HeaderStyle-Width="50px"
                                 UniqueName="BHTinhTien">
                            </telerik:GridCheckBoxColumn>

                             <telerik:GridCheckBoxColumn DataField="MG" DataType="System.Boolean"
                                HeaderText="MG" ReadOnly="false"
                                Display="false"
                                 UniqueName="MG">
                            </telerik:GridCheckBoxColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="40px" HeaderStyle-Width="40px" DataField="CK" HeaderText="MG" ReadOnly="true"  UniqueName="CK">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="ThanhTien" HeaderText="Thành tiền" ReadOnly="true"  UniqueName="ThanhTien">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="ThanhTienBH" HeaderText="T.Tiền BH" ReadOnly="true"  UniqueName="ThanhTienBH">
                            </telerik:GridBoundColumn>

                            <telerik:GridCheckBoxColumn DataField="inthu" DataType="System.Boolean"
                                HeaderText="inthu" ReadOnly="false"
                                
                                Display="false"
                                 UniqueName="inthu">
                            </telerik:GridCheckBoxColumn>
                            <telerik:GridCheckBoxColumn DataField="DuyetBH" DataType="System.Boolean"
                                HeaderText="DuyetBH" ReadOnly="false"
                                
                                Display="false"
                                SortExpression="DuyetBH" UniqueName="DuyetBH">
                            </telerik:GridCheckBoxColumn>

                            <telerik:GridBoundColumn DataField="DATT" HeaderText="Đã TT"
                                ReadOnly="true" SortExpression="DATT" UniqueName="DATT" Display="false">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                            </telerik:GridBoundColumn>

                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
            </telerik:RadPageView>
             <% } %>
               <%if (txtindextab.Value =="1")  %>
             <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView2" TabIndex="1">
                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdDTT" runat="server"
                    Height="300px" Visible="false"
                    Skin="Default"
                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                    HeaderStyle-Font-Bold="true"
                    OnUpdateCommand="grdDichVu_UpdateCommand"
                    OnItemCommand="grdDichVu_ItemCommand"
                    OnDeleteCommand="grdDichVu_DeleteCommand"
                    OnNeedDataSource="grdDichVu_NeedDataSource"
                    MasterTableView-EditMode="InPlace">
                    <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                        KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />
                        <ClientEvents OnRowSelected="RowSelected" />
                    </ClientSettings>
                    <HeaderStyle Width="100px"></HeaderStyle>
                    <MasterTableView  AutoGenerateColumns="false" CommandItemDisplay="None"
                        HorizontalAlign="Center" DataKeyNames="SoTT,OrderNumber,LoaiDV,SoTT">
                        <CommandItemSettings />
                        <EditFormSettings CaptionFormatString="Đã TT" CaptionDataField="">
                            <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                        </EditFormSettings>
                        <Columns>
                             <telerik:GridTemplateColumn UniqueName="CheckBoxTemplateColumn" Display="false"
                                ItemStyle-Width="50px" HeaderStyle-Width="50px">
                                <ItemTemplate>
                                    <asp:CheckBox TabIndex="1" ID="Chkbox" runat="server" />
                                </ItemTemplate>
                                <HeaderTemplate>
                                    <asp:CheckBox TabIndex="1" ID="headerChkbox" runat="server" OnCheckedChanged="grdChiTietDaTT_ToggleSelectedState" AutoPostBack="true" Text="Chọn" />
                                </HeaderTemplate>
                            </telerik:GridTemplateColumn>
                            <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                UniqueName="Edit"
                                EditText="Sửa" InsertText="Enter-Ghi"
                                ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                ItemStyle-HorizontalAlign="Center">
                            </telerik:GridEditCommandColumn>
                            <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                HeaderText="" Text="Delete">
                                <HeaderStyle Width="20px" HorizontalAlign="Center" />
                            </telerik:GridButtonColumn>
                            <telerik:GridBoundColumn DataField="OrderNumber"
                                FooterAggregateFormatString="Tổng số: {0} "
                                HeaderText="STT" SortExpression="STT"
                                UniqueName="OrderNumber" ItemStyle-Width="30px"
                                HeaderStyle-Width="30px" ReadOnly="true">
                            </telerik:GridBoundColumn>



                            <telerik:GridBoundColumn HeaderText="Tên DV" DataField="TenDV"
                                UniqueName="TenDV" DataType="System.String"  ReadOnly="true"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                HeaderStyle-Width="270px">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn HeaderText="SL mua" DataField="SLMua"
                                UniqueName="SLMua" DataType="System.Decimal" ReadOnly="true"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="70px"
                                HeaderStyle-Width="70px">
                            </telerik:GridBoundColumn>
                             <telerik:GridBoundColumn HeaderText="SL Trả" DataField="SLTra"
                                UniqueName="SLTra" DataType="System.Decimal" 
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="70px"
                                HeaderStyle-Width="70px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="DongiaTT" HeaderText="Đơn Giá DV" ReadOnly="true"  UniqueName="DongiaTT">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="DonGiaBH" HeaderText="Đơn Giá BH" ReadOnly="true"  UniqueName="DonGiaBH">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="GiaChenhLech" HeaderText="Giá CL" ReadOnly="true"  UniqueName="GiaChenhLech">
                            </telerik:GridBoundColumn>
                            <telerik:GridCheckBoxColumn DataField="BHTinhTien" DataType="System.Boolean"
                                HeaderText="BH" ReadOnly="false"
                                
                                HeaderStyle-Width="50px"
                                 UniqueName="BHTinhTien">
                            </telerik:GridCheckBoxColumn>


                            <telerik:GridBoundColumn ItemStyle-Width="40px" HeaderStyle-Width="40px" DataField="CK" HeaderText="MG" ReadOnly="true"  UniqueName="CK">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="ThanhTien" HeaderText="Thành tiền" ReadOnly="true"  UniqueName="ThanhTien">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ItemStyle-Width="80px" HeaderStyle-Width="80px" DataField="ThanhTienBH" HeaderText="T.Tiền BH" ReadOnly="true"  UniqueName="ThanhTienBH">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="Ký hiệu" DataField="SoSoHD"
                                UniqueName="SoSoHD" DataType="System.String"  ReadOnly="true"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="60px"
                                HeaderStyle-Width="60px">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn HeaderText="Số HĐ" DataField="SoHD"
                                UniqueName="SoHD" DataType="System.String"  ReadOnly="true"
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="60px"
                                HeaderStyle-Width="60px">
                            </telerik:GridBoundColumn>
                            <telerik:GridCheckBoxColumn DataField="inthu" DataType="System.Boolean"
                                HeaderText="inthu" ReadOnly="false"
                                
                                Display="false"
                                 UniqueName="inthu">
                            </telerik:GridCheckBoxColumn>

                            <telerik:GridBoundColumn DataField="DATT" HeaderText="Đã TT"
                                ReadOnly="true" SortExpression="DATT" UniqueName="DATT" Display="false">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                            </telerik:GridBoundColumn>


                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
            </telerik:RadPageView>
            <% } %>
             <%if (txtindextab.Value =="2")  %>
             <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView3" TabIndex="2">
               
                <div class="form-container">
                    <fieldset align="center">
                        <legend>
                            <label>
                                &nbsp;
                            </label>
                        </legend>

                        <table width="98%">

                            <tr>
                                  <td width="50px">
                                    <asp:Label ID="Label4" runat="server" Text="Khoa,phòng(*)" ></asp:Label>
                                </td>
                                 <td width ="60px">
                                    <asp:TextBox TabIndex="1" ID="txtMaKhoa" width ="60px"
                                         runat="server" Enabled="true" OnTextChanged ="txtMaKhoa_TextChanged" AutoPostBack="true"></asp:TextBox>
                                </td>
                                <td width="200px"> 
                                    <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" 
                                        AppendDataBoundItems="true" AutoPostBack ="true" 
                                         ID="cboKhoaKB" runat="server" DropDownWidth="250px"
                                        DataTextField="Value" DataValueField="Key"
                                        DataSourceID="cdsKhoa" CaseSensitive="false" 
                                        Enabled="true" Width="100%" 
                                        DropDownAutoWidth="Enabled"
                                        EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                        EnableVirtualScrolling="true" ExpandDirection="Down"
                                        Filter="Contains" HighlightTemplatedItems="true"
                                         MarkFirstMatch="true" 
                                        ShowDropDownOnTextboxClick="true"
                                        ShowMoreResultsBox="true"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedKhoa"
                                        OnSelectedIndexChanged ="cboKhoaKB_SelectedIndexChanged" 
                                        CssClass="span-all">
                                         <Items>
                                    
                                </Items>
                                    </telerik:RadComboBox>
                                </td>
                                <td width="70px">
                                    <asp:Label ID="Label59" runat="server" Text="Bác sĩ khám"></asp:Label>
                                </td>
                                <td width ="50px">
                                    <asp:TextBox TabIndex="1" ID="txtMaNV" width ="50px"
                                         runat="server" Enabled="true" OnTextChanged="txtMaNV_TextChanged" AutoPostBack="true"></asp:TextBox>
                                </td>
                                <td width="170px">
                                    <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboNhanVien" runat="server"
                                        AppendDataBoundItems="true" AutoPostBack="false"
                                        CaseSensitive="false" CssClass="span-all" 
                                        DataSourceID="ObjectDanhMucNV" DataTextField="HoTen"
                                        DataValueField="MaNV"   DropDownWidth ="470px"
                                        EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                        EnableVirtualScrolling="true" ExpandDirection="Down"
                                        Filter="Contains" HighlightTemplatedItems="true"
                                       MarkFirstMatch="true"
                                         ShowDropDownOnTextboxClick="true"
                                             OnClientSelectedIndexChanged="comboSelectedIndexChangedBS" 
                                   
                                        ShowMoreResultsBox="true" Width="100%">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout">
                                                <tr>
                                                    <td width="200px">Họ tên</td>
                                                    <td width="200px">Khoa</td>
                                                    <td width="70px">Mã NV</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>

                                                <tr>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "HoTen") %></td>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "TenKhoa") %></td>
                                                    <td width="70px"><%# DataBinder.Eval(Container.DataItem, "MaNV") %></td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                </td>
                              
                                <td width="60px">
                                    <asp:Label ID="Label58" runat="server" Text="Chẩn đoán" width="60px"></asp:Label>
                                </td>
                                <td width="60px">
                                    <telerik:RadComboBox  IsCaseSensitive ="false"               TabIndex="1" runat="server" ID="cboChanDoan" 
                                        Width="60px"
                                        DataSourceID="ObjectDanhMucBenh" 
                                        DropDownAutoWidth="Enabled"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50"
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        DataValueField="MaBenhID"
                                        HighlightTemplatedItems="true" MarkFirstMatch="true"
                                         DataTextField="MaICD"  Filter="Contains"
                                        OnItemDataBound="cboBenh_ItemDataBound"
                                        OnClientSelectedIndexChanged="comboSelectedIndexChangedCD">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout" width="100%">
                                                <tr>
                                                    <td>Mã ICD</td>
                                                    <td>Tên bệnh</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table class="NHTC_table_layout" width="100%">
                                                <tr>
                                                    <td width="70px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaICD")%>
                                                    </td>
                                                    <td width="400px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenBenh") %>
                                                    </td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                </td>
                                <td width="170px">
                                    <asp:TextBox runat="server" TabIndex="1" ID="txtChanDoan" ></asp:TextBox>
                                </td>
                            </tr>
                        </table>

                    </fieldset>
                </div>
                <telerik:RadCodeBlock ID="rcb" runat="server">

                    </telerik:RadCodeBlock>
                <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" 
                    ID="grdXNTT" runat="server" 
                    Height="300px" Visible="true" 
                    Skin="Default"
                    ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" 
                    PagerStyle-Visible="true"
                    HeaderStyle-Font-Bold="true" 
                    OnNeedDataSource="grdDichVu_NeedDataSource"
                    OnItemCommand="grdDichVu_ItemCommand"
                    OnDeleteCommand="grdDichVu_DeleteCommand"
                    OnUpdateCommand="grdDichVu_UpdateCommand"
                    OnInsertCommand="grdDichVu_InsertCommand"
                    OnItemDataBound="grdDichVu_ItemDataBound"
                AllowMultiRowSelection="True"
                   OnItemCreated ="grdXNTT_ItemCreated"
                    MasterTableView-EditMode="InPlace">
                    <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                        KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                        AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                        <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                        <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />

                    </ClientSettings>
                    <HeaderStyle Width="100px"></HeaderStyle>
                    <MasterTableView  AutoGenerateColumns="false" CommandItemDisplay="None"
                        HorizontalAlign="Center" DataKeyNames="STT">
                        <CommandItemSettings />
                        <EditFormSettings CaptionFormatString="TT-XN-CDHA-TDCN" CaptionDataField="">
                            <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                        </EditFormSettings>
                        <Columns>
                         
                            <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                UniqueName="Edit"
                                EditText="Sửa" InsertText="Enter-Ghi"
                                ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                ItemStyle-HorizontalAlign="Center">
                            </telerik:GridEditCommandColumn>
                            <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                HeaderText="" Text="Delete">
                                <HeaderStyle Width="20px" HorizontalAlign="Center" />
                            </telerik:GridButtonColumn>
                            <telerik:GridBoundColumn DataField="STT"
                                FooterAggregateFormatString="Tổng số: {0} "
                                HeaderText="STT" SortExpression="STT"
                                UniqueName="STT" ItemStyle-Width="30px"
                                HeaderStyle-Width="30px" ReadOnly="true">
                            </telerik:GridBoundColumn>
                              <telerik:GridTemplateColumn HeaderText="Mã DV" DataField="MaDV"
                                UniqueName="MaDVXN" DataType="System.String" 
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="90px"
                                HeaderStyle-Width="90px">
                                <ItemTemplate>
                                    <%# Eval("MaDV")%>
                                </ItemTemplate>
                                <InsertItemTemplate>
                                    <telerik:RadComboBox                
                                      IsCaseSensitive="false" ID="cboMaDichVu" runat="server"
                                        AppendDataBoundItems="True" CssClass="span-all" 
                                        DataSourceID="odsDichVu" Culture="vi-VN"
                                        AutoPostBack="false"
                                        DataTextField="MaDV" DataValueField="MaDV"
                                        Filter="StartsWith"

                                        MarkFirstMatch="true"
                                        HighlightTemplatedItems="true"
                                        DropDownAutoWidth="Disabled"
                                        DropDownWidth="680px"
                                        DropDownHeight="200px"
                                        ExpandDirection="Up"
                                        OnItemDataBound="comboDataBound"
                                        EnableLoadOnDemand="true"
                                        ItemsPerRequest="50" 
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true"
                                        OnClientSelectedIndexChanged="OnClientSelectedIndexChanged"
                                        OnClientDropDownOpening="OnClientDropDownOpening"
                                        OnClientDropDownClosing="OnClientDropDownClosing"
                                        OnClientItemChecked="OnClientItemChecked"
                                        OnClientItemsRequesting ="OnClientItemsRequesting"
                                        CheckBoxes="true"
                                        CheckedItemsTexts="DisplayAllInInput"
                                        OnClientKeyPressing ="OnClientFocus"
                                        Width="100%" Height="200px">
                                        <HeaderTemplate>
                                            <table>
                                                <tr>
                                                    <td width="20px"></td>
                                                     <td width="80px">Mã DV</td>
                                                    <td width="300px">Tên DV</td>
                                                    <td width="80px">Đơn giá TT</td>
                                                    <td width="80px">Đơn giá BH</td>
                                                    <td width="80px">Đơn giá CL</td>

                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>
                                                <tr>
                                                       <td width="50px">
                                                        <%# DataBinder.Eval(Container.DataItem, "MaDV") %>
                                                    </td>
                                                    <td width="300px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenDV") %>
                                                    </td>

                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "DongiaTT") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "Dongia") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "GiaChenhlenh") %>
                                                    </td>
                                                </tr>
                                            </table>

                                        </ItemTemplate>
                                    </telerik:RadComboBox></InsertItemTemplate>
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn HeaderText="Tên DV" DataField="MaDV"
                                UniqueName="MaDV" DataType="System.String" 
                                HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                HeaderStyle-Width="350px">
                                <ItemTemplate>
                                    <%# Eval("TenTM")%>
                                </ItemTemplate>
                                <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"              
                                          ID="cboDichVu" runat="server"
                                    AppendDataBoundItems="True" CssClass="span-all"
                                    DataSourceID="odsDichVu" Width ="100%"
                                    AutoPostBack="false"
                                   MarkFirstMatch="true" 
                                    DataTextField="TenDV" DataValueField="MaDV"
                                    Filter="Contains"
                                    HighlightTemplatedItems="true"
                                    DropDownAutoWidth="Disabled"
                                    DropDownWidth="680px"
                                    DropDownHeight="200px"
                                    ExpandDirection="Up"
                                    OnItemDataBound="comboDataBound"
                                    EnableLoadOnDemand="true"
                                    ItemsPerRequest="50"
                                    ShowMoreResultsBox="true"
                                    ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                    EnableAutomaticLoadOnDemand="true"
                                    OnClientSelectedIndexChanged="OnClientSelectedIndexChanged"
                                      
                                     Height="200px">
                                        <HeaderTemplate>
                                            <table>
                                                <tr>
                                                    <td width="20px"></td>
                                                    <td width="300px">Tên DV</td>
                                                    <td width="80px">Đơn giá TT</td>
                                                    <td width="80px">Đơn giá BH</td>
                                                    <td width="80px">Đơn giá CL</td>

                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>
                                                <tr>

                                                    <td width="300px">
                                                        <%# DataBinder.Eval(Container.DataItem, "TenDV") %>
                                                    </td>

                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "DongiaTT") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "Dongia") %>
                                                    </td>
                                                    <td width="80px" align="right">
                                                        <%# DataBinder.Eval(Container.DataItem, "GiaChenhlenh") %>
                                                    </td>
                                                </tr>
                                            </table>

                                        </ItemTemplate>
                                    </telerik:RadComboBox></InsertItemTemplate>
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="DonGiaTT"
                                HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" 
                                UniqueName="DonGiaTT">
                                <ItemTemplate>
                                    <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                        readonly="true" Text='<%# Eval("DonGiaTT", "{0:C}") %>'>&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate><asp:TextBox  Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaTT", "{0:C}") %>'
                                        Width="70px">
                                    </asp:TextBox></EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="DonGiaBH"
                                HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" 
                                UniqueName="DonGiaBH">
                                <ItemTemplate><asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                        readonly="true" Text='<%# Eval("DonGiaBH", "{0:C}") %>'>&nbsp;
                                              </asp:Label></ItemTemplate>
                                <EditItemTemplate><asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBH", "{0:C}") %>'
                                        Width="70px">
                                    </asp:TextBox></EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                            <telerik:GridTemplateColumn DataField="BHTinhTien"
                                HeaderText="BH" 
                                UniqueName="BHTinhTien">
                                <ItemTemplate>
                                    <asp:CheckBox ID="chBH" runat="server"
                                        readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                </ItemTemplate>
                                <EditItemTemplate>


                                    <asp:CheckBox Enabled="false" ID="chkBH" runat="server"
                                        readonly="true" Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'></asp:CheckBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="50px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>

                            <telerik:GridTemplateColumn DataField="SLMua"
                                HeaderText="SL" 
                                UniqueName="SLMua">
                                <ItemTemplate>
                                    <asp:Label ID="lbUnit" runat="server"
                                        Text='<%# Eval("SLMua", "{0:#,###.0}") %>' Width="50px"> </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate><telerik:RadNumericTextBox ID="tbSLMua" runat="server"
                                        NumberFormat-DecimalDigits="0" Text='<%# Bind("SLMua", "{0:#,###.0}") %>'
                                        Width="50px">
                                    </telerik:RadNumericTextBox>

                                </EditItemTemplate>
                                <HeaderStyle Width="60px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>
                             <telerik:GridBoundColumn DataField="DaTT" HeaderText="Đã TT"
                                ReadOnly="true" SortExpression="DaTT" UniqueName="DaTT" >
                                 <HeaderStyle Width="50px" />
                            </telerik:GridBoundColumn>
                                <telerik:GridTemplateColumn HeaderText="Khoa TH" DataField="MaKhoa"
                                    UniqueName="MaKhoa" DataType="System.String" 
                                    HeaderStyle-Font-Bold="true" ItemStyle-Width="200px"
                                    HeaderStyle-Width="200px">
                                    <ItemTemplate>
                                    <%# Eval("TenKhoa")%>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"   ID="cboKhoa" runat="server"
                                        AppendDataBoundItems="True" CssClass="span-all"
                                        DataSourceID="cdsKhoaKB" Width ="100%"
                                        AutoPostBack="false"
                                        MarkFirstMatch="true"  
                                          DataTextField="Value" DataValueField="Key"
                                        Filter="Contains"
                                        HighlightTemplatedItems="true"
                                        DropDownAutoWidth="Disabled"
                                    DropDownWidth="250px"
                                        DropDownHeight="200px"
                                        ExpandDirection="Up"
                                     
                                        EnableLoadOnDemand="true"
                                      
                                        ShowMoreResultsBox="true"
                                        ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                        EnableAutomaticLoadOnDemand="true">     
                                                                             
                                    </telerik:RadComboBox>

                                    </EditItemTemplate>
                                </telerik:GridTemplateColumn>
                          
                            <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                HeaderText="Tự túc"
                                
                                HeaderStyle-Width="50px"
                                 UniqueName="TinhTien">
                            </telerik:GridCheckBoxColumn>
                          
                            <telerik:GridTemplateColumn DataField="GiaChenhLech"
                                HeaderText="Giá CL" ItemStyle-HorizontalAlign="Right" 
                                UniqueName="GiaChenhLech">
                                <ItemTemplate>
                                    <asp:Label Enabled="false" ID="lbUnitPriceCL" runat="server"
                                        readonly="true" Text='<%# Eval("GiaChenhLech", "{0:C}") %>'>&nbsp;  </asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>


                                    <asp:TextBox Enabled="false" ID="tbUnitPriceCL" runat="server" ReadOnly="true"
                                        NumberFormat-DecimalDigits="0" Text='<%# Bind("GiaChenhLech", "{0:C}") %>'
                                        Width="70px">
                                    </asp:TextBox>
                                </EditItemTemplate>
                                <HeaderStyle Width="80px" />
                                <ItemStyle HorizontalAlign="Right" />
                            </telerik:GridTemplateColumn>

                             
                            <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                            </telerik:GridBoundColumn>


                            <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                HeaderText="Hủy" ReadOnly="true"
                                
                                HeaderStyle-Width="50px"
                                 UniqueName="Huy">
                            </telerik:GridCheckBoxColumn>



                            <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                SortExpression="NgayLap" UniqueName="NgayLap">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                 UniqueName="TenNguoiLap">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                SortExpression="NgaySD" UniqueName="NgaySD">
                            </telerik:GridBoundColumn>

                            <telerik:GridBoundColumn DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                 UniqueName="TenNguoiSD">
                            </telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="NhapSL" HeaderText="NhapSL" Display="false"
                                SortExpression="NhapSL" UniqueName="NhapSL">
                            </telerik:GridBoundColumn>


                        </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
                    <div id="Div1" >
        <table id ="tdds" runat ="server">
            <tr>
                <td width ="580px" >
                      <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true"      
                   ID="grdLichSuKham" GroupingSettings-CaseSensitive ="false" runat="server"
                    AutoGenerateColumns="false" Visible="false"
                    GridLines="None"
                        HeaderStyle-Font-Bold="true"
                    Selecting-AllowRowSelect="true" EnablePostBackOnRowClick="true"                                    
                   OnNeedDataSource ="grdLichSuKham_NeedDataSource" 
                      height="280px" width ="550px"
                    Skin="Default" 
                    ClientSettings-Scrolling-AllowScroll="true"
                   >
                   
            <MasterTableView EnableColumnsViewState ="false" ViewStateMode ="Disabled"   ShowHeadersWhenNoRecords="true" AutoGenerateColumns="False" CommandItemDisplay="None" EditMode="InPlace"
                 HorizontalAlign="Center" >
                <CommandItemSettings ShowCancelChangesButton="true" ShowRefreshButton="false" ShowAddNewRecordButton="true"  AddNewRecordText="F12 - Thêm"   />
                <Columns>                                                                   
                       
                   <telerik:GridBoundColumn DataField="OrderNumber"
                        FooterAggregateFormatString="Tổng số: {0} "
                        FilterControlAltText="Filter OrderNumber column" 
                        HeaderText="STT" ReadOnly="true" SortExpression="OrderNumber"
                        UniqueName="OrderNumber" ItemStyle-Width="50px" HeaderStyle-Width="50px"
                        
                        >
                    </telerik:GridBoundColumn>
                     <telerik:GridBoundColumn DataField="NgayDK" HeaderText="Ngày khám" 
                         ReadOnly="true" SortExpression="NgayDK" UniqueName="NgayDK"
                          
                          ItemStyle-Width="80px" HeaderStyle-Width="80px">                          
                    </telerik:GridBoundColumn>  
                    <telerik:GridBoundColumn ItemStyle-Width="250px" HeaderStyle-Width="250px"
                         DataField="tenbenh" HeaderText="Chẩn đoán"
                         ReadOnly="true" SortExpression="tenbenh" UniqueName="tenbenh"
                        CurrentFilterFunction="Contains" AutoPostBackOnFilter="true" ShowFilterIcon="false"
                       >
                    </telerik:GridBoundColumn>                    
                    <telerik:GridBoundColumn DataField="BSChiDinh" HeaderText="Bác sỹ" ReadOnly="true" SortExpression="BSChiDinh" UniqueName="BSChiDinh"
                          
                          ItemStyle-Width="160px" HeaderStyle-Width="160px">                          
                    </telerik:GridBoundColumn>  
                  
                </Columns>
            </MasterTableView>
        </telerik:RadGrid> 
                     <telerik:RadGrid
                    Culture="vi-VN"
                    HeaderStyle-Font-Bold="true"
                    AutoGenerateColumns="false"
                    Height="578px"
                    OnItemCommand="grdDanhSach_ItemCommand"
                   
                    ShowFooter="false" AllowSorting="true" AllowPaging="false" PageSize="50" PagerStyle-Visible="true" AllowFilteringByColumn="false"
                     ID="grdDanhSach" GroupingSettings-CaseSensitive ="false" runat="server">
                    <ClientSettings>
                        <ClientEvents OnRowDblClick="DoubleRowDSBNClick"  />
                        <Scrolling AllowScroll="true" UseStaticHeaders="true" />
                    </ClientSettings>
                    <MasterTableView NoMasterRecordsText ="" NoDetailRecordsText="" AutoGenerateColumns="false" DataKeyNames="MaBN" EditMode="InPlace">
                      
                          <Columns>
                                 <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                            <telerik:GridBoundColumn ReadOnly="true" DataField="Hoten" UniqueName="Hoten" HeaderStyle-Width="150px" ItemStyle-Width="150px" HeaderText="Họ Tên"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="DiaChi" Display="true" ReadOnly="true" UniqueName="DiaChi" HeaderStyle-Width="150px" ItemStyle-Width="150px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn ReadOnly="true" DataField="MaBN" HeaderStyle-Width="80px" ItemStyle-Width="80px" HeaderText="Mã BN"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="NgaySinh" Display="false" ReadOnly="true" UniqueName="NgaySinh" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridCheckBoxColumn DataField="GT" Display="false" ReadOnly="true" UniqueName="GT" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridCheckBoxColumn>
                            <telerik:GridBoundColumn DataField="DienThoai" Display="false" ReadOnly="true" UniqueName="DienThoai" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                             <telerik:GridBoundColumn DataField="TENQG" Display="false" ReadOnly="true" UniqueName="TENQG" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="TENTINH" Display="false" ReadOnly="true" UniqueName="TENTINH" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="TENQH" Display="false" ReadOnly="true" UniqueName="TENQH" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                           <telerik:GridBoundColumn  DataField="TenDT" Display="false" ReadOnly="true" UniqueName="TENDT" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="Sothe" Display="false" ReadOnly="true" UniqueName="Sothe" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="giatritn" Display="false" ReadOnly="true" UniqueName="giatritn" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="GiaTriDN" Display="false" ReadOnly="true" UniqueName="GiaTriDN" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                            <telerik:GridBoundColumn DataField="TenBV" Display="false" ReadOnly="true" UniqueName="TenBV" HeaderStyle-Width="0px" ItemStyle-Width="0px"></telerik:GridBoundColumn>
                                                   </Columns>
                    </MasterTableView>
                </telerik:RadGrid>
                    </td>
                 <td width ="430px" id="tdkhoa" runat ="server">
           <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true"      
                   ID="grdKhoa" GroupingSettings-CaseSensitive ="false" runat="server"
                    AutoGenerateColumns="false" Visible="false"
                    GridLines="None"
             
                        HeaderStyle-Font-Bold="true"
                    Selecting-AllowRowSelect="true"                                
                 OnNeedDataSource ="grdKhoa_NeedDataSource" 
                      height="280px" width ="430px"
                    Skin="Default" 
                    ClientSettings-Scrolling-AllowScroll="true"
                  >
           
            
            <MasterTableView   ShowHeadersWhenNoRecords="true" AutoGenerateColumns="False" CommandItemDisplay="None" EditMode="InPlace"
                 HorizontalAlign="Center" >
                <Columns>                                                                   
                
                    <telerik:GridBoundColumn ItemStyle-Width="190px" HeaderStyle-Width="190px" DataField="TenKhoa" HeaderText="Khoa"
                         ReadOnly="true" SortExpression="TenKhoa" UniqueName="TenKhoa"
                     
                       >
                    </telerik:GridBoundColumn>   
                     <telerik:GridBoundColumn DataField="soLuotDangK" HeaderText="Số BN" ReadOnly="true" 
                         SortExpression="soLuotDangK" UniqueName="soLuotDangK"
                          AllowFiltering="false"
                          ItemStyle-Width="70px" HeaderStyle-Width="70px">                          
                    </telerik:GridBoundColumn> 
                   <telerik:GridBoundColumn DataField="SoLuotTD" HeaderText="T.đón S" ReadOnly="true"
                         SortExpression="SoLuotTD" UniqueName="SoLuotTD"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn>  
 		    <telerik:GridBoundColumn DataField="SoLuotTT" HeaderText="T.Toán S" ReadOnly="true"
                         SortExpression="SoLuotTT" UniqueName="SoLuotTT"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn> 
  	            <telerik:GridBoundColumn DataField="SoLuotCK" HeaderText="C.khám S" ReadOnly="true"
                         SortExpression="SoLuotCK" UniqueName="SoLuotCK"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn>  
                     <telerik:GridBoundColumn DataField="SoLuotDK" HeaderText="Đ.khám S" ReadOnly="true" SortExpression="SoLuotDK" UniqueName="SoLuotDK"
                          
                          ItemStyle-Width="90px" HeaderStyle-Width="90px">                          
                    </telerik:GridBoundColumn> 
                    <telerik:GridBoundColumn DataField="SoLuotTDC" HeaderText="T.đón C "  ReadOnly="true" SortExpression="SoLuotTDC" UniqueName="SoLuotTDC"
                          AllowFiltering="false"
                          ItemStyle-Width="60px" HeaderStyle-Width="60px">                          
                    </telerik:GridBoundColumn>  
                   
                    <telerik:GridBoundColumn DataField="SoLuotTTC" HeaderText="T.Toán C "  ReadOnly="true" SortExpression="SoLuotTTC" UniqueName="SoLuotTTC"
                          AllowFiltering="false"
                          ItemStyle-Width="60px" HeaderStyle-Width="60px">                          
                    </telerik:GridBoundColumn>  
                       
                   
                    <telerik:GridBoundColumn DataField="SoLuotCKC" HeaderText="C.khám C "  ReadOnly="true" SortExpression="SoLuotCKC" UniqueName="SoLuotCKC"
                          AllowFiltering="false"
                          ItemStyle-Width="60px" HeaderStyle-Width="60px">                          
                    </telerik:GridBoundColumn>  
                     
                     <telerik:GridBoundColumn DataField="SoLuotDKC" HeaderText="Đ.khám C" ReadOnly="true" SortExpression="SoLuotDKC" UniqueName="SoLuotDKC"
                          AllowFiltering="false"
                          ItemStyle-Width="70px" HeaderStyle-Width="70px">                          
                    </telerik:GridBoundColumn> 
                </Columns>
            </MasterTableView>
        </telerik:RadGrid> 
            </td>
                </tr>
            </table> 
                      </div>
            </telerik:RadPageView>
             <% } %>
             <%if (txtindextab.Value =="3")  %>
             <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView4" TabIndex="3">
                <fieldset align="center">
                    <legend>
                        <label>
                        </label>
                    </legend>
                    <div align="center">
                        <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="60%">

                            <tr>

                                <td width="80px">
                                    <asp:Label ID="Label23" runat="server" Text="Bác sĩ CĐ"></asp:Label>
                                </td>
                                <td width="50px">
                                    <asp:TextBox ID="txtBSTayY" TabIndex="1" runat="server" Enabled="true" Width="50px"
                                        OnTextChanged="txtBSTayY_TextChanged" AutoPostBack="true"></asp:TextBox>
                                </td>
                               
                                <td width="250px" >
                                    <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboBSTayY" runat="server"
                                        AppendDataBoundItems="false" AutoPostBack="false"
                                        DataSourceID="ObjectDanhMucNV" DataTextField="HoTen"
                                        DataValueField="MaNV" DropDownWidth="470px"
                                        CaseSensitive="false" CssClass="span-all"
                                        EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                        EnableVirtualScrolling="true" ExpandDirection="Down"
                                        Filter="Contains" HighlightTemplatedItems="true"
                                        MarkFirstMatch="true" ShowDropDownOnTextboxClick="true"
                                        ShowMoreResultsBox="true" Width="100%">
                                        <HeaderTemplate>
                                            <table class="NHTC_table_layout">
                                                <tr>
                                                    <td width="200px">Họ tên</td>
                                                    <td width="200px">Khoa</td>
                                                    <td width="70px">Mã NV</td>
                                                </tr>
                                            </table>
                                        </HeaderTemplate>
                                        <Items>
                                            <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                        </Items>
                                        <ItemTemplate>
                                            <table>

                                                <tr>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "HoTen") %></td>
                                                    <td width="200px"><%# DataBinder.Eval(Container.DataItem, "TenKhoa") %></td>
                                                    <td width="70px"><%# DataBinder.Eval(Container.DataItem, "MaNV") %></td>
                                                </tr>
                                            </table>
                                        </ItemTemplate>
                                    </telerik:RadComboBox>
                                </td>

                            </tr>
                        </table>
                    </div>
                </fieldset>
                <div class="contentWrapper">

                    <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdThuoc" runat="server"
                        Height="300px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                        OnDeleteCommand="grdDichVu_DeleteCommand"
                        OnUpdateCommand="grdDichVu_UpdateCommand"
                        OnInsertCommand="grdDichVu_InsertCommand"
                        OnItemDataBound="grdDichVu_ItemDataBound"
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                            KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                            AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" FrozenColumnsCount ="4" />

                        </ClientSettings>
                        <HeaderStyle Width="130px" />
                        <MasterTableView  AutoGenerateColumns="false"
                            CommandItemDisplay="None" HorizontalAlign="Center" DataKeyNames="STT">
                            <CommandItemSettings />

                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Sử Dụng" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>

                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STT"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STT"
                                    UniqueName="STT" ItemStyle-Width="30px"
                                    HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>

                                <telerik:GridTemplateColumn HeaderText="Tên thuốc" DataField="MaThuoc"
                                    UniqueName="MaThuoc" DataType="System.String" 
                                    HeaderStyle-Font-Bold="true" ItemStyle-Width="350px"
                                    HeaderStyle-Width="350px">
                                    <ItemTemplate>
                                        <%# Eval("TenTM")%>
                                    </ItemTemplate>
                                    <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"  ID="cboThuoc" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsThuoc" Width="100%"
                                            AutoPostBack="false"
                                            MarkFirstMatch="true"
                                            DataTextField="TenTM" DataValueField="MaThuoc"
                                            Filter="StartsWith"
                                            HighlightTemplatedItems="true"
                                            DropDownAutoWidth="Disabled"
                                            DropDownWidth="680px"
                                            DropDownHeight="200px"
                                            ExpandDirection="Up"
                                            OnItemDataBound="comboDataBound"
                                            OnClientSelectedIndexChanged="OnClientSelectedIndexChanged"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                            EnableAutomaticLoadOnDemand="true">
                                            <HeaderTemplate>
                                                <table>
                                                    <tr width="100%">

                                                        <td width="260px">Tên thuốc</td>
                                                        <td width="50px">ĐVT</td>
                                                        <td width="70px">Tồn CK</td>
                                                        <td width="70px">Đơn giá TT</td>
                                                        <td width="260px">Hoạt chất</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                <table>
                                                    <tr width="100%">

                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenTM") %>
                                                        </td>
                                                        <td width="50px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenDVT") %>
                                                        </td>
                                                        <td align="right" width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TonCK", "{0:#,###.##}")%>
                                                        </td>
                                                        <td width="70px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaTT") %>
                                                        </td>
                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenGoc") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox></InsertItemTemplate>
                                </telerik:GridTemplateColumn>


                                <telerik:GridTemplateColumn DataField="TENDVT"
                                    HeaderText="ĐVT" SortExpression="TENDVT" UniqueName="TENDVT">
                                    <ItemTemplate>
                                        <asp:Label ID="lbTENDVT" runat="server" readonly="true" Enabled="false"
                                            Text='<%# Eval("TENDVT") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>

                                        <asp:TextBox ID="tbTENDVT" runat="server" Text='<%# Bind("TENDVT") %>'
                                            Enabled="false"></asp:TextBox>

                                    </EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaTT"
                                    HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" 
                                    UniqueName="DonGiaTT">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaTT", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>


                                        <asp:TextBox Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaTT", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaBH"
                                    HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" 
                                    UniqueName="DonGiaBH">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaBH", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>


                                        <asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBH", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="BHTinhTien"
                                    HeaderText="BH"  DefaultInsertValue="false"
                                    UniqueName="BHTinhTien">
                                    <ItemTemplate>
                                        <asp:CheckBox ID="chBH" runat="server"
                                            readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                    </ItemTemplate>
                                    <EditItemTemplate><asp:CheckBox Enabled="false" ID="chkBH" runat="server"
                                            Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'
                                            readonly="true"></asp:CheckBox></EditItemTemplate>
                                    <HeaderStyle Width="40px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="SLMua"
                                    HeaderText="SL" 
                                    UniqueName="SLMua">
                                    <ItemTemplate>
                                        <asp:Label ID="lbUnit" runat="server"
                                            Text='<%# Eval("SLMua", "{0:#,###.###}") %>' Width="50px"> </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadNumericTextBox ID="tbSoLuong" runat="server"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("SLMua", "{0:#,###.###}") %>'
                                            Width="50px">
                                        </telerik:RadNumericTextBox></EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                    HeaderText="Tự túc"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="TinhTien">
                                </telerik:GridCheckBoxColumn>

                                <telerik:GridBoundColumn DataField="lieudung" HeaderText="Liều dùng"
                                    UniqueName="lieudung" ItemStyle-Width="170px"
                                    HeaderStyle-Width="170px">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn DataField="cachdung" HeaderText="Cách dùng"
                                    UniqueName="cachdung" ItemStyle-Width="170px"
                                    HeaderStyle-Width="170px">
                                </telerik:GridBoundColumn>




                                <telerik:GridBoundColumn DataField="DATT" HeaderText="Đã TT"
                                    ReadOnly="true" SortExpression="DATT" UniqueName="DATT" Display="false">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true"
                                    SortExpression="MaSoKham" UniqueName="MaSoKham" Display="false">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="STTKhoa" HeaderText="STT khoa"
                                    ReadOnly="true" SortExpression="STTKhoa" UniqueName="STTKhoa" Display="false">
                                </telerik:GridBoundColumn>


                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>


                                <telerik:GridBoundColumn DataField="tenkhoa"
                                    HeaderText="Tên khoa" ReadOnly="true"
                                    SortExpression="tenkhoa" UniqueName="tenkhoa">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>

                </div>
            </telerik:RadPageView>
             <% } %>
             <%if (txtindextab.Value =="4")  %>
             <% { %>
            <telerik:RadPageView runat="server" ID="RadPageView5" TabIndex="4">
                <div class="contentWrapper">

                    <telerik:RadGrid TabIndex="1" Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdDanhSachDY" runat="server"
                        Height="150px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                          OnDeleteCommand="grdDichVu_DeleteCommand"
                      
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                            KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                            AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />
                            <ClientEvents OnRowClick="RowDblClickForGrdDichVu" />
                        </ClientSettings>
                        <HeaderStyle Width="100px"></HeaderStyle>
                        <MasterTableView  AutoGenerateColumns="false" CommandItemDisplay="None" HorizontalAlign="Center"
                            DataKeyNames="MaSoKham,STT">
                            <CommandItemSettings />
                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Đông Y" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>
                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STT"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STT"
                                    UniqueName="STT" ItemStyle-Width="30px" HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="60px" HeaderStyle-Width="60px" DataField="SLThang" HeaderText="SL Thang" ReadOnly="true" SortExpression="SLThang" UniqueName="SLThang">
                                </telerik:GridBoundColumn>



                                <telerik:GridTemplateColumn DataField="TongDon"
                                    HeaderText="Tổng đơn" ItemStyle-HorizontalAlign="Right" SortExpression="TongDon"
                                    UniqueName="TongDon">
                                    <ItemTemplate><asp:Label Enabled="false" ID="lbTongDon" runat="server"
                                            readonly="true" Text='<%# Eval("TongDon", "{0:C}") %>'>&nbsp;  </asp:Label></ItemTemplate>

                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                    HeaderText="Tự túc"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="TinhTien">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                    SortExpression="NgayLap" UniqueName="NgayLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                     UniqueName="TenNguoiLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                    SortExpression="NgaySD" UniqueName="NgaySD">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                     UniqueName="TenNguoiSD">
                                </telerik:GridBoundColumn>



                                <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true" SortExpression="MaSoKham" UniqueName="MaSoKham">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>
                    <fieldset align="center" >
                        <legend>
                            <label>
                            </label>
                        </legend>
                        <div align="center">
                            <table cellpadding="5" cellspacing="5" class="data-form-in-grid" width="70%">

                                <tr>
                                    <td>
                                        <asp:Label ID="Label1" runat="server" Text="Nhập hỗ trợ"></asp:Label>
                                    </td>
                                    <td  width ="140px">
                                        <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboNhapHoTroDY" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsNhapHoTroDY"
                                            AutoPostBack="true" 
                                            OnSelectedIndexChanged="cboNhapHoTroDY_SelectedIndexChanged"
                                            DataTextField="NgayDK" DataValueField="MaSoKhamSTT" DropDownWidth="470px"
                                            EnableVirtualScrolling="true"
                                            EnableLoadOnDemand="true"
                                            EnableAutomaticLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            Filter="Contains">
                                            <HeaderTemplate>
                                                <table class="NHTC_table_layout">
                                                    <tr>


                                                        <td width="80px">Ngày ĐK</td>

                                                        <td width="200px">Bác sỹ khám</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                <table>

                                                    <tr>
                                                        <td width="80px">
                                                            <%# DataBinder.Eval(Container.DataItem, "NgayDK") %>
                                                        </td>


                                                        <td width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenBSChiDinh")%>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>
                                    </td>

                            
                                    <td width="80px">
                                        <asp:Label ID="Label19" runat="server" Text="Bác sĩ CĐ"></asp:Label>
                                    </td>
                                    <td width="50px">
                                        <asp:TextBox ID="txtBSDongY" TabIndex="1" runat="server" Enabled="true" Width="50px" OnTextChanged="txtBSDongY_TextChanged" AutoPostBack="true"></asp:TextBox>
                                    </td>
                                     
                                    <td colspan ="3">
                                        <telerik:RadComboBox  IsCaseSensitive ="false"  TabIndex="1" ID="cboBSDongY" runat="server"
                                            AppendDataBoundItems="False" AutoPostBack="false"
                                            CaseSensitive="false" CssClass="span-all"
                                            DataSourceID="ObjectDanhMucNV" DataTextField="HoTen"
                                            DataValueField="MaNV" DropDownWidth="470px"
                                            EnableAutomaticLoadOnDemand="true" EnableLoadOnDemand="true"
                                            EnableVirtualScrolling="true" ExpandDirection="Down"
                                            Filter="Contains" HighlightTemplatedItems="true"
                                             MarkFirstMatch="true" ShowDropDownOnTextboxClick="true"
                                            ShowMoreResultsBox="true" Width="100%">
                                            <HeaderTemplate>
                                                <table class="NHTC_table_layout">
                                                    <tr>
                                                        <td width="200px">Họ tên</td>
                                                        <td width="200px">Khoa</td>
                                                        <td width="70px">Mã NV</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                <table>

                                                    <tr>
                                                        <td width="200px"><%# DataBinder.Eval(Container.DataItem, "HoTen") %></td>
                                                        <td width="200px"><%# DataBinder.Eval(Container.DataItem, "TenKhoa") %></td>
                                                        <td width="70px"><%# DataBinder.Eval(Container.DataItem, "MaNV") %></td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox>
                                    </td>

                                </tr>
                                <tr>

                                    <td width="70px">
                                        <asp:Label ID="Label16" runat="server" Text="SL thang"></asp:Label>
                                    </td>
                                         <td  width="70px">
                                 <asp:TextBox runat="server" TabIndex="1" ID="txtSLThang" OnTextChanged="txtSLThang_TextChanged"
                                     onkeypress=" return onlyNumbers(event)"
                                            AutoPostBack="true"></asp:TextBox>
                                              
                                               <asp:HiddenField ID ="txtTT" runat ="server" />
                                         </td>
                              

                                    <td width="70px">
                                        <asp:Label ID="Label3" runat="server" Text="Tổng đơn"></asp:Label>
                                    </td>
                                    <td colspan ="2">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtTongDon" Enabled ="false"></asp:TextBox>
                                    </td>

                                    <td width="70px">
                                        <asp:Label ID="Label5" runat="server" Text="SL Sắc"></asp:Label>
                                    </td>
                                    <td  width="70px">
                                        <asp:TextBox runat="server" TabIndex="1" ID="txtSLSac" OnTextChanged="txtSLSac_TextChanged" AutoPostBack="true"></asp:TextBox>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </fieldset>
                    <telerik:RadGrid Culture="vi-VN" ClientSettings-Resizing-AllowColumnResize="true" ID="grdThuocDY" runat="server"
                        Height="300px"
                        Skin="Default"
                        ShowFooter="false" AllowSorting="false" AllowPaging="false" PageSize="25" PagerStyle-Visible="true"
                        HeaderStyle-Font-Bold="true"
                        OnNeedDataSource="grdDichVu_NeedDataSource"
                        OnItemCommand="grdDichVu_ItemCommand"
                        OnDeleteCommand="grdDichVu_DeleteCommand"
                        OnUpdateCommand="grdDichVu_UpdateCommand"
                        OnInsertCommand="grdDichVu_InsertCommand"
                        OnItemDataBound="grdDichVu_ItemDataBound"
                        MasterTableView-EditMode="InPlace">
                        <ClientSettings AllowColumnsReorder="True" ReorderColumnsOnClient="True"
                            KeyboardNavigationSettings-AllowSubmitOnEnter="true" KeyboardNavigationSettings-EnableKeyboardShortcuts="true"
                            AllowKeyboardNavigation="true"    KeyboardNavigationSettings-AllowActiveRowCycle="true">
                            <Selecting AllowRowSelect="true" EnableDragToSelectRows="true" />
                            <Scrolling AllowScroll="True" UseStaticHeaders="true" SaveScrollPosition="true" />

                        </ClientSettings>
                        <HeaderStyle Width="100px"></HeaderStyle>
                        <MasterTableView  AutoGenerateColumns="false" CommandItemDisplay="None" HorizontalAlign="Center"
                            DataKeyNames="STT,STTThuoc">
                            <CommandItemSettings />
                            <EditFormSettings CaptionFormatString="Thông Tin Thuốc Đông Y" CaptionDataField="">
                                <EditColumn UpdateText="Cập Nhật" CancelText="Thoát"></EditColumn>
                            </EditFormSettings>
                            <Columns>

                                <telerik:GridEditCommandColumn ButtonType="ImageButton" UpdateText="Enter-Ghi" CancelText="ESC-Không ghi"
                                    UniqueName="Edit"
                                    EditText="Sửa" InsertText="Enter-Ghi"
                                    ItemStyle-Width="60px" HeaderStyle-Width="60px"
                                    ItemStyle-HorizontalAlign="Center">
                                </telerik:GridEditCommandColumn>
                                <telerik:GridButtonColumn ButtonType="ImageButton" CommandName="Delete" UniqueName="Delete"
                                    ConfirmDialogType="RadWindow" ConfirmText="Xóa dịch vụ ?" ConfirmTitle="Delete"
                                    HeaderText="" Text="Delete">
                                    <HeaderStyle Width="20px" HorizontalAlign="Center" />
                                </telerik:GridButtonColumn>
                                <telerik:GridBoundColumn DataField="STTThuoc"
                                    FooterAggregateFormatString="Tổng số: {0} "
                                    HeaderText="STT" SortExpression="STTThuoc"
                                    UniqueName="STTThuoc" ItemStyle-Width="30px" HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>
                                 <telerik:GridBoundColumn DataField="STT"
                                 
                                    HeaderText="STT" SortExpression="STT" Display="false"
                                    UniqueName="STT" ItemStyle-Width="30px" HeaderStyle-Width="30px" ReadOnly="true">
                                </telerik:GridBoundColumn>


                                <telerik:GridTemplateColumn HeaderText="Tên thuốc"
                                    DataField="MaThuoc" UniqueName="MaThuoc" DataType="System.String"
                                    ItemStyle-Width="260px" HeaderStyle-Width="260px"
                                     HeaderStyle-Font-Bold="true">
                                    <ItemTemplate>
                                        <%# Eval("TenTM")%>
                                    </ItemTemplate>
                                    <InsertItemTemplate><telerik:RadComboBox  IsCaseSensitive ="false"  ID="cboThuoc" runat="server"
                                            AppendDataBoundItems="True" CssClass="span-all"
                                            DataSourceID="odsThuocDY" Width="100%"
                                            AutoPostBack="false"
                                            DataTextField="TenTM" DataValueField="MaThuoc"
                                            Filter="Contains"
                                            MarkFirstMatch="true"
                                            HighlightTemplatedItems="true"
                                            DropDownAutoWidth="Disabled"
                                            DropDownWidth="680px"
                                            DropDownHeight="200px"
                                            ExpandDirection="Up"
                                            OnItemDataBound="comboDataBound"
                                            EnableLoadOnDemand="true"
                                            ItemsPerRequest="50"
                                            ShowMoreResultsBox="true"
                                            ShowDropDownOnTextboxClick="true" CaseSensitive="false"
                                            EnableAutomaticLoadOnDemand="true"
                                            OnClientSelectedIndexChanged="OnClientSelectedIndexChanged">
                                            <HeaderTemplate>
                                                <table width="100%">
                                                    <tr>
                                                        <td width="30px">STT<td>
                                                            <td width="260px">Tên thuốc</td>
                                                            <td width="50px">ĐVT</td>
                                                            <td width="70px">Tồn CK</td>

                                                            <td width="50px">Đơn giá TT</td>
                                                            <td width="50px">Đơn giá BH</td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
                                            <Items>
                                                <telerik:RadComboBoxItem runat="server" Text="" Value="" />
                                            </Items>
                                            <ItemTemplate>
                                                <table width="100%">
                                                    <tr>

                                                        <td width="260px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenTM") %>
                                                        </td>
                                                        <td width="50px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TenDVT") %>
                                                        </td>
                                                        <td align="right" width="70px">
                                                            <%# DataBinder.Eval(Container.DataItem, "TonCKD", "{0:#,###}")%>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaD") %>
                                                        </td>
                                                        <td width="50px" align="right">
                                                            <%# DataBinder.Eval(Container.DataItem, "DongiaBHD") %>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </ItemTemplate>
                                        </telerik:RadComboBox></InsertItemTemplate>
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="DonGiaD"
                                    HeaderText="Đơn giá TT" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaD"
                                    UniqueName="DonGiaD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceTT" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate>
                                        <asp:TextBox Enabled="false" ID="tbUnitPriceTT" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaD", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="DonGiaBHD"
                                    HeaderText="Đơn giá BH" ItemStyle-HorizontalAlign="Right" SortExpression="DonGiaBHD"
                                    UniqueName="DonGiaBHD">
                                    <ItemTemplate>
                                        <asp:Label Enabled="false" ID="lbUnitPriceBH" runat="server"
                                            readonly="true" Text='<%# Eval("DonGiaBHD", "{0:C}") %>'>&nbsp;  </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate><asp:TextBox Enabled="false" ID="tbUnitPriceBH" runat="server" ReadOnly="true"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("DonGiaBHD", "{0:C}") %>'
                                            Width="70px">
                                        </asp:TextBox></EditItemTemplate>
                                    <HeaderStyle Width="80px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridTemplateColumn DataField="BHTinhTien"
                                    HeaderText="BH" 
                                    UniqueName="BHTinhTien">
                                    <ItemTemplate>
                                        <asp:CheckBox ID="chBH" runat="server"
                                            readonly="true" Checked='<%# Eval("BHTinhTien") %>'></asp:CheckBox>
                                    </ItemTemplate>
                                    <EditItemTemplate>
                                        <asp:CheckBox Enabled="false" ID="chkBH" runat="server"
                                            readonly="true"
                                            Checked='<%# (DataBinder.Eval(Container.DataItem,"BHTinhTien") is DBNull ?false:Eval("BHTinhTien")) %>'></asp:CheckBox>
                                    </EditItemTemplate>
                                    <HeaderStyle Width="40px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>

                                <telerik:GridTemplateColumn DataField="SoLuongD"
                                    HeaderText="SL" SortExpression="SoLuongD"
                                    UniqueName="SoLuongD">
                                    <ItemTemplate>
                                        <asp:Label ID="lbUnit" runat="server"
                                            Text='<%# Eval("SoLuongD", "{0:#,###.###}") %>' Width="50px"> </asp:Label>
                                    </ItemTemplate>
                                    <EditItemTemplate><telerik:RadNumericTextBox ID="tbSoLuong" runat="server"
                                            NumberFormat-DecimalDigits="0" Text='<%# Bind("SoLuongD", "{0:#,###.###}") %>'
                                            Width="50px">
                                        </telerik:RadNumericTextBox>

                                    </EditItemTemplate>
                                    <HeaderStyle Width="60px" />
                                    <ItemStyle HorizontalAlign="Right" />
                                </telerik:GridTemplateColumn>
                                <telerik:GridCheckBoxColumn DataField="TinhTien" DataType="System.Boolean"
                                    HeaderText="Tự túc"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="TinhTien">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridBoundColumn DataField="ThanhTien" HeaderText="Thành Tiền" ReadOnly="true"  UniqueName="ThanhTien">
                                </telerik:GridBoundColumn>

                                <telerik:GridCheckBoxColumn DataField="Huy" DataType="System.Boolean"
                                    HeaderText="Hủy" ReadOnly="true"
                                    
                                    HeaderStyle-Width="50px"
                                     UniqueName="Huy">
                                </telerik:GridCheckBoxColumn>
                                <telerik:GridBoundColumn DataField="NgayLap" HeaderText="Ngày lập" ReadOnly="true"
                                    SortExpression="NgayLap" UniqueName="NgayLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn ItemStyle-Width="200px" HeaderStyle-Width="200px" DataField="TenNguoiLap" HeaderText="Người Lập" ReadOnly="true"
                                     UniqueName="TenNguoiLap">
                                </telerik:GridBoundColumn>
                                <telerik:GridBoundColumn DataField="NgaySD" HeaderText="Ngày SD" ReadOnly="true"
                                    SortExpression="NgaySD" UniqueName="NgaySD">
                                </telerik:GridBoundColumn>

                                <telerik:GridBoundColumn DataField="TenNguoiSD" HeaderText="Người SD" ItemStyle-Width="180px" HeaderStyle-Width="180px" ReadOnly="true"
                                     UniqueName="TenNguoiSD">
                                </telerik:GridBoundColumn>



                                <telerik:GridBoundColumn DataField="MaSoKham" HeaderText="Mã số khám" ReadOnly="true" SortExpression="MaSoKham" UniqueName="MaSoKham">
                                </telerik:GridBoundColumn>

                            </Columns>
                        </MasterTableView>
                    </telerik:RadGrid>

                </div>
            </telerik:RadPageView>
             <% } %>
           
        </telerik:RadMultiPage>
    </div>
        

   
    <div >
        <table >
            <tr>
               <td  width="450px" > </td>
                 <td width="367px" style="text-align:right">
                            <asp:Label ID="Label33" runat="server" width="67px" Text="Mã BN" ></asp:Label>
                        </td>
                        <td  width="150px" >
                            <asp:TextBox TabIndex="1" runat="server" ID="txtMaBNKT"
                                width="90px" MaxLength="20"
                                 AutoPostBack="true" OnTextChanged="txtmabnKT_TextChanged"></asp:TextBox>

                        </td>
            </tr>
        </table>
    </div>
      
    
        </div>
    <%if (txtindextab.Value == "3")  %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="180" ID="odsThuoc" runat="server" OnSelecting="odsThuocTY_Selecting" EnableViewState="true"
        SelectMethod="FindDMThuocTonKho"
        CacheKeyDependency="HTC.Business.CategoryList.DMThuoc_TonKhoList.FindDMThuocTonKho" TypeName="HTC.Business.CategoryList.DMThuoc_TonKhoList">
        <SelectParameters>
            <asp:Parameter Name="MaKho" Type="String" DefaultValue="" />
            <asp:Parameter Name="Thang" Type="DateTime" DefaultValue="" />
           <asp:Parameter Name="dk" Type="String" DefaultValue="" />

        </SelectParameters>
    </asp:ObjectDataSource>
    <% } %>
    <%if (txtindextab.Value == "4")  %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="60" ID="odsThuocDY" runat="server" SelectMethod="FindDMThuocKhoaTenDY"
        TypeName="HTC.Business.CategoryList.DMThuocKhoaList" EnableViewState="true" OnSelecting="odsThuoc_VT_HC_M_Selecting">
        <SelectParameters>
            <asp:Parameter Name="maKhoa" Type="String" />
            <asp:Parameter Name="maDT" Type="String" />
            <asp:Parameter Name="Ten" Type="String" DefaultValue="" />
            <asp:Parameter Name="loai" Type="Byte" DefaultValue="1" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <% } %>
    <%if (txtindextab.Value == "2")  %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="600" ID="odsDichVu" runat="server" SelectMethod="FindDMDichVu_Gia_DTByMa" OnSelecting="odsDichVu_Selecting"
        TypeName="HTC.Business.CategoryList.DMDichVu_Gia_DTList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="MaDV" Type="String" DefaultValue="" />
            <asp:Parameter Name="MaDT" Type="String" DefaultValue="" />
            <asp:Parameter Name="NoiTT" Type="String" DefaultValue="" />

        </SelectParameters>
    </asp:ObjectDataSource>
      <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="180" ID="cdsKhoaKB" runat="server"
        SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMKhoaListcb" EnableViewState="true"></asp:ObjectDataSource>
 
    <% } %>


    <asp:ObjectDataSource ID="ObjectDanhMucNV" runat="server" SelectMethod="FindDMNhanVienByMa"
        TypeName="HTC.Business.CategoryList.DMNhanVienList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="ma" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>

    
    <%if (!(txtloaiphieu.Value == "7" && txtloaiphieu.Value == "77"))  %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="true" CacheExpirationPolicy="Absolute" CacheDuration="600" ID="ObjectDanhMucBenh" runat="server" SelectMethod="FindDMBenhTatByMa"
        TypeName="HTC.Business.CategoryList.DMBenhTatList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="MaDV" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <% } %>
      <asp:ObjectDataSource  ID="odsDanToc" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMDantocListcb" EnableViewState="true"></asp:ObjectDataSource>

    <asp:ObjectDataSource ID="odsNgheNghiep" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMNgheNghiepListcb" EnableViewState="true"></asp:ObjectDataSource>
    <asp:ObjectDataSource ID="odsLoaiBN" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMLoaiBNListcb" EnableViewState="true"></asp:ObjectDataSource>
    <asp:ObjectDataSource ID="odsChuyenKhoa" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMChuyenKhoaListcb" EnableViewState="true"></asp:ObjectDataSource>
    <asp:ObjectDataSource ID="odsDoiTuong" runat="server" SelectMethod="GetList"  
        TypeName="HTC.Business.CategoryList.DMDoituongListcb" EnableViewState="true">
        
    </asp:ObjectDataSource>
    <asp:ObjectDataSource EnableCaching="false" CacheExpirationPolicy="Absolute" CacheDuration="180" ID="cdsKhoa" runat="server"
        SelectMethod="GetListByAccount" TypeName="HTC.Business.CategoryList.DMKhoaListcb" OnSelecting="cdsKhoa_Selecting"
         EnableViewState="true">
         <SelectParameters>
            <asp:Parameter Name="account" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
   <asp:ObjectDataSource ID="odsquocgia" runat="server" SelectMethod="GetList" TypeName="HTC.Business.CategoryList.DMQuocGiaListcb" EnableViewState="true"></asp:ObjectDataSource>

    <asp:ObjectDataSource ID="odstinh" runat="server" SelectMethod="GetList"
        TypeName="HTC.Business.CategoryList.DMTinhListcb" EnableViewState="true"></asp:ObjectDataSource>

    <asp:ObjectDataSource ID="odshuyen" runat="server" SelectMethod="GetListbyTinh" OnSelecting="odshuyen_Selecting"
        TypeName="HTC.Business.CategoryList.DMQuanHuyenListcb" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="matinh" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
   <asp:ObjectDataSource ID="odspxa" runat="server" SelectMethod="GetListbyQH" OnSelecting="odspxa_Selecting"
        TypeName="HTC.Business.CategoryList.DMPhuongXaListcb" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="maQH" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <%if ((txtloaiphieu.Value == "7" && txtloaiphieu.Value == "77"))  %>
    <% { %>
    <asp:ObjectDataSource ID="odsNhapHoTroDY" runat="server" SelectMethod="GetAllKhamBenh_ThuocSD_DY" OnSelecting="odsNhapHoTroDY_Selecting"
        TypeName="HTC.Business.PhongKham.KhamBenh_ThuocSD_DYList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="masokham" Type="String" DefaultValue="000000000000" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <% } %>
    <% if ((txtloaiphieu.Value == "1") || txtloaiphieu.Value == "2")  %>
    <% { %>
    <asp:ObjectDataSource EnableCaching="true" CacheExpirationPolicy="Absolute" CacheDuration="600" ID="odsNoiDK" runat="server" SelectMethod="FindDMBenhVienByMa" TypeName="HTC.Business.CategoryList.DMBenhVienList" EnableViewState="true">
        <SelectParameters>
            <asp:Parameter Name="MaBV" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:ObjectDataSource>
    <% } %>
</asp:Content>

