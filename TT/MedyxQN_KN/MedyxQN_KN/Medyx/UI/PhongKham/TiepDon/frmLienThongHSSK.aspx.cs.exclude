using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using CrystalDecisions.CrystalReports.Engine;
using HTC.Business.PhongKham;
using HTC.Business.CategoryList;
using HTC.Common.Web;
using Telerik.Web.UI;
using Microsoft.ApplicationBlocks.Data;
using System.IO;
using System.Xml;
using System.Text;
using System.Xml.Serialization;
using System.Net;
using System.Data.SqlClient;
using Newtonsoft.Json;
using System.Web.Script.Serialization;
using System.Net.Http;
using System.Net.Http.Headers;

public partial class UI_PhongKham_KhamBenh_frmLienThongHSSK : WebBase
{
    private const string ViewState_DSBNList = "_DSBNList";
    private object rblNhomKhoa;

    public DSBNList _DSBNList
    {
        get
        {
            return (DSBNList)ViewState[ViewState_DSBNList];
        }
        set
        {
            ViewState[ViewState_DSBNList] = value;
        }
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            dtTuNgay.Text = DateTime.Now.ToString("dd/MM/yyyy");
            SetData();
            grdDanhSach.DataSource = "";
            LoadData();
        }
    }
    protected void SetData()
    {
        HTC.Business.CategoryList.DMKhoaListcb list = HTC.Business.CategoryList.DMKhoaListcb.GetListByAccount(Pub_sAccount);
        cboDsKhoa.DataSource = list;
        cboDsKhoa.DataBind();
    }
    private void LoadData()
    {
        DateTime tungay = DateTime.Parse(dtTuNgay.Text);
        string dk = "";
        int loai = int.Parse(rblNhomKhoa.SelectedValue);
        _DSBNList = DSBNList.GetAll(cboDsKhoa.SelectedValue, tungay, tungay, loai, dk, false);
        grdDanhSach.DataSource = _DSBNList;
        grdDanhSach.DataBind();
    }
    protected void baraction_ButtonClick(object sender, RadToolBarEventArgs e)
    {
        try
        {
            if (((RadToolBarButton)e.Item).CommandName.Equals("cmdExit", StringComparison.InvariantCultureIgnoreCase))
            {
                Response.Redirect("~/Default.aspx");
            }
            else if (((RadToolBarButton)e.Item).CommandName.Equals("cmdView", StringComparison.InvariantCultureIgnoreCase))
            {
                LoadData();
            }
            else if (((RadToolBarButton)e.Item).CommandName.Equals("cmdSave", StringComparison.InvariantCultureIgnoreCase))
            {
                if (_DSBNList.Count > 0)
                {
                    UpdateDataSave();
                }
                else
                {
                    ShowMessage("Không có dữ liệu để liên thông hồ sơ sức khỏe!");
                    return;
                }
            }
        }
        catch (Exception ex)
        {
            ShowMessage("Không thực hiện được yêu cầu" + ex.Message);
            return;
        }
    }
    protected void cboDsKhoa_SelectedIndexChanged(object sender, RadComboBoxSelectedIndexChangedEventArgs e)
    {
        LoadData();
    }
    protected void grdDanhSach_NeedDataSource(object sender, Telerik.Web.UI.GridNeedDataSourceEventArgs e)
    {
        if (_DSBNList != null)
        {
            grdDanhSach.DataSource = _DSBNList;
        }
    }
    protected void rblNhomKhoa_SelectedIndexChanged(object sender, EventArgs e)
    {
        LoadData();
    }
    protected void dtTuNgay_TextChanged(object sender, EventArgs e)
    {
        LoadData();
    }
    public void UpdateDataSave()
    {
        DateTime tungay = DateTime.Parse(dtTuNgay.Text);
        string dk = "";
        int loai = int.Parse(rblNhomKhoa.SelectedValue);
        string tokenPID = "";
        string tokenUpdate = "";
        string portPID = "";
        string usernamePID = "";
        string passwordPID = "";
        string loaitoken = "HSSKTokenPID";
        DataTable dt = GetPort(loaitoken);
        if (dt.Rows.Count > 0)
        {
            portPID = dt.Rows[0][0].ToString();
            usernamePID = dt.Rows[0][1].ToString();
            passwordPID = dt.Rows[0][2].ToString();
        }
        loaitoken = "HSSKTokenUpdate";
        dt = GetPort(loaitoken);
        string portUpdate = "";
        string usernameUpdate = "";
        string passwordUpdate = "";
        if (dt.Rows.Count > 0)
        {
            portUpdate = dt.Rows[0][0].ToString();
            usernameUpdate = dt.Rows[0][1].ToString();
            passwordUpdate = dt.Rows[0][2].ToString();
        }
        for (int i = 0; i < _DSBNList.Count; i++)
        {
            string pid = _DSBNList[i].maYTeCaNhan;
            if (string.IsNullOrEmpty(pid) || pid == "" || pid.Length == 0)
            {
                //chua co ma dinh danh ca nhan
                if (tokenPID == "")
                {
                    tokenPID = GetTokenPID(portPID, usernamePID, passwordPID);
                }
                //WriteLog("tokenPID: " + tokenPID);
                pid = GetPID(portPID, usernamePID, passwordPID, tokenPID, _DSBNList[i].MaBN, cboDsKhoa.SelectedValue, tungay, tungay, loai, dk, false);
                //WriteLog("pid: " + pid);
            }
            if (!string.IsNullOrEmpty(pid) && pid.Length > 0)
            {
                //update hssk
                if (tokenUpdate == "")
                {
                    tokenUpdate = GetTokenUpdate(portUpdate, usernameUpdate, passwordUpdate);
                }
                UpdateHSSK(portUpdate, usernameUpdate, passwordUpdate, tokenUpdate, _DSBNList[i], cboDsKhoa.SelectedValue, tungay, tungay, loai, dk, false);
            }
        }
        ShowMessage("Liên thông dữ liệu thành công!");
        LoadData();
    }
    //ham lay url cua API lien thong HSSK
    public DataTable GetPort(string loai)
    {
        DataTable dr = new DataTable();
        string tenStore = "PACS_Port_Get";
        string StrConection = ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        using (SqlConnection Conection = new SqlConnection(StrConection))
        {
            Conection.Open();
            using (SqlCommand Command = new SqlCommand(tenStore, Conection))
            {
                Command.CommandType = CommandType.StoredProcedure;
                Command.Parameters.Add(new SqlParameter("@Loai", loai));
                SqlDataAdapter dp = new SqlDataAdapter(Command);
                dp.Fill(dr);
            }
            //if (dr.Rows.Count > 0)
            return dr;
            //else
            //    return "";
        }
    }
    #region Token
    //ham lay token API de lay PID 
    //ktra trong bang HSSKTokenAPI xem đã có token mà thời gian lấy token < thời gian hiện tại 25 phút thì lấy, neu khong thi goi API de lay token moi va luu token lay duoc vao bang HSSKTokenAPI
    //Loai=HSSKTokenPID
    public string GetTokenPID(string port, string username, string password)
    {
        string loai = "HSSKTokenPID";
        DataTable dr = new DataTable();
        string tenStore = "spHSSKTokenAPI_Get";
        string StrConection = ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        using (SqlConnection Conection = new SqlConnection(StrConection))
        {
            Conection.Open();
            using (SqlCommand Command = new SqlCommand(tenStore, Conection))
            {
                Command.CommandType = CommandType.StoredProcedure;
                Command.Parameters.Add(new SqlParameter("@Loai", loai));
                SqlDataAdapter dp = new SqlDataAdapter(Command);
                dp.Fill(dr);
            }
            if (dr.Rows.Count > 0)
                return dr.Rows[0][0].ToString();
            else
            {
                //chua co token trong ngay hoac token da qua han
                //lay token moi
                string url = port + "/Services/PID/thongTinBenhNhan/Login";
                //WriteLog("GetTokenPID url: " + url);
                Hilo h = new Hilo();
                string xau = h.GetTokenPID(url, username, password);
                //WriteLog(xau);
                //string value = HttpUtility.UrlEncode(HttpUtility.HtmlEncode(xau), Encoding.GetEncoding("iso-8859-1"));
                var returndata = JsonConvert.DeserializeObject<LoginError>(xau);
                //return returndata.token;
                string token = returndata.Token;
                if (!string.IsNullOrEmpty(token) && token.Length > 0)
                    CreateToken(loai, token);
                else WriteLog(xau);
                return token;
            }
        }
    }
    //ham lay token API de lay Update HSSK 
    //ktra trong bang HSSKTokenAPI xem da có token mà thời gian lấy token < thời gian hiện tại 25 phút thì lấy, neu khong thi goi API de lay token moi va luu token lay duoc vao bang HSSKTokenAPI
    //Loai=HSSKTokenUpdate
    public string GetTokenUpdate(string port, string username, string password)
    {
        string loai = "HSSKTokenUpdate";
        DataTable dr = new DataTable();
        string tenStore = "spHSSKTokenAPI_Get";
        string StrConection = ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        using (SqlConnection Conection = new SqlConnection(StrConection))
        {
            Conection.Open();
            using (SqlCommand Command = new SqlCommand(tenStore, Conection))
            {
                Command.CommandType = CommandType.StoredProcedure;
                Command.Parameters.Add(new SqlParameter("@Loai", loai));
                SqlDataAdapter dp = new SqlDataAdapter(Command);
                dp.Fill(dr);
            }
            if (dr.Rows.Count > 0)
                return dr.Rows[0][0].ToString();
            else
            {
                //chua co token trong ngay hoac token da qua han
                //lay token moi
                string url = port + "/api/authenticate";
                //WriteLog(url);
                Hilo h = new Hilo();
                string json = "{\"username\":\"" + username + "\",\"password\":\"" + password + "\"}";
                //WriteLog(json);
                string xau = h.PostURL(url, json);
                //string value = HttpUtility.UrlEncode(HttpUtility.HtmlEncode(xau), Encoding.GetEncoding("iso-8859-1"));
                var returndata = JsonConvert.DeserializeObject<LoginError>(xau);
                //return returndata.token;
                string token = returndata.id_token;
                //WriteLog(token);
                if (!string.IsNullOrEmpty(token) && token.Length > 0)
                    CreateToken(loai, token);
                else WriteLog(xau);
                return token;
            }
        }
    }
    //Ham de ghi token vao bang HSSKTokenAPI
    public void CreateToken(string loai, string token)
    {
        DataTable dr = new DataTable();
        string tenStore = "spHSSKTokenAPI_Token_CREATE";
        string StrConection = ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        using (SqlConnection Conection = new SqlConnection(StrConection))
        {
            Conection.Open();
            using (SqlCommand Command = new SqlCommand(tenStore, Conection))
            {
                Command.CommandType = CommandType.StoredProcedure;
                Command.Parameters.Add(new SqlParameter("@Token", token));
                Command.Parameters.Add(new SqlParameter("@Loai", loai));
                SqlDataAdapter dp = new SqlDataAdapter(Command);
                dp.Fill(dr);
            }
        }
    }
    #endregion
    //ham lay PID
    public string GetPID(string port, string username, string password, string token, string mabn, string makhoa, DateTime tunngay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        string url = port + "/Services/PID/thongTinBenhNhan/GetPID?token=" + token;
        //WriteLog("GetPID: url: " + url);
        //WriteLog(url);
        PID hd = PID.Get(mabn, makhoa, tunngay, denngay, loai, DK, qadmin);
        var h = new JavaScriptSerializer();
        string data = h.Serialize(hd);
        //WriteLog(data);
        Hilo hilo = new Hilo();
        string xau = hilo.PostURL(url, data);
        //WriteLog(xau);
        var returndata = JsonConvert.DeserializeObject<LoginError>(xau);
        if (!string.IsNullOrEmpty(returndata.PID))
        {
            //Cap nhat PID vao 2 bang thongtinbn và bảng benhnhan
            string sql = "";
            sql = " UPDATE thongtinbn SET MaYTe =N'" + returndata.PID + "' WHERE MaBN ='" + mabn + "'";
            HTC.Business.DataProvider.Instance().ExcSQL(sql);
            sql = " UPDATE benhnhan SET MaYTe =N'" + returndata.PID + "' WHERE MaBN ='" + mabn + "'";
            HTC.Business.DataProvider.Instance().ExcSQL(sql);
            return returndata.PID;
        }
        else
        {
            WriteLog(xau);
            return "";
        }
    }
    //ham update HSSK
    public string UpdateHSSK(string port, string username, string password, string token, DSBN dsbn, string makhoa, DateTime tunngay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        string url = port + "/api/upload";
        WriteLog("UpdateHSSK: url: " + url);
        //lay du lieu ra object DuLieuLienThongYTeCoSo de tao file xml input
        DuLieuLienThongYTeCoSo hd = DuLieuLienThongYTeCoSo.GetDuLieuLienThongYTeCoSo(dsbn, makhoa, tunngay, denngay, loai, DK, qadmin);
        //tao file xml
        string data = Serialize<DuLieuLienThongYTeCoSo>(hd);
        WriteLog(data);
        XmlSerializer ser = new XmlSerializer(typeof(DuLieuLienThongYTeCoSo));
        MemoryStream writer = new MemoryStream();
        ser.Serialize(writer, hd);
        writer.Position = 0;
        StreamContent fileStreamContent = new StreamContent(writer);
        using (var Client = new HttpClient())
        {
            Client.DefaultRequestHeaders.Authorization = new System.Net.Http.Headers.AuthenticationHeaderValue("Bearer", token);
            using (var formData = new MultipartFormDataContent())
            {
                //formData.Headers.TryAddWithoutValidation("Content-Type", "multipart/form-data");
                fileStreamContent.Headers.Add("Content-Type", "multipart/form-data");
                string filename = dsbn.MaSoKham + DateTime.Now.ToString("ddMMyyyyHHmmss") + ".xml";
                fileStreamContent.Headers.Add("Content-Disposition", "form-data; name=\"file\"; filename=\"" + filename + "\"");
                //fileStreamContent.Headers.ContentType = MediaTypeHeaderValue.Parse("multipart/form-data");
                //fileStreamContent.Headers.ContentDisposition = new ContentDispositionHeaderValue("file") { FileName = filename };
                //formData.Add(fileStreamContent);
                formData.Add(fileStreamContent, "file", filename);
                var response = Client.PostAsync(url, formData).Result;
                string xau = response.Content.ReadAsStringAsync().Result;
                WriteLog(xau);
                var returndata = JsonConvert.DeserializeObject<LoginError>(xau);
                if (response.IsSuccessStatusCode)
                {
                    //gui thanh cong
                    if (!string.IsNullOrEmpty(returndata.maGiaoDich))
                    {
                        //ghi lai log + magiaodich
                        CreateMaGiaoDich(dsbn.MaSoKham, returndata.maGiaoDich, returndata.message, returndata.status.ToString(), Pub_sMaMay, Pub_sNguoiSD, xau);
                        writer.Close();
                        formData.Dispose();
                        Client.Dispose();
                        return returndata.maGiaoDich;
                    }
                }
                else
                {
                    //gui khong thanh cong
                    WriteLog(xau);
                    writer.Close();
                    formData.Dispose();
                    Client.Dispose();
                    return "";
                }
                writer.Close();
                formData.Dispose();
                Client.Dispose();
                return "";
            }
        }
        //Hilo h = new Hilo();

        //string xau = h.PostInvoice(url, token, data);
        ////string value = HttpUtility.UrlEncode(HttpUtility.HtmlEncode(xau), Encoding.GetEncoding("iso-8859-1"));

    }
    //Ham de ghi magiaodich vao bang hososuckhoe_lichsu 
    public void CreateMaGiaoDich(string masokham, string magiaodich, string thongbao, string trangthai, string mamay, string nguoilap, string chuoi)
    {
        DataTable dr = new DataTable();
        string tenStore = "spHoSoSucKhoe_LichSu_CREATE";
        string StrConection = ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        using (SqlConnection Conection = new SqlConnection(StrConection))
        {
            Conection.Open();
            using (SqlCommand Command = new SqlCommand(tenStore, Conection))
            {
                Command.CommandType = CommandType.StoredProcedure;
                Command.Parameters.Add(new SqlParameter("@MaSoKham", masokham));
                Command.Parameters.Add(new SqlParameter("@MaGiaoDich", magiaodich));
                Command.Parameters.Add(new SqlParameter("@ThongBao", thongbao));
                Command.Parameters.Add(new SqlParameter("@TrangThai", trangthai));
                Command.Parameters.Add(new SqlParameter("@MaMay", mamay));
                Command.Parameters.Add(new SqlParameter("@NguoiLap", nguoilap));
                Command.Parameters.Add(new SqlParameter("@Chuoi", chuoi));
                SqlDataAdapter dp = new SqlDataAdapter(Command);
                dp.Fill(dr);
            }
        }
    }
    //ham ghi log
    public static void WriteLog(string log)
    {
        string logname = "HSSK_Log_" + DateTime.Now.ToString("ddMMyyyy");
        //string fileName = HttpContext.Current.Request.MapPath("MyLogs.txt");
        string fileName = HttpContext.Current.Request.MapPath(logname);
        if (!File.Exists(fileName))
        {
            using (StreamWriter sw = File.CreateText(fileName))
            {
                sw.WriteLine(DateTime.Now.ToString() + " " + log);
                sw.Close();
            }
        }
        else
        {
            using (StreamWriter sw = File.AppendText(fileName))
            {
                sw.WriteLine(DateTime.Now.ToString() + " " + log);
                sw.Close();
            }
        }
    }
    public static string Serialize<T>(T dataToSerialize)
    {
        try
        {
            var stringwriter = new System.IO.StringWriter();
            var serializer = new XmlSerializer(typeof(T));
            serializer.Serialize(stringwriter, dataToSerialize);
            return stringwriter.ToString();
        }
        catch
        {
            throw;
        }
    }
}
#region class
public class DuLieuLienThongYTeCoSo
{
    private string _MaCSKCB = string.Empty;
    public string MaCSKCB
    {
        get
        {
            return _MaCSKCB;
        }
        set
        {
            _MaCSKCB = value;
        }
    }
    private List<HoSoYTe> _danhSachHoSoYTe;
    public List<HoSoYTe> danhSachHoSoYTe
    {
        get
        {
            if (_danhSachHoSoYTe == null)
                _danhSachHoSoYTe = new List<HoSoYTe>();
            return _danhSachHoSoYTe;
        }
        set
        {
            _danhSachHoSoYTe = value;
        }
    }
    public DuLieuLienThongYTeCoSo()
    {
        MaCSKCB = "";
    }

    public DuLieuLienThongYTeCoSo(String MaCSKCB)
    {
        this.MaCSKCB = MaCSKCB;
    }
    public DuLieuLienThongYTeCoSo(IDataReader dr, DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        if (dr["MaCSKCB"].GetType().Name != "DBNull" && dr["MaCSKCB"] != null)
        {
            this.MaCSKCB = Convert.ToString(dr["MaCSKCB"]);
        }
        else
        {
            this.MaCSKCB = "";
        }
        string maYTeCaNhan = "";
        if (dr["maYTeCaNhan"].GetType().Name != "DBNull" && dr["maYTeCaNhan"] != null)
        {
            maYTeCaNhan = Convert.ToString(dr["maYTeCaNhan"]);
        }
        this.danhSachHoSoYTe = HoSoYTe.GetHoSoYTe(maYTeCaNhan, dSBN, makhoa, tungay, denngay, loai, DK, qadmin);
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static DuLieuLienThongYTeCoSo GetDuLieuLienThongYTeCoSo(DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_GET", dSBN.MaSoKham, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new DuLieuLienThongYTeCoSo(dr, dSBN, makhoa, tungay, denngay, loai, DK, qadmin);
            }
        }
        return null;
    }
}

public class HoSoYTe
{
    private string _maYTeCaNhan = string.Empty;
    public string maYTeCaNhan
    {
        get
        {
            return _maYTeCaNhan;
        }
        set
        {
            _maYTeCaNhan = value;
        }
    }
    private ThongTinChung _ThongTinChung;
    public ThongTinChung ThongTinChung
    {
        get
        {
            if (_ThongTinChung == null)
                _ThongTinChung = new ThongTinChung();
            return _ThongTinChung;
        }
        set
        {
            _ThongTinChung = value;
        }
    }
    private DanhSachHoSoKhamChuaBenh _DanhSachHoSoKhamChuaBenh;
    public DanhSachHoSoKhamChuaBenh DanhSachHoSoKhamChuaBenh
    {
        get
        {
            if (_DanhSachHoSoKhamChuaBenh == null)
                _DanhSachHoSoKhamChuaBenh = new DanhSachHoSoKhamChuaBenh();
            return _DanhSachHoSoKhamChuaBenh;
        }
        set
        {
            _DanhSachHoSoKhamChuaBenh = value;
        }
    }
    public HoSoYTe()
    { }
    public HoSoYTe(string maYTeCaNhan, DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        this.maYTeCaNhan = maYTeCaNhan;
        this.ThongTinChung = new ThongTinChung(dSBN);
        this.DanhSachHoSoKhamChuaBenh = DanhSachHoSoKhamChuaBenh.GetDanhSachHoSoKhamChuaBenh(dSBN, makhoa, tungay, denngay, loai, DK, qadmin);
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<HoSoYTe> GetHoSoYTe(string maYTeCaNhan, DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<HoSoYTe> List = new List<HoSoYTe>();
        List.Add(new HoSoYTe(maYTeCaNhan, dSBN, makhoa, tungay, denngay, loai, DK, qadmin));
        return List;
    }
}
public class DanhSachHoSoKhamChuaBenh
{
    private HoSoKhamChuaBenh _HoSoKhamChuaBenh;
    public HoSoKhamChuaBenh HoSoKhamChuaBenh
    {
        get
        {
            if (_HoSoKhamChuaBenh == null)
                _HoSoKhamChuaBenh = new HoSoKhamChuaBenh();
            return _HoSoKhamChuaBenh;
        }
        set
        {
            _HoSoKhamChuaBenh = value;
        }
    }
    private ThongTinKhamThai _ThongTinKhamThai;
    [XmlIgnore]
    public ThongTinKhamThai ThongTinKhamThai
    {
        get
        {
            if (_ThongTinKhamThai == null)
                _ThongTinKhamThai = new ThongTinKhamThai();
            return _ThongTinKhamThai;
        }
        set
        {
            if (value != null)
                _ThongTinKhamThai = value;
        }
    }
    private TinhTrangDe _TinhTrangDe;
    [XmlIgnore]
    public TinhTrangDe TinhTrangDe
    {
        get
        {
            if (_TinhTrangDe == null)
                _TinhTrangDe = new TinhTrangDe();
            return _TinhTrangDe;
        }
        set
        {
            if (value != null)
                _TinhTrangDe = value;
        }
    }
    private ThongTinKeHoachHoaGiaDinh _ThongTinKeHoachHoaGiaDinh;
    [XmlIgnore]
    public ThongTinKeHoachHoaGiaDinh ThongTinKeHoachHoaGiaDinh
    {
        get
        {
            if (_ThongTinKeHoachHoaGiaDinh == null)
                _ThongTinKeHoachHoaGiaDinh = new ThongTinKeHoachHoaGiaDinh();
            return _ThongTinKeHoachHoaGiaDinh;
        }
        set
        {
            if (value != null)
                _ThongTinKeHoachHoaGiaDinh = value;
        }
    }
    private ThongTinPhaThai _ThongTinPhaThai;
    [XmlIgnore]
    public ThongTinPhaThai ThongTinPhaThai
    {
        get
        {
            if (_ThongTinPhaThai == null)
                _ThongTinPhaThai = new ThongTinPhaThai();
            return _ThongTinPhaThai;
        }
        set
        {
            if (value != null)
                _ThongTinPhaThai = value;
        }
    }
    private ThongTinBenhSotRet _ThongTinBenhSotRet;
    [XmlIgnore]
    public ThongTinBenhSotRet ThongTinBenhSotRet
    {
        get
        {
            if (_ThongTinBenhSotRet == null)
                _ThongTinBenhSotRet = new ThongTinBenhSotRet();
            return _ThongTinBenhSotRet;
        }
        set
        {
            if (value != null)
                _ThongTinBenhSotRet = value;
        }
    }
    private ThongTinBenhTamThanTuKy _ThongTinBenhTamThanTuKy;
    [XmlIgnore]
    public ThongTinBenhTamThanTuKy ThongTinBenhTamThanTuKy
    {
        get
        {
            if (_ThongTinBenhTamThanTuKy == null)
                _ThongTinBenhTamThanTuKy = new ThongTinBenhTamThanTuKy();
            return _ThongTinBenhTamThanTuKy;
        }
        set
        {
            if (value != null)
                _ThongTinBenhTamThanTuKy = value;
        }
    }
    private ThongTinBenhLao _ThongTinBenhLao;
    [XmlIgnore]
    public ThongTinBenhLao ThongTinBenhLao
    {
        get
        {
            if (_ThongTinBenhLao == null)
                _ThongTinBenhLao = new ThongTinBenhLao();
            return _ThongTinBenhLao;
        }
        set
        {
            if (value != null)
                _ThongTinBenhLao = value;
        }
    }
    private ThongTinBenhHIV _ThongTinBenhHIV;
    [XmlIgnore]
    public ThongTinBenhHIV ThongTinBenhHIV
    {
        get
        {
            if (_ThongTinBenhHIV == null)
                _ThongTinBenhHIV = new ThongTinBenhHIV();
            return _ThongTinBenhHIV;
        }
        set
        {
            if (value != null)
                _ThongTinBenhHIV = value;
        }
    }
    private ThongTinBenhKhongLayNhiem _ThongTinBenhKhongLayNhiem;
    [XmlIgnore]
    public ThongTinBenhKhongLayNhiem ThongTinBenhKhongLayNhiem
    {
        get
        {
            if (_ThongTinBenhKhongLayNhiem == null)
                _ThongTinBenhKhongLayNhiem = new ThongTinBenhKhongLayNhiem();
            return _ThongTinBenhKhongLayNhiem;
        }
        set
        {
            if (value != null)
                _ThongTinBenhKhongLayNhiem = value;
        }
    }
    private ThongTinTuVong _ThongTinTuVong;
    [XmlIgnore]
    public ThongTinTuVong ThongTinTuVong
    {
        get
        {
            if (_ThongTinTuVong == null)
                _ThongTinTuVong = new ThongTinTuVong();
            return _ThongTinTuVong;
        }
        set
        {
            if (value != null)
                _ThongTinTuVong = value;
        }
    }
    public DanhSachHoSoKhamChuaBenh()
    { }
    public DanhSachHoSoKhamChuaBenh(DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        this.HoSoKhamChuaBenh = HoSoKhamChuaBenh.GetByHoSoKhamChuaBenh(dSBN.MaSoKham, makhoa, tungay, denngay, loai, DK, qadmin);
        ThongTinKhamThai ttkt = ThongTinKhamThai.GetThongTinKhamThai(dSBN.MaSoKham, makhoa, tungay, denngay, 1, DK, qadmin);
        if (ttkt != null && ttkt.kyKinhCuoi != null && ttkt.kyKinhCuoi.Length == 10)
        {
            this.ThongTinKhamThai = ttkt;
        }
        else this.ThongTinKhamThai = null;
        TinhTrangDe ttd = TinhTrangDe.GetTinhTrangDe(dSBN.MaSoKham, makhoa, tungay, denngay, 3, DK, qadmin);
        if (ttd != null && ttd.ngayDe != null && ttd.ngayDe.Length == 10)
        {
            this.TinhTrangDe = ttd;
        }
        else this.TinhTrangDe = null;
        ThongTinKeHoachHoaGiaDinh ttkhhgd = ThongTinKeHoachHoaGiaDinh.GetThongTinKeHoachHoaGiaDinh(dSBN.MaSoKham, makhoa, tungay, denngay, 4, DK, qadmin);
        if (ttkhhgd != null && ttkhhgd.ngayThucHien != null && ttkhhgd.ngayThucHien.Length == 10)
        {
            this.ThongTinKeHoachHoaGiaDinh = ttkhhgd;
        }
        else this.ThongTinKeHoachHoaGiaDinh = null;
        ThongTinPhaThai ttpt = ThongTinPhaThai.GetThongTinPhaThai(dSBN.MaSoKham, makhoa, tungay, denngay, 5, DK, qadmin);
        if (ttpt != null && ttpt.ngayThucHien != null && ttpt.ngayThucHien.Length == 10)
        {
            this.ThongTinPhaThai = ttpt;
        }
        else this.ThongTinPhaThai = null;
        ThongTinBenhSotRet ttbsr = ThongTinBenhSotRet.GetThongTinBenhSotRet(dSBN.MaSoKham, makhoa, tungay, denngay, 6, DK, qadmin);
        if (ttbsr != null && ttbsr.ngayKham != null && ttbsr.ngayKham.Length == 10)
        {
            this.ThongTinBenhSotRet = ttbsr;
        }
        else this.ThongTinBenhSotRet = null;
        ThongTinBenhTamThanTuKy ttbtttk = ThongTinBenhTamThanTuKy.GetThongTinBenhTamThanTuKy(dSBN.MaSoKham, makhoa, tungay, denngay, 7, DK, qadmin);
        if (ttbtttk != null && ttbtttk.ngayGhiSo != null && ttbtttk.ngayGhiSo.Length == 10)
        {
            this.ThongTinBenhTamThanTuKy = ttbtttk;
        }
        else this.ThongTinBenhTamThanTuKy = null;
        ThongTinBenhLao ttbl = ThongTinBenhLao.GetThongTinBenhLao(dSBN.MaSoKham, makhoa, tungay, denngay, 8, DK, qadmin);
        if (ttbl != null && ttbl.ngayVeXaDieuTri != null && ttbl.ngayVeXaDieuTri.Length == 10)
        {
            this.ThongTinBenhLao = ttbl;
        }
        else this.ThongTinBenhLao = null;
        ThongTinBenhHIV tthiv = ThongTinBenhHIV.GetThongTinBenhHIV(dSBN.MaSoKham, makhoa, tungay, denngay, 9, DK, qadmin);
        if (tthiv != null && tthiv.ngayVaoSo != null && tthiv.ngayVaoSo.Length == 10)
        {
            this.ThongTinBenhHIV = tthiv;
        }
        else this.ThongTinBenhHIV = null;
        ThongTinBenhKhongLayNhiem ttbkln = ThongTinBenhKhongLayNhiem.GetThongTinBenhKhongLayNhiem(dSBN.MaSoKham, makhoa, tungay, denngay, 10, DK, qadmin);
        if (ttbkln != null && ttbkln.ngayPhatHien != null && ttbkln.ngayPhatHien.Length == 10)
        {
            this.ThongTinBenhKhongLayNhiem = ttbkln;
        }
        else this.ThongTinBenhKhongLayNhiem = null;
        ThongTinTuVong tttv = ThongTinTuVong.GetThongTinTuVong(dSBN.MaSoKham, makhoa, tungay, denngay, 11, DK, qadmin);
        if (tttv != null && tttv.ngayTuVong != null && tttv.ngayTuVong.Length == 10)
        {
            this.ThongTinTuVong = tttv;
        }
        else this.ThongTinTuVong = null;
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static DanhSachHoSoKhamChuaBenh GetDanhSachHoSoKhamChuaBenh(DSBN dSBN, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        return new DanhSachHoSoKhamChuaBenh(dSBN, makhoa, tungay, denngay, loai, DK, qadmin);
    }
}
public class ThongTinChung
{
    private string _maThe = string.Empty;
    public string maThe
    {
        get
        {
            return _maThe;
        }
        set
        {
            _maThe = value;
        }
    }
    private string _hoTen = string.Empty;
    public string hoTen
    {
        get
        {
            return _hoTen;
        }
        set
        {
            _hoTen = value;
        }
    }
    private int _gioiTinh;
    public int gioiTinh
    {
        get
        {
            return _gioiTinh;
        }
        set
        {
            _gioiTinh = value;
        }
    }
    private string _nhomMauHeAbo = string.Empty;
    public string nhomMauHeAbo
    {
        get
        {
            return _nhomMauHeAbo;
        }
        set
        {
            _nhomMauHeAbo = value;
        }
    }
    private int _nhomMauHeRh;
    public int nhomMauHeRh
    {
        get
        {
            return _nhomMauHeRh;
        }
        set
        {
            _nhomMauHeRh = value;
        }
    }
    private string _ngaySinh = string.Empty;
    public string ngaySinh
    {
        get
        {
            return _ngaySinh;
        }
        set
        {
            _ngaySinh = value;
        }
    }
    private string _maTinhKhaiSinh = string.Empty;
    public string maTinhKhaiSinh
    {
        get
        {
            return _maTinhKhaiSinh;
        }
        set
        {
            _maTinhKhaiSinh = value;
        }
    }
    private string _maDanToc = string.Empty;
    public string maDanToc
    {
        get
        {
            return _maDanToc;
        }
        set
        {
            _maDanToc = value;
        }
    }
    private string _maQuocTich = string.Empty;
    public string maQuocTich
    {
        get
        {
            return _maQuocTich;
        }
        set
        {
            _maQuocTich = value;
        }
    }
    private string _maTonGiao = string.Empty;
    public string maTonGiao
    {
        get
        {
            return _maTonGiao;
        }
        set
        {
            _maTonGiao = value;
        }
    }
    private string _maNgheNghiep = string.Empty;
    public string maNgheNghiep
    {
        get
        {
            return _maNgheNghiep;
        }
        set
        {
            _maNgheNghiep = value;
        }
    }
    private string _soCmnd = string.Empty;
    public string soCmnd
    {
        get
        {
            return _soCmnd;
        }
        set
        {
            _soCmnd = value;
        }
    }
    private string _ngayCap = string.Empty;
    public string ngayCap
    {
        get
        {
            return _ngayCap;
        }
        set
        {
            _ngayCap = value;
        }
    }
    private string _noiCap = string.Empty;
    public string noiCap
    {
        get
        {
            return _noiCap;
        }
        set
        {
            _noiCap = value;
        }
    }
    private string _diaChiChiTietThuongTru = string.Empty;
    public string diaChiChiTietThuongTru
    {
        get
        {
            return _diaChiChiTietThuongTru;
        }
        set
        {
            _diaChiChiTietThuongTru = value;
        }
    }
    private string _maTinhThuongTru = string.Empty;
    public string maTinhThuongTru
    {
        get
        {
            return _maTinhThuongTru;
        }
        set
        {
            _maTinhThuongTru = value;
        }
    }
    private string _maHuyenThuongTru = string.Empty;
    public string maHuyenThuongTru
    {
        get
        {
            return _maHuyenThuongTru;
        }
        set
        {
            _maHuyenThuongTru = value;
        }
    }
    private string _maXaThuongTru = string.Empty;
    public string maXaThuongTru
    {
        get
        {
            return _maXaThuongTru;
        }
        set
        {
            _maXaThuongTru = value;
        }
    }
    private string _diaChiChiTietHienTai = string.Empty;
    public string diaChiChiTietHienTai
    {
        get
        {
            return _diaChiChiTietHienTai;
        }
        set
        {
            _diaChiChiTietHienTai = value;
        }
    }
    private string _maTinhHienTai = string.Empty;
    public string maTinhHienTai
    {
        get
        {
            return _maTinhHienTai;
        }
        set
        {
            _maTinhHienTai = value;
        }
    }
    private string _maHuyenHienTai = string.Empty;
    public string maHuyenHienTai
    {
        get
        {
            return _maHuyenHienTai;
        }
        set
        {
            _maHuyenHienTai = value;
        }
    }
    private string _maXaHienTai = string.Empty;
    public string maXaHienTai
    {
        get
        {
            return _maXaHienTai;
        }
        set
        {
            _maXaHienTai = value;
        }
    }
    private string _dienThoaiNR = string.Empty;
    public string dienThoaiNR
    {
        get
        {
            return _dienThoaiNR;
        }
        set
        {
            _dienThoaiNR = value;
        }
    }
    private string _dienThoaiDd = string.Empty;
    public string dienThoaiDd
    {
        get
        {
            return _dienThoaiDd;
        }
        set
        {
            _dienThoaiDd = value;
        }
    }
    private string _email = string.Empty;
    public string email
    {
        get
        {
            return _email;
        }
        set
        {
            _email = value;
        }
    }
    private string _hoTenBo = string.Empty;
    public string hoTenBo
    {
        get
        {
            return _hoTenBo;
        }
        set
        {
            _hoTenBo = value;
        }
    }
    private string _hoTenMe = string.Empty;
    public string hoTenMe
    {
        get
        {
            return _hoTenMe;
        }
        set
        {
            _hoTenMe = value;
        }
    }
    private string _maYTeBo = string.Empty;
    public string maYTeBo
    {
        get
        {
            return _maYTeBo;
        }
        set
        {
            _maYTeBo = value;
        }
    }
    private string _maYTeMe = string.Empty;
    public string maYTeMe
    {
        get
        {
            return _maYTeMe;
        }
        set
        {
            _maYTeMe = value;
        }
    }
    private string _nguoiChamSocChinh = string.Empty;
    public string nguoiChamSocChinh
    {
        get
        {
            return _nguoiChamSocChinh;
        }
        set
        {
            _nguoiChamSocChinh = value;
        }
    }
    private int _quanHeNguoiChamSoc;
    public int quanHeNguoiChamSoc
    {
        get
        {
            return _quanHeNguoiChamSoc;
        }
        set
        {
            _quanHeNguoiChamSoc = value;
        }
    }
    private string _dienThoaiCoDinhNCSC = string.Empty;
    public string dienThoaiCoDinhNCSC
    {
        get
        {
            return _dienThoaiCoDinhNCSC;
        }
        set
        {
            _dienThoaiCoDinhNCSC = value;
        }
    }
    private string _dienThoaiDiDDongNCSC = string.Empty;
    public string dienThoaiDiDDongNCSC
    {
        get
        {
            return _dienThoaiDiDDongNCSC;
        }
        set
        {
            _dienThoaiDiDDongNCSC = value;
        }
    }
    public ThongTinChung()
    {
        maThe = "";
        hoTen = "";
        gioiTinh = 2;
        nhomMauHeAbo = "";
        nhomMauHeRh = 0;
        ngaySinh = "";
        maTinhKhaiSinh = "";
        maDanToc = "";
        maQuocTich = "";
        maTonGiao = "";
        maNgheNghiep = "";
        soCmnd = "";
        ngayCap = "";
        noiCap = "";
        diaChiChiTietThuongTru = "";
        maTinhThuongTru = "";
        maHuyenThuongTru = "";
        maXaThuongTru = "";
        diaChiChiTietHienTai = "";
        maTinhHienTai = "";
        maHuyenHienTai = "";
        maXaHienTai = "";
        dienThoaiNR = "";
        dienThoaiDd = "";
        email = "";
        hoTenBo = "";
        hoTenMe = "";
        maYTeBo = "";
        maYTeMe = "";
        nguoiChamSocChinh = "";
        quanHeNguoiChamSoc = 1;
        dienThoaiCoDinhNCSC = "";
        dienThoaiDiDDongNCSC = "";
    }
    public ThongTinChung(String maThe, String hoTen, String gioiTinh, String nhomMauHeAbo, int nhomMauHeRh, String ngaySinh, String maTinhKhaiSinh, String maDanToc, String maQuocTich, String maTonGiao, String maNgheNghiep, String soCmnd, String ngayCap, String noiCap, String diaChiChiTietThuongTru, String maTinhThuongTru, String maHuyenThuongTru, String maXaThuongTru, String diaChiChiTietHienTai, String maTinhHienTai, String maHuyenHienTai, String maXaHienTai, String dienThoaiNR, String dienThoaDd, String email, String hoTenBo, String hoTenMe, String maYTeBo, String maYTeMe, String nguoiChamSocChinh, int quanHeNguoiChamSoc, String dienThoaCoDinhNCSC, String dienThoaiDiDDongNCSC, String maYTeCaNhan, String tenBenh, String ngayRaVien, String tenKhoaRaVien, String MaBN, String maCSKCB, Int32 Ordernumber)
    {
        this.maThe = maThe;
        this.hoTen = hoTen;
        this.gioiTinh = (gioiTinh == "Nam") ? 1 : 2;
        this.nhomMauHeAbo = nhomMauHeAbo;
        this.nhomMauHeRh = nhomMauHeRh;
        this.ngaySinh = ngaySinh;
        this.maTinhKhaiSinh = maTinhKhaiSinh;
        this.maDanToc = maDanToc;
        this.maQuocTich = maQuocTich;
        this.maTonGiao = maTonGiao;
        this.maNgheNghiep = maNgheNghiep;
        this.soCmnd = soCmnd;
        this.ngayCap = ngayCap;
        this.noiCap = noiCap;
        this.diaChiChiTietThuongTru = diaChiChiTietThuongTru;
        this.maTinhThuongTru = maTinhThuongTru;
        this.maHuyenThuongTru = maHuyenThuongTru;
        this.maXaThuongTru = maXaThuongTru;
        this.diaChiChiTietHienTai = diaChiChiTietHienTai;
        this.maTinhHienTai = maTinhHienTai;
        this.maHuyenHienTai = maHuyenHienTai;
        this.maXaHienTai = maXaHienTai;
        this.dienThoaiNR = dienThoaiNR;
        this.dienThoaiDd = dienThoaDd;
        this.email = email;
        this.hoTenBo = hoTenBo;
        this.hoTenMe = hoTenMe;
        this.maYTeBo = maYTeBo;
        this.maYTeMe = maYTeMe;
        this.nguoiChamSocChinh = nguoiChamSocChinh;
        this.quanHeNguoiChamSoc = quanHeNguoiChamSoc;
        this.dienThoaiCoDinhNCSC = dienThoaCoDinhNCSC;
        this.dienThoaiDiDDongNCSC = dienThoaiDiDDongNCSC;
    }
    public ThongTinChung(IDataReader dr)
    {
        if (dr["maThe"].GetType().Name != "DBNull" && dr["maThe"] != null)
        {
            this.maThe = Convert.ToString(dr["maThe"]);
        }
        else
        {
            this.maThe = "";
        }
        if (dr["hoTen"].GetType().Name != "DBNull" && dr["hoTen"] != null)
        {
            this.hoTen = Convert.ToString(dr["hoTen"]);
        }
        else
        {
            this.hoTen = "";
        }
        if (dr["gioiTinh"].GetType().Name != "DBNull" && dr["gioiTinh"] != null)
        {
            this.gioiTinh = (Convert.ToString(dr["gioiTinh"]) == "Nam") ? 1 : 2;
        }
        else
        {
            this.gioiTinh = 2;
        }
        if (dr["nhomMauHeAbo"].GetType().Name != "DBNull" && dr["nhomMauHeAbo"] != null)
        {
            this.nhomMauHeAbo = Convert.ToString(dr["nhomMauHeAbo"]);
        }
        else
        {
            this.nhomMauHeAbo = "";
        }
        if (dr["nhomMauHeRh"].GetType().Name != "DBNull" && dr["nhomMauHeRh"] != null)
        {
            this.nhomMauHeRh = Convert.ToInt32(dr["nhomMauHeRh"]);
        }
        else
        {
            this.nhomMauHeRh = 0;
        }
        if (dr["ngaySinh"].GetType().Name != "DBNull" && dr["ngaySinh"] != null)
        {
            this.ngaySinh = Convert.ToString(dr["ngaySinh"]);
        }
        else
        {
            this.ngaySinh = "";
        }
        if (dr["maTinhKhaiSinh"].GetType().Name != "DBNull" && dr["maTinhKhaiSinh"] != null)
        {
            this.maTinhKhaiSinh = Convert.ToString(dr["maTinhKhaiSinh"]);
        }
        else
        {
            this.maTinhKhaiSinh = "";
        }
        if (dr["maDanToc"].GetType().Name != "DBNull" && dr["maDanToc"] != null)
        {
            this.maDanToc = Convert.ToString(dr["maDanToc"]);
        }
        else
        {
            this.maDanToc = "";
        }
        if (dr["maQuocTich"].GetType().Name != "DBNull" && dr["maQuocTich"] != null)
        {
            this.maQuocTich = Convert.ToString(dr["maQuocTich"]);
        }
        else
        {
            this.maQuocTich = "";
        }
        if (dr["maTonGiao"].GetType().Name != "DBNull" && dr["maTonGiao"] != null)
        {
            this.maTonGiao = Convert.ToString(dr["maTonGiao"]);
        }
        else
        {
            this.maTonGiao = "";
        }
        if (dr["maNgheNghiep"].GetType().Name != "DBNull" && dr["maNgheNghiep"] != null)
        {
            this.maNgheNghiep = Convert.ToString(dr["maNgheNghiep"]);
        }
        else
        {
            this.maNgheNghiep = "";
        }
        if (dr["soCmnd"].GetType().Name != "DBNull" && dr["soCmnd"] != null)
        {
            this.soCmnd = Convert.ToString(dr["soCmnd"]);
        }
        else
        {
            this.soCmnd = "";
        }
        if (dr["ngayCap"].GetType().Name != "DBNull" && dr["ngayCap"] != null)
        {
            this.ngayCap = Convert.ToString(dr["ngayCap"]);
        }
        else
        {
            this.ngayCap = "";
        }
        if (dr["noiCap"].GetType().Name != "DBNull" && dr["noiCap"] != null)
        {
            this.noiCap = Convert.ToString(dr["noiCap"]);
        }
        else
        {
            this.noiCap = "";
        }
        if (dr["diaChiChiTietThuongTru"].GetType().Name != "DBNull" && dr["diaChiChiTietThuongTru"] != null)
        {
            this.diaChiChiTietThuongTru = Convert.ToString(dr["diaChiChiTietThuongTru"]);
        }
        else
        {
            this.diaChiChiTietThuongTru = "";
        }
        if (dr["maTinhThuongTru"].GetType().Name != "DBNull" && dr["maTinhThuongTru"] != null)
        {
            this.maTinhThuongTru = Convert.ToString(dr["maTinhThuongTru"]);
        }
        else
        {
            this.maTinhThuongTru = "";
        }
        if (dr["maHuyenThuongTru"].GetType().Name != "DBNull" && dr["maHuyenThuongTru"] != null)
        {
            this.maHuyenThuongTru = Convert.ToString(dr["maHuyenThuongTru"]);
        }
        else
        {
            this.maHuyenThuongTru = "";
        }
        if (dr["maXaThuongTru"].GetType().Name != "DBNull" && dr["maXaThuongTru"] != null)
        {
            this.maXaThuongTru = Convert.ToString(dr["maXaThuongTru"]);
        }
        else
        {
            this.maXaThuongTru = "";
        }
        if (dr["diaChiChiTietHienTai"].GetType().Name != "DBNull" && dr["diaChiChiTietHienTai"] != null)
        {
            this.diaChiChiTietHienTai = Convert.ToString(dr["diaChiChiTietHienTai"]);
        }
        else
        {
            this.diaChiChiTietHienTai = "";
        }
        if (dr["maTinhHienTai"].GetType().Name != "DBNull" && dr["maTinhHienTai"] != null)
        {
            this.maTinhHienTai = Convert.ToString(dr["maTinhHienTai"]);
        }
        else
        {
            this.maTinhHienTai = "";
        }
        if (dr["maHuyenHienTai"].GetType().Name != "DBNull" && dr["maHuyenHienTai"] != null)
        {
            this.maHuyenHienTai = Convert.ToString(dr["maHuyenHienTai"]);
        }
        else
        {
            this.maHuyenHienTai = "";
        }
        if (dr["maXaHienTai"].GetType().Name != "DBNull" && dr["maXaHienTai"] != null)
        {
            this.maXaHienTai = Convert.ToString(dr["maXaHienTai"]);
        }
        else
        {
            this.maXaHienTai = "";
        }
        if (dr["dienThoaiNR"].GetType().Name != "DBNull" && dr["dienThoaiNR"] != null)
        {
            this.dienThoaiNR = Convert.ToString(dr["dienThoaiNR"]);
        }
        else
        {
            this.dienThoaiNR = "";
        }
        if (dr["dienThoaiDd"].GetType().Name != "DBNull" && dr["dienThoaiDd"] != null)
        {
            this.dienThoaiDd = Convert.ToString(dr["dienThoaiDd"]);
        }
        else
        {
            this.dienThoaiDd = "";
        }
        if (dr["email"].GetType().Name != "DBNull" && dr["email"] != null)
        {
            this.email = Convert.ToString(dr["email"]);
        }
        else
        {
            this.email = "";
        }
        if (dr["hoTenBo"].GetType().Name != "DBNull" && dr["hoTenBo"] != null)
        {
            this.hoTenBo = Convert.ToString(dr["hoTenBo"]);
        }
        else
        {
            this.hoTenBo = "";
        }
        if (dr["hoTenMe"].GetType().Name != "DBNull" && dr["hoTenMe"] != null)
        {
            this.hoTenMe = Convert.ToString(dr["hoTenMe"]);
        }
        else
        {
            this.hoTenMe = "";
        }
        if (dr["maYTeBo"].GetType().Name != "DBNull" && dr["maYTeBo"] != null)
        {
            this.maYTeBo = Convert.ToString(dr["maYTeBo"]);
        }
        else
        {
            this.maYTeBo = "";
        }
        if (dr["maYTeMe"].GetType().Name != "DBNull" && dr["maYTeMe"] != null)
        {
            this.maYTeMe = Convert.ToString(dr["maYTeMe"]);
        }
        else
        {
            this.maYTeMe = "";
        }
        if (dr["nguoiChamSocChinh"].GetType().Name != "DBNull" && dr["nguoiChamSocChinh"] != null)
        {
            this.nguoiChamSocChinh = Convert.ToString(dr["nguoiChamSocChinh"]);
        }
        else
        {
            this.nguoiChamSocChinh = "";
        }
        if (dr["quanHeNguoiChamSoc"].GetType().Name != "DBNull" && dr["quanHeNguoiChamSoc"] != null)
        {
            this.quanHeNguoiChamSoc = Convert.ToInt32(dr["quanHeNguoiChamSoc"]);
        }
        else
        {
            this.quanHeNguoiChamSoc = 1;
        }
        if (dr["dienThoaiCoDinhNCSC"].GetType().Name != "DBNull" && dr["dienThoaiCoDinhNCSC"] != null)
        {
            this.dienThoaiCoDinhNCSC = Convert.ToString(dr["dienThoaiCoDinhNCSC"]);
        }
        else
        {
            this.dienThoaiCoDinhNCSC = "";
        }
        if (dr["dienThoaiDiDDongNCSC"].GetType().Name != "DBNull" && dr["dienThoaiDiDDongNCSC"] != null)
        {
            this.dienThoaiDiDDongNCSC = Convert.ToString(dr["dienThoaiDiDDongNCSC"]);
        }
        else
        {
            this.dienThoaiDiDDongNCSC = "";
        }
    }
    public ThongTinChung(DSBN dr)
    {
        if (dr.maThe != null)
        {
            this.maThe = dr.maThe;
        }
        else
        {
            this.maThe = "";
        }
        if (dr.hoTen != null)
        {
            this.hoTen = dr.hoTen;
        }
        else
        {
            this.hoTen = "";
        }
        if (dr.gioiTinh != null)
        {
            this.gioiTinh = (dr.gioiTinh == "Nam") ? 1 : 2;
        }
        else
        {
            this.gioiTinh = 2;
        }
        if (dr.nhomMauHeAbo != null)
        {
            this.nhomMauHeAbo = dr.nhomMauHeAbo;
        }
        else
        {
            this.nhomMauHeAbo = "";
        }
        if (dr.nhomMauHeRh != null)
        {
            this.nhomMauHeRh = Convert.ToInt32(dr.nhomMauHeRh);
        }
        else
        {
            this.nhomMauHeRh = 0;
        }
        if (dr.ngaySinh != null)
        {
            this.ngaySinh = dr.ngaySinh;
        }
        else
        {
            this.ngaySinh = "";
        }
        if (dr.maTinhKhaiSinh != null)
        {
            this.maTinhKhaiSinh = dr.maTinhKhaiSinh;
        }
        else
        {
            this.maTinhKhaiSinh = "";
        }
        if (dr.maDanToc != null)
        {
            this.maDanToc = dr.maDanToc;
        }
        else
        {
            this.maDanToc = "";
        }
        if (dr.maQuocTich != null)
        {
            this.maQuocTich = dr.maQuocTich;
        }
        else
        {
            this.maQuocTich = "";
        }
        if (dr.maTonGiao != null)
        {
            this.maTonGiao = dr.maTonGiao;
        }
        else
        {
            this.maTonGiao = "";
        }
        if (dr.maNgheNghiep != null)
        {
            this.maNgheNghiep = dr.maNgheNghiep;
        }
        else
        {
            this.maNgheNghiep = "";
        }
        if (dr.soCmnd != null)
        {
            this.soCmnd = dr.soCmnd;
        }
        else
        {
            this.soCmnd = "";
        }
        if (dr.ngayCap != null)
        {
            this.ngayCap = dr.ngayCap;
        }
        else
        {
            this.ngayCap = "";
        }
        if (dr.noiCap != null)
        {
            this.noiCap = dr.noiCap;
        }
        else
        {
            this.noiCap = "";
        }
        if (dr.diaChiChiTietThuongTru != null)
        {
            this.diaChiChiTietThuongTru = dr.diaChiChiTietThuongTru;
        }
        else
        {
            this.diaChiChiTietThuongTru = "";
        }
        if (dr.maTinhThuongTru != null)
        {
            this.maTinhThuongTru = dr.maTinhThuongTru;
        }
        else
        {
            this.maTinhThuongTru = "";
        }
        if (dr.maHuyenThuongTru != null)
        {
            this.maHuyenThuongTru = dr.maHuyenThuongTru;
        }
        else
        {
            this.maHuyenThuongTru = "";
        }
        if (dr.maXaThuongTru != null)
        {
            this.maXaThuongTru = dr.maXaThuongTru;
        }
        else
        {
            this.maXaThuongTru = "";
        }
        if (dr.diaChiChiTietHienTai != null)
        {
            this.diaChiChiTietHienTai = dr.diaChiChiTietHienTai;
        }
        else
        {
            this.diaChiChiTietHienTai = "";
        }
        if (dr.maTinhHienTai != null)
        {
            this.maTinhHienTai = dr.maTinhHienTai;
        }
        else
        {
            this.maTinhHienTai = "";
        }
        if (dr.maHuyenHienTai != null)
        {
            this.maHuyenHienTai = dr.maHuyenHienTai;
        }
        else
        {
            this.maHuyenHienTai = "";
        }
        if (dr.maXaHienTai != null)
        {
            this.maXaHienTai = dr.maXaHienTai;
        }
        else
        {
            this.maXaHienTai = "";
        }
        if (dr.dienThoaiNR != null)
        {
            this.dienThoaiNR = dr.dienThoaiNR;
        }
        else
        {
            this.dienThoaiNR = "";
        }
        if (dr.dienThoaiDd != null)
        {
            this.dienThoaiDd = dr.dienThoaiDd;
        }
        else
        {
            this.dienThoaiDd = "";
        }
        if (dr.email != null)
        {
            this.email = dr.email;
        }
        else
        {
            this.email = "";
        }
        if (dr.hoTenBo != null)
        {
            this.hoTenBo = dr.hoTenBo;
        }
        else
        {
            this.hoTenBo = "";
        }
        if (dr.hoTenMe != null)
        {
            this.hoTenMe = dr.hoTenMe;
        }
        else
        {
            this.hoTenMe = "";
        }
        if (dr.maYTeBo != null)
        {
            this.maYTeBo = dr.maYTeBo;
        }
        else
        {
            this.maYTeBo = "";
        }
        if (dr.maYTeMe != null)
        {
            this.maYTeMe = dr.maYTeMe;
        }
        else
        {
            this.maYTeMe = "";
        }
        if (dr.nguoiChamSocChinh != null)
        {
            this.nguoiChamSocChinh = dr.nguoiChamSocChinh;
        }
        else
        {
            this.nguoiChamSocChinh = "";
        }
        int qhncs;
        if (dr.quanHeNguoiChamSoc != null && !string.IsNullOrEmpty(dr.quanHeNguoiChamSoc) && int.TryParse(dr.quanHeNguoiChamSoc, out qhncs))
        {
            this.quanHeNguoiChamSoc = qhncs;
        }
        else
        {
            this.quanHeNguoiChamSoc = 1;
        }
        if (dr.dienThoaiCoDinhNCSC != null)
        {
            this.dienThoaiCoDinhNCSC = dr.dienThoaiCoDinhNCSC;
        }
        else
        {
            this.dienThoaiCoDinhNCSC = "";
        }
        if (dr.dienThoaiDiDDongNCSC != null)
        {
            this.dienThoaiDiDDongNCSC = dr.dienThoaiDiDDongNCSC;
        }
        else
        {
            this.dienThoaiDiDDongNCSC = "";
        }
    }
}

public class HoSoKhamChuaBenh
{
    private string _ngayKham = string.Empty;
    public string ngayKham
    {
        get
        {
            return _ngayKham;
        }
        set
        {
            _ngayKham = value;
        }
    }
    private string _ngayBatDau = string.Empty;
    public string ngayBatDau
    {
        get
        {
            return _ngayBatDau;
        }
        set
        {
            _ngayBatDau = value;
        }
    }
    private string _ngayKetThuc = string.Empty;
    public string ngayKetThuc
    {
        get
        {
            return _ngayKetThuc;
        }
        set
        {
            _ngayKetThuc = value;
        }
    }
    private string _bacSiKham = string.Empty;
    public string bacSiKham
    {
        get
        {
            return _bacSiKham;
        }
        set
        {
            _bacSiKham = value;
        }
    }
    private string _lyDoKham = string.Empty;
    public string lyDoKham
    {
        get
        {
            return _lyDoKham;
        }
        set
        {
            _lyDoKham = value;
        }
    }
    private string _benhSu = string.Empty;
    public string benhSu
    {
        get
        {
            return _benhSu;
        }
        set
        {
            _benhSu = value;
        }
    }
    private int _mach;
    public int mach
    {
        get
        {
            return _mach;
        }
        set
        {
            _mach = value;
        }
    }
    private decimal _nhietDo;
    public decimal nhietDo
    {
        get
        {
            return _nhietDo;
        }
        set
        {
            _nhietDo = value;
        }
    }
    private int _huyetApTT;
    public int huyetApTT
    {
        get
        {
            return _huyetApTT;
        }
        set
        {
            _huyetApTT = value;
        }
    }
    private int _huyetApTD;
    public int huyetApTD
    {
        get
        {
            return _huyetApTD;
        }
        set
        {
            _huyetApTD = value;
        }
    }
    private int _nhipTho;
    public int nhipTho
    {
        get
        {
            return _nhipTho;
        }
        set
        {
            _nhipTho = value;
        }
    }
    private decimal _chieuCao;
    public decimal chieuCao
    {
        get
        {
            return _chieuCao;
        }
        set
        {
            _chieuCao = value;
        }
    }
    private decimal _canNang;
    public decimal canNang
    {
        get
        {
            return _canNang;
        }
        set
        {
            _canNang = value;
        }
    }
    private decimal _chiSoBmi = 0;
    public decimal chiSoBmi
    {
        get
        {
            return _chiSoBmi;
        }
        set
        {
            _chiSoBmi = value;
        }
    }
    private int _vongBung = 0;
    public int vongBung
    {
        get
        {
            return _vongBung;
        }
        set
        {
            _vongBung = value;
        }
    }
    private string _khamDa = string.Empty;
    public string khamDa
    {
        get
        {
            return _khamDa;
        }
        set
        {
            _khamDa = value;
        }
    }
    private string _khamNiemMac = string.Empty;
    public string khamNiemMac
    {
        get
        {
            return _khamNiemMac;
        }
        set
        {
            _khamNiemMac = value;
        }
    }
    private string _khamToanThanKhac = string.Empty;
    public string khamToanThanKhac
    {
        get
        {
            return _khamToanThanKhac;
        }
        set
        {
            _khamToanThanKhac = value;
        }
    }
    private string _khamTimMach = string.Empty;
    public string khamTimMach
    {
        get
        {
            return _khamTimMach;
        }
        set
        {
            _khamTimMach = value;
        }
    }
    private string _khamHoHap = string.Empty;
    public string khamHoHap
    {
        get
        {
            return _khamHoHap;
        }
        set
        {
            _khamHoHap = value;
        }
    }
    private string _khamTieuHoa = string.Empty;
    public string khamTieuHoa
    {
        get
        {
            return _khamTieuHoa;
        }
        set
        {
            _khamTieuHoa = value;
        }
    }
    private string _khamTietNieu = string.Empty;
    public string khamTietNieu
    {
        get
        {
            return _khamTietNieu;
        }
        set
        {
            _khamTietNieu = value;
        }
    }
    private string _khamCoXuongKhop = string.Empty;
    public string khamCoXuongKhop
    {
        get
        {
            return _khamCoXuongKhop;
        }
        set
        {
            _khamCoXuongKhop = value;
        }
    }
    private string _khamNoiTiet = string.Empty;
    public string khamNoiTiet
    {
        get
        {
            return _khamNoiTiet;
        }
        set
        {
            _khamNoiTiet = value;
        }
    }
    private string _khamThanKinh = string.Empty;
    public string khamThanKinh
    {
        get
        {
            return _khamThanKinh;
        }
        set
        {
            _khamThanKinh = value;
        }
    }
    private string _tuVan = string.Empty;
    public string tuVan
    {
        get
        {
            return _tuVan;
        }
        set
        {
            _tuVan = value;
        }
    }
    private string _chanDoanKetLuan = string.Empty;
    public string chanDoanKetLuan
    {
        get
        {
            return _chanDoanKetLuan;
        }
        set
        {
            _chanDoanKetLuan = value;
        }
    }
    private string _henLichKham = string.Empty;
    public string henLichKham
    {
        get
        {
            return _henLichKham;
        }
        set
        {
            _henLichKham = value;
        }
    }
    private string _benhTheoDoi = string.Empty;
    public string benhTheoDoi
    {
        get
        {
            return _benhTheoDoi;
        }
        set
        {
            _benhTheoDoi = value;
        }
    }
    private string _khamTamThan = string.Empty;
    public string khamTamThan
    {
        get
        {
            return _khamTamThan;
        }
        set
        {
            _khamTamThan = value;
        }
    }
    private string _khamTMH = string.Empty;
    public string khamTMH
    {
        get
        {
            return _khamTMH;
        }
        set
        {
            _khamTMH = value;
        }
    }
    private string _khamRHM = string.Empty;
    public string khamRHM
    {
        get
        {
            return _khamRHM;
        }
        set
        {
            _khamRHM = value;
        }
    }
    private string _khamDinhDuong = string.Empty;
    public string khamDinhDuong
    {
        get
        {
            return _khamDinhDuong;
        }
        set
        {
            _khamDinhDuong = value;
        }
    }
    private string _khamVanDong = string.Empty;
    public string khamVanDong
    {
        get
        {
            return _khamVanDong;
        }
        set
        {
            _khamVanDong = value;
        }
    }
    private string _khamKhac = string.Empty;
    public string khamKhac
    {
        get
        {
            return _khamKhac;
        }
        set
        {
            _khamKhac = value;
        }
    }
    private string _khamDanhGia = string.Empty;
    public string khamDanhGia
    {
        get
        {
            return _khamDanhGia;
        }
        set
        {
            _khamDanhGia = value;
        }
    }
    private string _khamMat = string.Empty;
    public string khamMat
    {
        get
        {
            return _khamMat;
        }
        set
        {
            _khamMat = value;
        }
    }
    private string _xnHuyetHoc = string.Empty;
    public string xnHuyetHoc
    {
        get
        {
            return _xnHuyetHoc;
        }
        set
        {
            _xnHuyetHoc = value;
        }
    }
    private string _xnSinhHoaMau = string.Empty;
    public string xnSinhHoaMau
    {
        get
        {
            return _xnSinhHoaMau;
        }
        set
        {
            _xnSinhHoaMau = value;
        }
    }
    private string _xQuang = string.Empty;
    public string xQuang
    {
        get
        {
            return _xQuang;
        }
        set
        {
            _xQuang = value;
        }
    }
    private string _sieuAm = string.Empty;
    public string sieuAm
    {
        get
        {
            return _sieuAm;
        }
        set
        {
            _sieuAm = value;
        }
    }
    private string _xnKhac = string.Empty;
    public string xnKhac
    {
        get
        {
            return _xnKhac;
        }
        set
        {
            _xnKhac = value;
        }
    }
    private decimal _tienThuoc = 0;
    public decimal tienThuoc
    {
        get
        {
            return _tienThuoc;
        }
        set
        {
            _tienThuoc = value;
        }
    }
    private decimal _tienVtyt = 0;
    public decimal tienVtyt
    {
        get
        {
            return _tienVtyt;
        }
        set
        {
            _tienVtyt = value;
        }
    }
    private decimal _tienTong = 0;
    public decimal tienTong
    {
        get
        {
            return _tienTong;
        }
        set
        {
            _tienTong = value;
        }
    }
    private decimal _tienBntt = 0;
    public decimal tienBntt
    {
        get
        {
            return _tienBntt;
        }
        set
        {
            _tienBntt = value;
        }
    }
    private decimal _tienBncct = 0;
    public decimal tienBncct
    {
        get
        {
            return _tienBncct;
        }
        set
        {
            _tienBncct = value;
        }
    }
    private decimal _tienBhtt = 0;
    public decimal tienBhtt
    {
        get
        {
            return _tienBhtt;
        }
        set
        {
            _tienBhtt = value;
        }
    }
    private decimal _tienNguonkhac = 0;
    public decimal tienNguonkhac
    {
        get
        {
            return _tienNguonkhac;
        }
        set
        {
            _tienNguonkhac = value;
        }
    }
    private decimal _tienNgoaids = 0;
    public decimal tienNgoaids
    {
        get
        {
            return _tienNgoaids;
        }
        set
        {
            _tienNgoaids = value;
        }
    }
    private decimal _tienXn = 0;
    public decimal tienXn
    {
        get
        {
            return _tienXn;
        }
        set
        {
            _tienXn = value;
        }
    }
    private decimal _tienCdha = 0;
    public decimal tienCdha
    {
        get
        {
            return _tienCdha;
        }
        set
        {
            _tienCdha = value;
        }
    }
    private decimal _tienTdcn = 0;
    public decimal tienTdcn
    {
        get
        {
            return _tienTdcn;
        }
        set
        {
            _tienTdcn = value;
        }
    }
    private decimal _tienThuocBhyt = 0;
    public decimal tienThuocBhyt
    {
        get
        {
            return _tienThuocBhyt;
        }
        set
        {
            _tienThuocBhyt = value;
        }
    }
    private decimal _tienThuocUngthu = 0;
    public decimal tienThuocUngthu
    {
        get
        {
            return _tienThuocUngthu;
        }
        set
        {
            _tienThuocUngthu = value;
        }
    }
    private decimal _tienThuocTttl = 0;
    public decimal tienThuocTttl
    {
        get
        {
            return _tienThuocTttl;
        }
        set
        {
            _tienThuocTttl = value;
        }
    }
    private decimal _tienMau = 0;
    public decimal tienMau
    {
        get
        {
            return _tienMau;
        }
        set
        {
            _tienMau = value;
        }
    }
    private decimal _tienPttt = 0;
    public decimal tienPttt
    {
        get
        {
            return _tienPttt;
        }
        set
        {
            _tienPttt = value;
        }
    }
    private decimal _tienDvkt = 0;
    public decimal tienDvkt
    {
        get
        {
            return _tienDvkt;
        }
        set
        {
            _tienDvkt = value;
        }
    }
    private decimal _tienVanChuyen = 0;
    public decimal tienVanChuyen
    {
        get
        {
            return _tienVanChuyen;
        }
        set
        {
            _tienVanChuyen = value;
        }
    }
    private decimal _tienKham = 0;
    public decimal tienKham
    {
        get
        {
            return _tienKham;
        }
        set
        {
            _tienKham = value;
        }
    }
    private decimal _tienGiuongNgoai = 0;
    public decimal tienGiuongNgoai
    {
        get
        {
            return _tienGiuongNgoai;
        }
        set
        {
            _tienGiuongNgoai = value;
        }
    }
    private decimal _tienGiuongNoi = 0;
    public decimal tienGiuongNoi
    {
        get
        {
            return _tienGiuongNoi;
        }
        set
        {
            _tienGiuongNoi = value;
        }
    }
    private decimal _tienVtytTyle = 0;
    public decimal tienVtytTyle
    {
        get
        {
            return _tienVtytTyle;
        }
        set
        {
            _tienVtytTyle = value;
        }
    }
    private decimal _tienVtytBhyt = 0;
    public decimal tienVtytBhyt
    {
        get
        {
            return _tienVtytBhyt;
        }
        set
        {
            _tienVtytBhyt = value;
        }
    }
    private List<DichVu> _CanLamSang;
    public List<DichVu> CanLamSang
    {
        get
        {
            if (_CanLamSang == null)
                _CanLamSang = new List<DichVu>();
            return _CanLamSang;
        }
        set
        {
            _CanLamSang = value;
        }
    }
    private List<Thuoc> _DonThuocHoSoKhamChuaBenh;
    public List<Thuoc> DonThuocHoSoKhamChuaBenh
    {
        get
        {
            if (_DonThuocHoSoKhamChuaBenh == null)
                _DonThuocHoSoKhamChuaBenh = new List<Thuoc>();
            return _DonThuocHoSoKhamChuaBenh;
        }
        set
        {
            _DonThuocHoSoKhamChuaBenh = value;
        }
    }
    private List<Dvkt> _DvktHoSoKhamChuaBenh;
    public List<Dvkt> DvktHoSoKhamChuaBenh
    {
        get
        {
            if (_DvktHoSoKhamChuaBenh == null)
                _DvktHoSoKhamChuaBenh = new List<Dvkt>();
            return _DvktHoSoKhamChuaBenh;
        }
        set
        {
            _DvktHoSoKhamChuaBenh = value;
        }
    }
    public HoSoKhamChuaBenh()
    {
        ngayKham = "";
        ngayBatDau = "";
        ngayKetThuc = "";
        bacSiKham = "";
        lyDoKham = "";
        benhSu = "";
        mach = 0;
        nhietDo = 0;
        huyetApTT = 0;
        huyetApTD = 0;
        nhipTho = 0;
        chieuCao = 0;
        canNang = 0;
        chiSoBmi = 0;
        vongBung = 0;
        khamDa = "";
        khamNiemMac = "";
        khamToanThanKhac = "";
        khamTimMach = "";
        khamHoHap = "";
        khamTieuHoa = "";
        khamTietNieu = "";
        khamCoXuongKhop = "";
        khamNoiTiet = "";
        khamThanKinh = "";
        tuVan = "";
        chanDoanKetLuan = "";
        henLichKham = "";
        benhTheoDoi = "";
        khamTamThan = "";
        khamTMH = "";
        khamRHM = "";
        khamDinhDuong = "";
        khamVanDong = "";
        khamKhac = "";
        khamDanhGia = "";
        khamMat = "";
        xnHuyetHoc = "";
        xnSinhHoaMau = "";
        xQuang = "";
        sieuAm = "";
        xnKhac = "";
        tienThuoc = 0;
        tienVtyt = 0;
        tienTong = 0;
        tienBntt = 0;
        tienBncct = 0;
        tienBhtt = 0;
        tienNguonkhac = 0;
        tienNgoaids = 0;
        tienXn = 0;
        tienCdha = 0;
        tienTdcn = 0;
        tienThuocBhyt = 0;
        tienThuocUngthu = 0;
        tienThuocTttl = 0;
        tienMau = 0;
        tienPttt = 0;
        tienDvkt = 0;
        tienVanChuyen = 0;
        tienKham = 0;
        tienGiuongNgoai = 0;
        tienGiuongNoi = 0;
        tienVtytTyle = 0;
        tienVtytBhyt = 0;
    }
    public HoSoKhamChuaBenh(String ngayKham, String ngayBatDau, String ngayKetThuc, String bacSiKham, String lyDoKham, String benhSu, int mach, int nhietDo, int huyetApTT, int huyetApTD, int nhipTho, int chieuCao, int canNang, Int32 chiSoBmi, Int32 vongBung, String khamDa, String khamNiemMac, String khamToanThanKhac, String khamTimMach, String khamHoHap, String khamTieuHoa, String khamTietNieu, String khamCoXuongKhop, String khamNoiTiet, String khamThanKinh, String tuVan, String chanDoanKetLuan, String henLichKham, String benhTheoDoi, String khamTamThan, String khamTMH, String khamRHM, String khamDinhDuong, String khamVanDong, String khamKhac, String khamDanhGia, String khamMat, String xnHuyetHoc, String xnSinhHoaMau, String xQuang, String sieuAm, String xnKhac, Int32 tienThuoc, Int32 tienVtyt, Int32 tienTong, Int32 tienBntt, Int32 tienBncct, Int32 tienBhtt, Int32 tienNguonkhac, Int32 tienNgoaids, Int32 tienXn, Int32 tienCdha, Int32 tienTdcn, Int32 tienThuocBhyt, Int32 tienThuocUngthu, Int32 tienThuocTttl, Int32 tienMau, Int32 tienPttt, Int32 tienDvkt, Int32 tienVanChuyen, Int32 tienKham, Int32 tienGiuongNgoai, Int32 tienGiuongNoi, Int32 tienVtytTyle, Int32 tienVtytBhyt)
    {
        this.ngayKham = ngayKham;
        this.ngayBatDau = ngayBatDau;
        this.ngayKetThuc = ngayKetThuc;
        this.bacSiKham = bacSiKham;
        this.lyDoKham = lyDoKham;
        this.benhSu = benhSu;
        this.mach = mach;
        this.nhietDo = nhietDo;
        this.huyetApTT = huyetApTT;
        this.huyetApTD = huyetApTD;
        this.nhipTho = nhipTho;
        this.chieuCao = chieuCao;
        this.canNang = canNang;
        this.chiSoBmi = chiSoBmi;
        this.vongBung = vongBung;
        this.khamDa = khamDa;
        this.khamNiemMac = khamNiemMac;
        this.khamToanThanKhac = khamToanThanKhac;
        this.khamTimMach = khamTimMach;
        this.khamHoHap = khamHoHap;
        this.khamTieuHoa = khamTieuHoa;
        this.khamTietNieu = khamTietNieu;
        this.khamCoXuongKhop = khamCoXuongKhop;
        this.khamNoiTiet = khamNoiTiet;
        this.khamThanKinh = khamThanKinh;
        this.tuVan = tuVan;
        this.chanDoanKetLuan = chanDoanKetLuan;
        this.henLichKham = henLichKham;
        this.benhTheoDoi = benhTheoDoi;
        this.khamTamThan = khamTamThan;
        this.khamTMH = khamTMH;
        this.khamRHM = khamRHM;
        this.khamDinhDuong = khamDinhDuong;
        this.khamVanDong = khamVanDong;
        this.khamKhac = khamKhac;
        this.khamDanhGia = khamDanhGia;
        this.khamMat = khamMat;
        this.xnHuyetHoc = xnHuyetHoc;
        this.xnSinhHoaMau = xnSinhHoaMau;
        this.xQuang = xQuang;
        this.sieuAm = sieuAm;
        this.xnKhac = xnKhac;
        this.tienThuoc = tienThuoc;
        this.tienVtyt = tienVtyt;
        this.tienTong = tienTong;
        this.tienBntt = tienBntt;
        this.tienBncct = tienBncct;
        this.tienBhtt = tienBhtt;
        this.tienNguonkhac = tienNguonkhac;
        this.tienNgoaids = tienNgoaids;
        this.tienXn = tienXn;
        this.tienCdha = tienCdha;
        this.tienTdcn = tienTdcn;
        this.tienThuocBhyt = tienThuocBhyt;
        this.tienThuocUngthu = tienThuocUngthu;
        this.tienThuocTttl = tienThuocTttl;
        this.tienMau = tienMau;
        this.tienPttt = tienPttt;
        this.tienDvkt = tienDvkt;
        this.tienVanChuyen = tienVanChuyen;
        this.tienKham = tienKham;
        this.tienGiuongNgoai = tienGiuongNgoai;
        this.tienGiuongNoi = tienGiuongNoi;
        this.tienVtytTyle = tienVtytTyle;
        this.tienVtytBhyt = tienVtytBhyt;
    }
    public HoSoKhamChuaBenh(IDataReader dr, String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        if (dr["ngayKham"].GetType().Name != "DBNull" && dr["ngayKham"] != null)
        {
            this.ngayKham = Convert.ToString(dr["ngayKham"]);
        }
        else
        {
            this.ngayKham = "";
        }
        if (dr["ngayBatDau"].GetType().Name != "DBNull" && dr["ngayBatDau"] != null)
        {
            this.ngayBatDau = Convert.ToString(dr["ngayBatDau"]);
        }
        else
        {
            this.ngayBatDau = "";
        }
        if (dr["ngayKetThuc"].GetType().Name != "DBNull" && dr["ngayKetThuc"] != null)
        {
            this.ngayKetThuc = Convert.ToString(dr["ngayKetThuc"]);
        }
        else
        {
            this.ngayKetThuc = "";
        }
        if (dr["bacSiKham"].GetType().Name != "DBNull" && dr["bacSiKham"] != null)
        {
            this.bacSiKham = Convert.ToString(dr["bacSiKham"]);
        }
        else
        {
            this.bacSiKham = "";
        }
        if (dr["lyDoKham"].GetType().Name != "DBNull" && dr["lyDoKham"] != null)
        {
            this.lyDoKham = Convert.ToString(dr["lyDoKham"]);
        }
        else
        {
            this.lyDoKham = "";
        }
        if (dr["benhSu"].GetType().Name != "DBNull" && dr["benhSu"] != null)
        {
            this.benhSu = Convert.ToString(dr["benhSu"]);
        }
        else
        {
            this.benhSu = "";
        }
        if (dr["mach"].GetType().Name != "DBNull" && dr["mach"] != null)
        {
            this.mach = Convert.ToInt32(dr["mach"]);
        }
        else
        {
            this.mach = 0;
        }
        if (dr["nhietDo"].GetType().Name != "DBNull" && dr["nhietDo"] != null)
        {
            this.nhietDo = Convert.ToInt32(dr["nhietDo"]);
        }
        else
        {
            this.nhietDo = 0;
        }
        if (dr["huyetApTT"].GetType().Name != "DBNull" && dr["huyetApTT"] != null)
        {
            this.huyetApTT = Convert.ToInt32(dr["huyetApTT"]);
        }
        else
        {
            this.huyetApTT = 0;
        }
        if (dr["huyetApTD"].GetType().Name != "DBNull" && dr["huyetApTD"] != null)
        {
            this.huyetApTD = Convert.ToInt32(dr["huyetApTD"]);
        }
        else
        {
            this.huyetApTD = 0;
        }
        if (dr["nhipTho"].GetType().Name != "DBNull" && dr["nhipTho"] != null)
        {
            this.nhipTho = Convert.ToInt32(dr["nhipTho"]);
        }
        else
        {
            this.nhipTho = 0;
        }
        if (dr["chieuCao"].GetType().Name != "DBNull" && dr["chieuCao"] != null)
        {
            this.chieuCao = Convert.ToInt32(dr["chieuCao"]);
        }
        else
        {
            this.chieuCao = 0;
        }
        if (dr["canNang"].GetType().Name != "DBNull" && dr["canNang"] != null)
        {
            this.canNang = Convert.ToInt32(dr["canNang"]);
        }
        else
        {
            this.canNang = 0;
        }
        if (dr["chiSoBmi"].GetType().Name != "DBNull" && dr["chiSoBmi"] != null)
        {
            this.chiSoBmi = Convert.ToDecimal(dr["chiSoBmi"]);
        }
        else
        {
            this.chiSoBmi = 0;
        }
        if (dr["vongBung"].GetType().Name != "DBNull" && dr["vongBung"] != null)
        {
            this.vongBung = Convert.ToInt32(dr["vongBung"]);
        }
        else
        {
            this.vongBung = 0;
        }
        if (dr["khamDa"].GetType().Name != "DBNull" && dr["khamDa"] != null)
        {
            this.khamDa = Convert.ToString(dr["khamDa"]);
        }
        else
        {
            this.khamDa = "";
        }
        if (dr["khamNiemMac"].GetType().Name != "DBNull" && dr["khamNiemMac"] != null)
        {
            this.khamNiemMac = Convert.ToString(dr["khamNiemMac"]);
        }
        else
        {
            this.khamNiemMac = "";
        }
        if (dr["khamToanThanKhac"].GetType().Name != "DBNull" && dr["khamToanThanKhac"] != null)
        {
            this.khamToanThanKhac = Convert.ToString(dr["khamToanThanKhac"]);
        }
        else
        {
            this.khamToanThanKhac = "";
        }
        if (dr["khamTimMach"].GetType().Name != "DBNull" && dr["khamTimMach"] != null)
        {
            this.khamTimMach = Convert.ToString(dr["khamTimMach"]);
        }
        else
        {
            this.khamTimMach = "";
        }
        if (dr["khamHoHap"].GetType().Name != "DBNull" && dr["khamHoHap"] != null)
        {
            this.khamHoHap = Convert.ToString(dr["khamHoHap"]);
        }
        else
        {
            this.khamHoHap = "";
        }
        if (dr["khamTieuHoa"].GetType().Name != "DBNull" && dr["khamTieuHoa"] != null)
        {
            this.khamTieuHoa = Convert.ToString(dr["khamTieuHoa"]);
        }
        else
        {
            this.khamTieuHoa = "";
        }
        if (dr["khamTietNieu"].GetType().Name != "DBNull" && dr["khamTietNieu"] != null)
        {
            this.khamTietNieu = Convert.ToString(dr["khamTietNieu"]);
        }
        else
        {
            this.khamTietNieu = "";
        }
        if (dr["khamCoXuongKhop"].GetType().Name != "DBNull" && dr["khamCoXuongKhop"] != null)
        {
            this.khamCoXuongKhop = Convert.ToString(dr["khamCoXuongKhop"]);
        }
        else
        {
            this.khamCoXuongKhop = "";
        }
        if (dr["khamNoiTiet"].GetType().Name != "DBNull" && dr["khamNoiTiet"] != null)
        {
            this.khamNoiTiet = Convert.ToString(dr["khamNoiTiet"]);
        }
        else
        {
            this.khamNoiTiet = "";
        }
        if (dr["khamThanKinh"].GetType().Name != "DBNull" && dr["khamThanKinh"] != null)
        {
            this.khamThanKinh = Convert.ToString(dr["khamThanKinh"]);
        }
        else
        {
            this.khamThanKinh = "";
        }
        if (dr["tuVan"].GetType().Name != "DBNull" && dr["tuVan"] != null)
        {
            this.tuVan = Convert.ToString(dr["tuVan"]);
        }
        else
        {
            this.tuVan = "";
        }
        if (dr["chanDoanKetLuan"].GetType().Name != "DBNull" && dr["chanDoanKetLuan"] != null)
        {
            this.chanDoanKetLuan = Convert.ToString(dr["chanDoanKetLuan"]);
        }
        else
        {
            this.chanDoanKetLuan = "";
        }
        if (dr["henLichKham"].GetType().Name != "DBNull" && dr["henLichKham"] != null)
        {
            this.henLichKham = Convert.ToString(dr["henLichKham"]);
        }
        else
        {
            this.henLichKham = "";
        }
        if (dr["benhTheoDoi"].GetType().Name != "DBNull" && dr["benhTheoDoi"] != null)
        {
            this.benhTheoDoi = Convert.ToString(dr["benhTheoDoi"]);
        }
        else
        {
            this.benhTheoDoi = "";
        }
        if (dr["khamTamThan"].GetType().Name != "DBNull" && dr["khamTamThan"] != null)
        {
            this.khamTamThan = Convert.ToString(dr["khamTamThan"]);
        }
        else
        {
            this.khamTamThan = "";
        }
        if (dr["khamTMH"].GetType().Name != "DBNull" && dr["khamTMH"] != null)
        {
            this.khamTMH = Convert.ToString(dr["khamTMH"]);
        }
        else
        {
            this.khamTMH = "";
        }
        if (dr["khamRHM"].GetType().Name != "DBNull" && dr["khamRHM"] != null)
        {
            this.khamRHM = Convert.ToString(dr["khamRHM"]);
        }
        else
        {
            this.khamRHM = "";
        }
        if (dr["khamDinhDuong"].GetType().Name != "DBNull" && dr["khamDinhDuong"] != null)
        {
            this.khamDinhDuong = Convert.ToString(dr["khamDinhDuong"]);
        }
        else
        {
            this.khamDinhDuong = "";
        }
        if (dr["khamVanDong"].GetType().Name != "DBNull" && dr["khamVanDong"] != null)
        {
            this.khamVanDong = Convert.ToString(dr["khamVanDong"]);
        }
        else
        {
            this.khamVanDong = "";
        }
        if (dr["khamKhac"].GetType().Name != "DBNull" && dr["khamKhac"] != null)
        {
            this.khamKhac = Convert.ToString(dr["khamKhac"]);
        }
        else
        {
            this.khamKhac = "";
        }
        if (dr["khamDanhGia"].GetType().Name != "DBNull" && dr["khamDanhGia"] != null)
        {
            this.khamDanhGia = Convert.ToString(dr["khamDanhGia"]);
        }
        else
        {
            this.khamDanhGia = "";
        }
        if (dr["khamMat"].GetType().Name != "DBNull" && dr["khamMat"] != null)
        {
            this.khamMat = Convert.ToString(dr["khamMat"]);
        }
        else
        {
            this.khamMat = "";
        }
        if (dr["xnHuyetHoc"].GetType().Name != "DBNull" && dr["xnHuyetHoc"] != null)
        {
            this.xnHuyetHoc = Convert.ToString(dr["xnHuyetHoc"]);
        }
        else
        {
            this.xnHuyetHoc = "";
        }
        if (dr["xnSinhHoaMau"].GetType().Name != "DBNull" && dr["xnSinhHoaMau"] != null)
        {
            this.xnSinhHoaMau = Convert.ToString(dr["xnSinhHoaMau"]);
        }
        else
        {
            this.xnSinhHoaMau = "";
        }
        if (dr["xQuang"].GetType().Name != "DBNull" && dr["xQuang"] != null)
        {
            this.xQuang = Convert.ToString(dr["xQuang"]);
        }
        else
        {
            this.xQuang = "";
        }
        if (dr["sieuAm"].GetType().Name != "DBNull" && dr["sieuAm"] != null)
        {
            this.sieuAm = Convert.ToString(dr["sieuAm"]);
        }
        else
        {
            this.sieuAm = "";
        }
        if (dr["xnKhac"].GetType().Name != "DBNull" && dr["xnKhac"] != null)
        {
            this.xnKhac = Convert.ToString(dr["xnKhac"]);
        }
        else
        {
            this.xnKhac = "";
        }
        if (dr["tienThuoc"].GetType().Name != "DBNull" && dr["tienThuoc"] != null)
        {
            this.tienThuoc = Convert.ToInt32(dr["tienThuoc"]);
        }
        else
        {
            this.tienThuoc = 0;
        }
        if (dr["tienVtyt"].GetType().Name != "DBNull" && dr["tienVtyt"] != null)
        {
            this.tienVtyt = Convert.ToInt32(dr["tienVtyt"]);
        }
        else
        {
            this.tienVtyt = 0;
        }
        if (dr["tienTong"].GetType().Name != "DBNull" && dr["tienTong"] != null)
        {
            this.tienTong = Convert.ToInt32(dr["tienTong"]);
        }
        else
        {
            this.tienTong = 0;
        }
        if (dr["tienBntt"].GetType().Name != "DBNull" && dr["tienBntt"] != null)
        {
            this.tienBntt = Convert.ToInt32(dr["tienBntt"]);
        }
        else
        {
            this.tienBntt = 0;
        }
        if (dr["tienBncct"].GetType().Name != "DBNull" && dr["tienBncct"] != null)
        {
            this.tienBncct = Convert.ToInt32(dr["tienBncct"]);
        }
        else
        {
            this.tienBncct = 0;
        }
        if (dr["tienBhtt"].GetType().Name != "DBNull" && dr["tienBhtt"] != null)
        {
            this.tienBhtt = Convert.ToInt32(dr["tienBhtt"]);
        }
        else
        {
            this.tienBhtt = 0;
        }
        if (dr["tienNguonkhac"].GetType().Name != "DBNull" && dr["tienNguonkhac"] != null)
        {
            this.tienNguonkhac = Convert.ToInt32(dr["tienNguonkhac"]);
        }
        else
        {
            this.tienNguonkhac = 0;
        }
        if (dr["tienNgoaids"].GetType().Name != "DBNull" && dr["tienNgoaids"] != null)
        {
            this.tienNgoaids = Convert.ToInt32(dr["tienNgoaids"]);
        }
        else
        {
            this.tienNgoaids = 0;
        }
        if (dr["tienXn"].GetType().Name != "DBNull" && dr["tienXn"] != null)
        {
            this.tienXn = Convert.ToInt32(dr["tienXn"]);
        }
        else
        {
            this.tienXn = 0;
        }
        if (dr["tienCdha"].GetType().Name != "DBNull" && dr["tienCdha"] != null)
        {
            this.tienCdha = Convert.ToInt32(dr["tienCdha"]);
        }
        else
        {
            this.tienCdha = 0;
        }
        if (dr["tienTdcn"].GetType().Name != "DBNull" && dr["tienTdcn"] != null)
        {
            this.tienTdcn = Convert.ToInt32(dr["tienTdcn"]);
        }
        else
        {
            this.tienTdcn = 0;
        }
        if (dr["tienThuocBhyt"].GetType().Name != "DBNull" && dr["tienThuocBhyt"] != null)
        {
            this.tienThuocBhyt = Convert.ToInt32(dr["tienThuocBhyt"]);
        }
        else
        {
            this.tienThuocBhyt = 0;
        }
        if (dr["tienThuocUngthu"].GetType().Name != "DBNull" && dr["tienThuocUngthu"] != null)
        {
            this.tienThuocUngthu = Convert.ToInt32(dr["tienThuocUngthu"]);
        }
        else
        {
            this.tienThuocUngthu = 0;
        }
        if (dr["tienThuocTttl"].GetType().Name != "DBNull" && dr["tienThuocTttl"] != null)
        {
            this.tienThuocTttl = Convert.ToInt32(dr["tienThuocTttl"]);
        }
        else
        {
            this.tienThuocTttl = 0;
        }
        if (dr["tienMau"].GetType().Name != "DBNull" && dr["tienMau"] != null)
        {
            this.tienMau = Convert.ToInt32(dr["tienMau"]);
        }
        else
        {
            this.tienMau = 0;
        }
        if (dr["tienPttt"].GetType().Name != "DBNull" && dr["tienPttt"] != null)
        {
            this.tienPttt = Convert.ToInt32(dr["tienPttt"]);
        }
        else
        {
            this.tienPttt = 0;
        }
        if (dr["tienDvkt"].GetType().Name != "DBNull" && dr["tienDvkt"] != null)
        {
            this.tienDvkt = Convert.ToInt32(dr["tienDvkt"]);
        }
        else
        {
            this.tienDvkt = 0;
        }
        if (dr["tienVanChuyen"].GetType().Name != "DBNull" && dr["tienVanChuyen"] != null)
        {
            this.tienVanChuyen = Convert.ToInt32(dr["tienVanChuyen"]);
        }
        else
        {
            this.tienVanChuyen = 0;
        }
        if (dr["tienKham"].GetType().Name != "DBNull" && dr["tienKham"] != null)
        {
            this.tienKham = Convert.ToInt32(dr["tienKham"]);
        }
        else
        {
            this.tienKham = 0;
        }
        if (dr["tienGiuongNgoai"].GetType().Name != "DBNull" && dr["tienGiuongNgoai"] != null)
        {
            this.tienGiuongNgoai = Convert.ToInt32(dr["tienGiuongNgoai"]);
        }
        else
        {
            this.tienGiuongNgoai = 0;
        }
        if (dr["tienGiuongNoi"].GetType().Name != "DBNull" && dr["tienGiuongNoi"] != null)
        {
            this.tienGiuongNoi = Convert.ToInt32(dr["tienGiuongNoi"]);
        }
        else
        {
            this.tienGiuongNoi = 0;
        }
        if (dr["tienVtytTyle"].GetType().Name != "DBNull" && dr["tienVtytTyle"] != null)
        {
            this.tienVtytTyle = Convert.ToInt32(dr["tienVtytTyle"]);
        }
        else
        {
            this.tienVtytTyle = 0;
        }
        if (dr["tienVtytBhyt"].GetType().Name != "DBNull" && dr["tienVtytBhyt"] != null)
        {
            this.tienVtytBhyt = Convert.ToInt32(dr["tienVtytBhyt"]);
        }
        else
        {
            this.tienVtytBhyt = 0;
        }
        this.CanLamSang = DichVu.GetDichVu(mabn, makhoa, tungay, denngay, loai, DK, qadmin);
        this.DonThuocHoSoKhamChuaBenh = Thuoc.GetThuoc(mabn, makhoa, tungay, denngay, loai, DK, qadmin);
        this.DvktHoSoKhamChuaBenh = Dvkt.GetDvkt(mabn, makhoa, tungay, denngay, loai, DK, qadmin);
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<HoSoKhamChuaBenh> GetHoSoKhamChuaBenh(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<HoSoKhamChuaBenh> List = new List<HoSoKhamChuaBenh>();
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_KhamBenh_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                List.Add(new HoSoKhamChuaBenh(dr, mabn, makhoa, tungay, denngay, loai, DK, qadmin));
            }
        }
        return List;
    }
    public static HoSoKhamChuaBenh GetByHoSoKhamChuaBenh(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_KhamBenh_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new HoSoKhamChuaBenh(dr, mabn, makhoa, tungay, denngay, loai, DK, qadmin);
            }
        }
        return null;
    }
}

public class DichVu
{
    private string _maDichVu = string.Empty;
    public string maDichVu
    {
        get
        {
            return _maDichVu;
        }
        set
        {
            _maDichVu = value;
        }
    }
    private string _maNhom = string.Empty;
    public string maNhom
    {
        get
        {
            return _maNhom;
        }
        set
        {
            _maNhom = value;
        }
    }
    private string _tenDichVu = string.Empty;
    public string tenDichVu
    {
        get
        {
            return _tenDichVu;
        }
        set
        {
            _tenDichVu = value;
        }
    }
    private string _ketQua = string.Empty;
    public string ketQua
    {
        get
        {
            return _ketQua;
        }
        set
        {
            _ketQua = value;
        }
    }
    public DichVu()
    {
        maDichVu = "";
        maNhom = "";
        tenDichVu = "";
        ketQua = "";

    }
    public DichVu(String maDichVu, String maNhom, String tenDichVu, String ketQua)
    {
        this.maDichVu = maDichVu;
        this.maNhom = maNhom;
        this.tenDichVu = tenDichVu;
        this.ketQua = ketQua;

    }
    public DichVu(IDataReader dr)
    {
        if (dr["maDichVu"].GetType().Name != "DBNull" && dr["maDichVu"] != null)
        {
            this.maDichVu = Convert.ToString(dr["maDichVu"]);
        }
        else
        {
            this.maDichVu = "";
        }
        if (dr["maNhom"].GetType().Name != "DBNull" && dr["maNhom"] != null)
        {
            this.maNhom = Convert.ToString(dr["maNhom"]);
        }
        else
        {
            this.maNhom = "";
        }
        if (dr["tenDichVu"].GetType().Name != "DBNull" && dr["tenDichVu"] != null)
        {
            this.tenDichVu = Convert.ToString(dr["tenDichVu"]);
        }
        else
        {
            this.tenDichVu = "";
        }
        if (dr["ketQua"].GetType().Name != "DBNull" && dr["ketQua"] != null)
        {
            this.ketQua = Convert.ToString(dr["ketQua"]);
        }
        else
        {
            this.ketQua = "";
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<DichVu> GetDichVu(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<DichVu> List = new List<DichVu>();
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_c_thongtinchung_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                List.Add(new DichVu(dr));
            }
        }
        return List;
    }
}

public class Thuoc
{
    private string _tenThuoc = string.Empty;
    public string tenThuoc
    {
        get
        {
            return _tenThuoc;
        }
        set
        {
            _tenThuoc = value;
        }
    }
    private string _duongDung = string.Empty;
    public string duongDung
    {
        get
        {
            return _duongDung;
        }
        set
        {
            _duongDung = value;
        }
    }
    private decimal _soLuong = 0;
    public decimal soLuong
    {
        get
        {
            return _soLuong;
        }
        set
        {
            _soLuong = value;
        }
    }
    private string _lieuDung = string.Empty;
    public string lieuDung
    {
        get
        {
            return _lieuDung;
        }
        set
        {
            _lieuDung = value;
        }
    }
    private string _soDangKy = string.Empty;
    public string soDangKy
    {
        get
        {
            return _soDangKy;
        }
        set
        {
            _soDangKy = value;
        }
    }
    private decimal _thanhTien = 0;
    public decimal thanhTien
    {
        get
        {
            return _thanhTien;
        }
        set
        {
            _thanhTien = value;
        }
    }
    private decimal _tienNguonKhac = 0;
    public decimal tienNguonKhac
    {
        get
        {
            return _tienNguonKhac;
        }
        set
        {
            _tienNguonKhac = value;
        }
    }
    private decimal _tienBntt = 0;
    public decimal tienBntt
    {
        get
        {
            return _tienBntt;
        }
        set
        {
            _tienBntt = value;
        }
    }
    private decimal _tienBhtt = 0;
    public decimal tienBhtt
    {
        get
        {
            return _tienBhtt;
        }
        set
        {
            _tienBhtt = value;
        }
    }
    private decimal _tienBncct = 0;
    public decimal tienBncct
    {
        get
        {
            return _tienBncct;
        }
        set
        {
            _tienBncct = value;
        }
    }
    private decimal _tienNgoaids = 0;
    public decimal tienNgoaids
    {
        get
        {
            return _tienNgoaids;
        }
        set
        {
            _tienNgoaids = value;
        }
    }
    public Thuoc()
    {
        tenThuoc = "";
        duongDung = "";
        soLuong = 0;
        lieuDung = "";
        soDangKy = "";
        thanhTien = 0;
        tienNguonKhac = 0;
        tienBntt = 0;
        tienBhtt = 0;
        tienBncct = 0;
        tienNgoaids = 0;
    }
    public Thuoc(String tenThuoc, String duongDung, Decimal soLuong, String lieuDung, String soDangKy, Decimal thanhTien, Int32 tienNguonKhac, Int32 tienBntt, Int32 tienBhtt, Int32 tienBncct, Int32 tienNgoaids)
    {
        this.tenThuoc = tenThuoc;
        this.duongDung = duongDung;
        this.soLuong = soLuong;
        this.lieuDung = lieuDung;
        this.soDangKy = soDangKy;
        this.thanhTien = thanhTien;
        this.tienNguonKhac = tienNguonKhac;
        this.tienBntt = tienBntt;
        this.tienBhtt = tienBhtt;
        this.tienBncct = tienBncct;
        this.tienNgoaids = tienNgoaids;
    }
    public Thuoc(IDataReader dr)
    {
        if (dr["tenThuoc"].GetType().Name != "DBNull" && dr["tenThuoc"] != null)
        {
            this.tenThuoc = Convert.ToString(dr["tenThuoc"]);
        }
        else
        {
            this.tenThuoc = "";
        }
        if (dr["duongDung"].GetType().Name != "DBNull" && dr["duongDung"] != null)
        {
            this.duongDung = Convert.ToString(dr["duongDung"]);
        }
        else
        {
            this.duongDung = "";
        }
        if (dr["soLuong"].GetType().Name != "DBNull" && dr["soLuong"] != null)
        {
            this.soLuong = Convert.ToDecimal(dr["soLuong"]);
        }
        else
        {
            this.soLuong = 0;
        }
        if (dr["lieuDung"].GetType().Name != "DBNull" && dr["lieuDung"] != null)
        {
            this.lieuDung = Convert.ToString(dr["lieuDung"]);
        }
        else
        {
            this.lieuDung = "";
        }
        if (dr["soDangKy"].GetType().Name != "DBNull" && dr["soDangKy"] != null)
        {
            this.soDangKy = Convert.ToString(dr["soDangKy"]);
        }
        else
        {
            this.soDangKy = "";
        }
        if (dr["thanhTien"].GetType().Name != "DBNull" && dr["thanhTien"] != null)
        {
            this.thanhTien = Convert.ToDecimal(dr["thanhTien"]);
        }
        else
        {
            this.thanhTien = 0;
        }
        if (dr["tienNguonKhac"].GetType().Name != "DBNull" && dr["tienNguonKhac"] != null)
        {
            this.tienNguonKhac = Convert.ToInt32(dr["tienNguonKhac"]);
        }
        else
        {
            this.tienNguonKhac = 0;
        }
        if (dr["tienBntt"].GetType().Name != "DBNull" && dr["tienBntt"] != null)
        {
            this.tienBntt = Convert.ToInt32(dr["tienBntt"]);
        }
        else
        {
            this.tienBntt = 0;
        }
        if (dr["tienBhtt"].GetType().Name != "DBNull" && dr["tienBhtt"] != null)
        {
            this.tienBhtt = Convert.ToInt32(dr["tienBhtt"]);
        }
        else
        {
            this.tienBhtt = 0;
        }
        if (dr["tienBncct"].GetType().Name != "DBNull" && dr["tienBncct"] != null)
        {
            this.tienBncct = Convert.ToInt32(dr["tienBncct"]);
        }
        else
        {
            this.tienBncct = 0;
        }
        if (dr["tienNgoaids"].GetType().Name != "DBNull" && dr["tienNgoaids"] != null)
        {
            this.tienNgoaids = Convert.ToInt32(dr["tienNgoaids"]);
        }
        else
        {
            this.tienNgoaids = 0;
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<Thuoc> GetThuoc(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<Thuoc> List = new List<Thuoc>();
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_Thuocsd_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                List.Add(new Thuoc(dr));
            }
        }
        return List;
    }
}

public class Dvkt
{
    private string _maDichVu;
    public string maDichVu
    {
        get
        {
            return _maDichVu;
        }
        set
        {
            _maDichVu = value;
        }
    }
    private string _tenDichVu;
    public string tenDichVu
    {
        get
        {
            return _tenDichVu;
        }
        set
        {
            _tenDichVu = value;
        }
    }
    private string _maNhom;
    public string maNhom
    {
        get
        {
            return _maNhom;
        }
        set
        {
            _maNhom = value;
        }
    }
    private string _donViTinh;
    public string donViTinh
    {
        get
        {
            return _donViTinh;
        }
        set
        {
            _donViTinh = value;
        }
    }
    private decimal _soLuong;
    public decimal soLuong
    {
        get
        {
            return _soLuong;
        }
        set
        {
            _soLuong = value;
        }
    }
    private decimal _thanhTien;
    public decimal thanhTien
    {
        get
        {
            return _thanhTien;
        }
        set
        {
            _thanhTien = value;
        }
    }
    private decimal _tienNguonKhac;
    public decimal tienNguonKhac
    {
        get
        {
            return _tienNguonKhac;
        }
        set
        {
            _tienNguonKhac = value;
        }
    }
    private decimal _tienBntt;
    public decimal tienBntt
    {
        get
        {
            return _tienBntt;
        }
        set
        {
            _tienBntt = value;
        }
    }
    private decimal _tienBhtt;
    public decimal tienBhtt
    {
        get
        {
            return _tienBhtt;
        }
        set
        {
            _tienBhtt = value;
        }
    }
    private decimal _tienBncct;
    public decimal tienBncct
    {
        get
        {
            return _tienBncct;
        }
        set
        {
            _tienBncct = value;
        }
    }
    private decimal _tienNgoaids;
    public decimal tienNgoaids
    {
        get
        {
            return _tienNgoaids;
        }
        set
        {
            _tienNgoaids = value;
        }
    }
    public Dvkt()
    {

    }
    public Dvkt(String maDichVu, String tenDichVu, String maNhom, String donViTinh, Decimal soLuong, Decimal thanhTien, Int32 tienNguonKhac, Int32 tienBntt, Int32 tienBhtt, Int32 tienBncct, Int32 tienNgoaids)
    {
        this.maDichVu = maDichVu;
        this.tenDichVu = tenDichVu;
        this.maNhom = maNhom;
        this.donViTinh = donViTinh;
        this.soLuong = soLuong;
        this.thanhTien = thanhTien;
        this.tienNguonKhac = tienNguonKhac;
        this.tienBntt = tienBntt;
        this.tienBhtt = tienBhtt;
        this.tienBncct = tienBncct;
        this.tienNgoaids = tienNgoaids;
    }
    public Dvkt(IDataReader dr)
    {
        if (dr["maDichVu"].GetType().Name != "DBNull" && dr["maDichVu"] != null)
        {
            this.maDichVu = Convert.ToString(dr["maDichVu"]);
        }
        if (dr["tenDichVu"].GetType().Name != "DBNull" && dr["tenDichVu"] != null)
        {
            this.tenDichVu = Convert.ToString(dr["tenDichVu"]);
        }
        if (dr["maNhom"].GetType().Name != "DBNull" && dr["maNhom"] != null)
        {
            this.maNhom = Convert.ToString(dr["maNhom"]);
        }
        if (dr["donViTinh"].GetType().Name != "DBNull" && dr["donViTinh"] != null)
        {
            this.donViTinh = Convert.ToString(dr["donViTinh"]);
        }
        if (dr["soLuong"].GetType().Name != "DBNull" && dr["soLuong"] != null)
        {
            this.soLuong = Convert.ToDecimal(dr["soLuong"]);
        }
        if (dr["thanhTien"].GetType().Name != "DBNull" && dr["thanhTien"] != null)
        {
            this.thanhTien = Convert.ToDecimal(dr["thanhTien"]);
        }
        if (dr["tienNguonKhac"].GetType().Name != "DBNull" && dr["tienNguonKhac"] != null)
        {
            this.tienNguonKhac = Convert.ToInt32(dr["tienNguonKhac"]);
        }
        if (dr["tienBntt"].GetType().Name != "DBNull" && dr["tienBntt"] != null)
        {
            this.tienBntt = Convert.ToInt32(dr["tienBntt"]);
        }
        if (dr["tienBhtt"].GetType().Name != "DBNull" && dr["tienBhtt"] != null)
        {
            this.tienBhtt = Convert.ToInt32(dr["tienBhtt"]);
        }
        if (dr["tienBncct"].GetType().Name != "DBNull" && dr["tienBncct"] != null)
        {
            this.tienBncct = Convert.ToInt32(dr["tienBncct"]);
        }
        if (dr["tienNgoaids"].GetType().Name != "DBNull" && dr["tienNgoaids"] != null)
        {
            this.tienNgoaids = Convert.ToInt32(dr["tienNgoaids"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<Dvkt> GetDvkt(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<Dvkt> List = new List<Dvkt>();
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_c_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                List.Add(new Dvkt(dr));
            }
        }
        return List;
    }
}

public class ThongTinKhamThai
{
    private int _lanCoThai;
    public int lanCoThai
    {
        get
        {
            return _lanCoThai;
        }
        set
        {
            _lanCoThai = value;
        }
    }
    private string _kyKinhCuoi = string.Empty;
    public string kyKinhCuoi
    {
        get
        {
            return _kyKinhCuoi;
        }
        set
        {
            _kyKinhCuoi = value;
        }
    }
    private string _duKienSinh = string.Empty;
    public string duKienSinh
    {
        get
        {
            return _duKienSinh;
        }
        set
        {
            _duKienSinh = value;
        }
    }
    private string _skConTruoc = string.Empty;
    public string skConTruoc
    {
        get
        {
            return _skConTruoc;
        }
        set
        {
            _skConTruoc = value;
        }
    }
    [XmlIgnore]
    private List<NhatKyKhamThai> _CacLanKhamThai;
    public List<NhatKyKhamThai> CacLanKhamThai
    {
        get
        {
            if (_CacLanKhamThai == null)
                _CacLanKhamThai = new List<NhatKyKhamThai>();
            return _CacLanKhamThai;
        }
        set
        {
            if (value != null)
                _CacLanKhamThai = value;
        }
    }
    public ThongTinKhamThai(IDataReader dr, String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        if (dr["lanCoThai"].GetType().Name != "DBNull" && dr["lanCoThai"] != null)
        {
            this.lanCoThai = Convert.ToInt32(dr["lanCoThai"]);
        }
        if (dr["kyKinhCuoi"].GetType().Name != "DBNull" && dr["kyKinhCuoi"] != null)
        {
            this.kyKinhCuoi = Convert.ToDateTime(dr["kyKinhCuoi"]).ToString("dd/MM/yyyy");
        }
        if (dr["duKienSinh"].GetType().Name != "DBNull" && dr["duKienSinh"] != null)
        {
            this.duKienSinh = Convert.ToString(dr["duKienSinh"]);
        }
        if (dr["skConTruoc"].GetType().Name != "DBNull" && dr["skConTruoc"] != null)
        {
            this.skConTruoc = Convert.ToString(dr["skConTruoc"]);
        }
        List<NhatKyKhamThai> nkkt = NhatKyKhamThai.GetNhatKyKhamThai(mabn, makhoa, tungay, denngay, loai, DK, qadmin);
        if (nkkt.Count > 0 && nkkt[0].ngayKham != null && nkkt[0].ngayKham.Length == 10)
            this.CacLanKhamThai = nkkt;
        else this.CacLanKhamThai = null;
    }
    public ThongTinKhamThai()
    { }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinKhamThai GetThongTinKhamThai(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinKhamThai(dr, mabn, makhoa, tungay, denngay, 2, DK, qadmin);
            }
        }
        return null;
    }
}

public class NhatKyKhamThai
{
    private string _ngayKham;
    public string ngayKham
    {
        get
        {
            return _ngayKham;
        }
        set
        {
            _ngayKham = value;
        }
    }
    private decimal _tuanThai;
    public decimal tuanThai
    {
        get
        {
            return _tuanThai;
        }
        set
        {
            _tuanThai = value;
        }
    }
    private decimal _trongLuongMe;
    public decimal trongLuongMe
    {
        get
        {
            return _trongLuongMe;
        }
        set
        {
            _trongLuongMe = value;
        }
    }
    private decimal _chieuCaoMe;
    public decimal chieuCaoMe
    {
        get
        {
            return _chieuCaoMe;
        }
        set
        {
            _chieuCaoMe = value;
        }
    }
    private int _huyetApToiThieu;
    public int huyetApToiThieu
    {
        get
        {
            return _huyetApToiThieu;
        }
        set
        {
            _huyetApToiThieu = value;
        }
    }
    private int _huyetApToiDa;
    public int huyetApToiDa
    {
        get
        {
            return _huyetApToiDa;
        }
        set
        {
            _huyetApToiDa = value;
        }
    }
    private decimal _chieuCaoTuCung;
    public decimal chieuCaoTuCung
    {
        get
        {
            return _chieuCaoTuCung;
        }
        set
        {
            _chieuCaoTuCung = value;
        }
    }
    private decimal _vongBung;
    public decimal vongBung
    {
        get
        {
            return _vongBung;
        }
        set
        {
            _vongBung = value;
        }
    }
    private decimal _khungChau;
    public decimal khungChau
    {
        get
        {
            return _khungChau;
        }
        set
        {
            _khungChau = value;
        }
    }
    private int _tinhTrangThieuMau;
    public int tinhTrangThieuMau
    {
        get
        {
            return _tinhTrangThieuMau;
        }
        set
        {
            _tinhTrangThieuMau = value;
        }
    }
    private decimal _chuVidau;
    public decimal chuVidau
    {
        get
        {
            return _chuVidau;
        }
        set
        {
            _chuVidau = value;
        }
    }
    private decimal _chuViBung;
    public decimal chuViBung
    {
        get
        {
            return _chuViBung;
        }
        set
        {
            _chuViBung = value;
        }
    }
    private decimal _kichThuocThuyChan;
    public decimal kichThuocThuyChan
    {
        get
        {
            return _kichThuocThuyChan;
        }
        set
        {
            _kichThuocThuyChan = value;
        }
    }
    private decimal _proteinNieu;
    public decimal proteinNieu
    {
        get
        {
            return _proteinNieu;
        }
        set
        {
            _proteinNieu = value;
        }
    }
    private int _xnHiv;
    public int xnHiv
    {
        get
        {
            return _xnHiv;
        }
        set
        {
            _xnHiv = value;
        }
    }
    private string _xnKhac;
    public string xnKhac
    {
        get
        {
            return _xnKhac;
        }
        set
        {
            _xnKhac = value;
        }
    }
    private string _tienLuongDe;
    public string tienLuongDe
    {
        get
        {
            return _tienLuongDe;
        }
        set
        {
            _tienLuongDe = value;
        }
    }
    private int _uongVienSat;
    public int uongVienSat
    {
        get
        {
            return _uongVienSat;
        }
        set
        {
            _uongVienSat = value;
        }
    }
    private int _timThai;
    public int timThai
    {
        get
        {
            return _timThai;
        }
        set
        {
            _timThai = value;
        }
    }
    private string _ngoiThai;
    public string ngoiThai
    {
        get
        {
            return _ngoiThai;
        }
        set
        {
            _ngoiThai = value;
        }
    }
    private string _tuVanKhac;
    public string tuVanKhac
    {
        get
        {
            return _tuVanKhac;
        }
        set
        {
            _tuVanKhac = value;
        }
    }
    private string _bacSyKham;
    public string bacSyKham
    {
        get
        {
            return _bacSyKham;
        }
        set
        {
            _bacSyKham = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    private string _ketLuan;
    public string ketLuan
    {
        get
        {
            return _ketLuan;
        }
        set
        {
            _ketLuan = value;
        }
    }
    public NhatKyKhamThai()
    { }
    public NhatKyKhamThai(IDataReader dr)
    {
        if (dr["ngayKham"].GetType().Name != "DBNull" && dr["ngayKham"] != null)
        {
            this.ngayKham = Convert.ToString(dr["ngayKham"]);
        }
        if (dr["tuanThai"].GetType().Name != "DBNull" && dr["tuanThai"] != null)
        {
            this.tuanThai = Convert.ToInt32(dr["tuanThai"]);
        }
        if (dr["trongLuongMe"].GetType().Name != "DBNull" && dr["trongLuongMe"] != null)
        {
            this.trongLuongMe = Convert.ToInt32(dr["trongLuongMe"]);
        }
        if (dr["chieuCaoMe"].GetType().Name != "DBNull" && dr["chieuCaoMe"] != null)
        {
            this.chieuCaoMe = Convert.ToInt32(dr["chieuCaoMe"]);
        }
        if (dr["huyetApToiThieu"].GetType().Name != "DBNull" && dr["huyetApToiThieu"] != null)
        {
            this.huyetApToiThieu = Convert.ToInt32(dr["huyetApToiThieu"]);
        }
        if (dr["huyetApToiDa"].GetType().Name != "DBNull" && dr["huyetApToiDa"] != null)
        {
            this.huyetApToiDa = Convert.ToInt32(dr["huyetApToiDa"]);
        }
        if (dr["chieuCaoTuCung"].GetType().Name != "DBNull" && dr["chieuCaoTuCung"] != null)
        {
            this.chieuCaoTuCung = Convert.ToInt32(dr["chieuCaoTuCung"]);
        }
        if (dr["vongBung"].GetType().Name != "DBNull" && dr["vongBung"] != null)
        {
            this.vongBung = Convert.ToInt32(dr["vongBung"]);
        }
        if (dr["khungChau"].GetType().Name != "DBNull" && dr["khungChau"] != null)
        {
            this.khungChau = Convert.ToInt32(dr["khungChau"]);
        }
        if (dr["tinhTrangThieuMau"].GetType().Name != "DBNull" && dr["tinhTrangThieuMau"] != null)
        {
            this.tinhTrangThieuMau = Convert.ToInt32(dr["tinhTrangThieuMau"]);
        }
        if (dr["chuVidau"].GetType().Name != "DBNull" && dr["chuVidau"] != null)
        {
            this.chuVidau = Convert.ToInt32(dr["chuVidau"]);
        }
        if (dr["chuViBung"].GetType().Name != "DBNull" && dr["chuViBung"] != null)
        {
            this.chuViBung = Convert.ToInt32(dr["chuViBung"]);
        }
        if (dr["kichThuocThuyChan"].GetType().Name != "DBNull" && dr["kichThuocThuyChan"] != null)
        {
            this.kichThuocThuyChan = Convert.ToInt32(dr["kichThuocThuyChan"]);
        }
        if (dr["xnHiv"].GetType().Name != "DBNull" && dr["xnHiv"] != null)
        {
            this.xnHiv = Convert.ToInt32(dr["xnHiv"]);
        }
        if (dr["xnKhac"].GetType().Name != "DBNull" && dr["xnKhac"] != null)
        {
            this.xnKhac = Convert.ToString(dr["xnKhac"]);
        }
        if (dr["tienLuongDe"].GetType().Name != "DBNull" && dr["tienLuongDe"] != null)
        {
            this.tienLuongDe = Convert.ToString(dr["tienLuongDe"]);
        }
        if (dr["uongVienSat"].GetType().Name != "DBNull" && dr["uongVienSat"] != null)
        {
            this.uongVienSat = Convert.ToInt32(dr["uongVienSat"]);
        }
        if (dr["timThai"].GetType().Name != "DBNull" && dr["timThai"] != null)
        {
            this.timThai = Convert.ToInt32(dr["timThai"]);
        }
        if (dr["ngoiThai"].GetType().Name != "DBNull" && dr["ngoiThai"] != null)
        {
            this.ngoiThai = Convert.ToString(dr["ngoiThai"]);
        }
        if (dr["tuVanKhac"].GetType().Name != "DBNull" && dr["tuVanKhac"] != null)
        {
            this.tuVanKhac = Convert.ToString(dr["tuVanKhac"]);
        }
        if (dr["bacSyKham"].GetType().Name != "DBNull" && dr["bacSyKham"] != null)
        {
            this.bacSyKham = Convert.ToString(dr["bacSyKham"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
        if (dr["ketLuan"].GetType().Name != "DBNull" && dr["ketLuan"] != null)
        {
            this.ketLuan = Convert.ToString(dr["ketLuan"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static List<NhatKyKhamThai> GetNhatKyKhamThai(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        List<NhatKyKhamThai> List = new List<NhatKyKhamThai>();
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                List.Add(new NhatKyKhamThai(dr));
            }
        }
        return List;
    }
}

public class TinhTrangDe
{
    private string _ngayDe;
    public string ngayDe
    {
        get
        {
            return _ngayDe;
        }
        set
        {
            _ngayDe = value;
        }
    }
    private int _duocQuanLyThai;
    public int duocQuanLyThai
    {
        get
        {
            return _duocQuanLyThai;
        }
        set
        {
            _duocQuanLyThai = value;
        }
    }
    private int _tiemUonVanDayDu;
    public int tiemUonVanDayDu
    {
        get
        {
            return _tiemUonVanDayDu;
        }
        set
        {
            _tiemUonVanDayDu = value;
        }
    }
    private int _soLanKhamThaiTrong3ThoiKy;
    public int soLanKhamThaiTrong3ThoiKy
    {
        get
        {
            return _soLanKhamThaiTrong3ThoiKy;
        }
        set
        {
            _soLanKhamThaiTrong3ThoiKy = value;
        }
    }
    private int _xnHIVKhiMangThai;
    public int xnHIVKhiMangThai
    {
        get
        {
            return _xnHIVKhiMangThai;
        }
        set
        {
            _xnHIVKhiMangThai = value;
        }
    }
    private int _xnHIVKhiChuyenDa;
    public int xnHIVKhiChuyenDa
    {
        get
        {
            return _xnHIVKhiChuyenDa;
        }
        set
        {
            _xnHIVKhiChuyenDa = value;
        }
    }
    private int _soLanDeDuThang;
    public int soLanDeDuThang
    {
        get
        {
            return _soLanDeDuThang;
        }
        set
        {
            _soLanDeDuThang = value;
        }
    }
    private int _soLanDeNon;
    public int soLanDeNon
    {
        get
        {
            return _soLanDeNon;
        }
        set
        {
            _soLanDeNon = value;
        }
    }
    private int _soLanSayThaiPhaThai;
    public int soLanSayThaiPhaThai
    {
        get
        {
            return _soLanSayThaiPhaThai;
        }
        set
        {
            _soLanSayThaiPhaThai = value;
        }
    }
    private int _soConHienCo;
    public int soConHienCo
    {
        get
        {
            return _soConHienCo;
        }
        set
        {
            _soConHienCo = value;
        }
    }
    private int _cachThucDe;
    public int cachThucDe
    {
        get
        {
            return _cachThucDe;
        }
        set
        {
            _cachThucDe = value;
        }
    }
    private int _gioiTinh;
    public int gioiTinh
    {
        get
        {
            return _gioiTinh;
        }
        set
        {
            _gioiTinh = value;
        }
    }
    private decimal _canNang;
    public decimal canNang
    {
        get
        {
            return _canNang;
        }
        set
        {
            _canNang = value;
        }
    }
    private string _tinhTrangConSongChet;
    public string tinhTrangConSongChet
    {
        get
        {
            return _tinhTrangConSongChet;
        }
        set
        {
            _tinhTrangConSongChet = value;
        }
    }
    private int _tvThaiTu22TuanDenKhiDe;
    public int tvThaiTu22TuanDenKhiDe
    {
        get
        {
            return _tvThaiTu22TuanDenKhiDe;
        }
        set
        {
            _tvThaiTu22TuanDenKhiDe = value;
        }
    }
    private int _loaiTaiBien;
    public int loaiTaiBien
    {
        get
        {
            return _loaiTaiBien;
        }
        set
        {
            _loaiTaiBien = value;
        }
    }
    private string _cacTaiBien;
    public string cacTaiBien
    {
        get
        {
            return _cacTaiBien;
        }
        set
        {
            _cacTaiBien = value;
        }
    }
    private string _loaiNoiDe;
    public string loaiNoiDe
    {
        get
        {
            return _loaiNoiDe;
        }
        set
        {
            _loaiNoiDe = value;
        }
    }
    private string _noiDe;
    public string noiDe
    {
        get
        {
            return _noiDe;
        }
        set
        {
            _noiDe = value;
        }
    }
    private string _nguoiDo;
    public string nguoiDo
    {
        get
        {
            return _nguoiDo;
        }
        set
        {
            _nguoiDo = value;
        }
    }
    private int _treBuGioDau;
    public int treBuGioDau
    {
        get
        {
            return _treBuGioDau;
        }
        set
        {
            _treBuGioDau = value;
        }
    }
    private int _tiemVitaminK;
    public int tiemVitaminK
    {
        get
        {
            return _tiemVitaminK;
        }
        set
        {
            _tiemVitaminK = value;
        }
    }
    private string _ngayKhamTuanDau;
    public string ngayKhamTuanDau
    {
        get
        {
            return _ngayKhamTuanDau;
        }
        set
        {
            _ngayKhamTuanDau = value;
        }
    }
    private string _khamTu7Den42NgaySauDe;
    public string khamTu7Den42NgaySauDe
    {
        get
        {
            return _khamTu7Den42NgaySauDe;
        }
        set
        {
            _khamTu7Den42NgaySauDe = value;
        }
    }
    private string _benhVienDe;
    public string benhVienDe
    {
        get
        {
            return _benhVienDe;
        }
        set
        {
            _benhVienDe = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    public TinhTrangDe()
    { }
    public TinhTrangDe(IDataReader dr)
    {
        if (dr["ngayDe"].GetType().Name != "DBNull" && dr["ngayDe"] != null)
        {
            this.ngayDe = Convert.ToString(dr["ngayDe"]);
        }
        if (dr["duocQuanLyThai"].GetType().Name != "DBNull" && dr["duocQuanLyThai"] != null)
        {
            this.duocQuanLyThai = Convert.ToInt32(dr["duocQuanLyThai"]);
        }
        if (dr["tiemUonVanDayDu"].GetType().Name != "DBNull" && dr["tiemUonVanDayDu"] != null)
        {
            this.tiemUonVanDayDu = Convert.ToInt32(dr["tiemUonVanDayDu"]);
        }
        if (dr["soLanKhamThaiTrong3ThoiKy"].GetType().Name != "DBNull" && dr["soLanKhamThaiTrong3ThoiKy"] != null)
        {
            this.soLanKhamThaiTrong3ThoiKy = Convert.ToInt32(dr["soLanKhamThaiTrong3ThoiKy"]);
        }
        if (dr["xnHIVKhiMangThai"].GetType().Name != "DBNull" && dr["xnHIVKhiMangThai"] != null)
        {
            this.xnHIVKhiMangThai = Convert.ToInt32(dr["xnHIVKhiMangThai"]);
        }
        if (dr["xnHIVKhiChuyenDa"].GetType().Name != "DBNull" && dr["xnHIVKhiChuyenDa"] != null)
        {
            this.xnHIVKhiChuyenDa = Convert.ToInt32(dr["xnHIVKhiChuyenDa"]);
        }
        if (dr["soLanDeDuThang"].GetType().Name != "DBNull" && dr["soLanDeDuThang"] != null)
        {
            this.soLanDeDuThang = Convert.ToInt32(dr["soLanDeDuThang"]);
        }
        if (dr["soLanDeNon"].GetType().Name != "DBNull" && dr["soLanDeNon"] != null)
        {
            this.soLanDeNon = Convert.ToInt32(dr["soLanDeNon"]);
        }
        if (dr["soLanSayThaiPhaThai"].GetType().Name != "DBNull" && dr["soLanSayThaiPhaThai"] != null)
        {
            this.soLanSayThaiPhaThai = Convert.ToInt32(dr["soLanSayThaiPhaThai"]);
        }
        if (dr["soConHienCo"].GetType().Name != "DBNull" && dr["soConHienCo"] != null)
        {
            this.soConHienCo = Convert.ToInt32(dr["soConHienCo"]);
        }
        if (dr["cachThucDe"].GetType().Name != "DBNull" && dr["cachThucDe"] != null)
        {
            this.cachThucDe = Convert.ToInt32(dr["cachThucDe"]);
        }
        if (dr["gioiTinh"].GetType().Name != "DBNull" && dr["gioiTinh"] != null)
        {
            this.gioiTinh = Convert.ToInt32(dr["gioiTinh"]);
        }
        if (dr["canNang"].GetType().Name != "DBNull" && dr["canNang"] != null)
        {
            this.canNang = Convert.ToInt32(dr["canNang"]);
        }
        if (dr["tinhTrangConSongChet"].GetType().Name != "DBNull" && dr["tinhTrangConSongChet"] != null)
        {
            this.tinhTrangConSongChet = Convert.ToString(dr["tinhTrangConSongChet"]);
        }
        if (dr["tvThaiTu22TuanDenKhiDe"].GetType().Name != "DBNull" && dr["tvThaiTu22TuanDenKhiDe"] != null)
        {
            this.tvThaiTu22TuanDenKhiDe = Convert.ToInt32(dr["tvThaiTu22TuanDenKhiDe"]);
        }
        if (dr["loaiTaiBien"].GetType().Name != "DBNull" && dr["loaiTaiBien"] != null)
        {
            this.loaiTaiBien = Convert.ToInt32(dr["loaiTaiBien"]);
        }
        if (dr["cacTaiBien"].GetType().Name != "DBNull" && dr["cacTaiBien"] != null)
        {
            this.cacTaiBien = Convert.ToString(dr["cacTaiBien"]);
        }
        if (dr["loaiNoiDe"].GetType().Name != "DBNull" && dr["loaiNoiDe"] != null)
        {
            this.loaiNoiDe = Convert.ToString(dr["loaiNoiDe"]);
        }
        if (dr["noiDe"].GetType().Name != "DBNull" && dr["noiDe"] != null)
        {
            this.noiDe = Convert.ToString(dr["noiDe"]);
        }
        if (dr["nguoiDo"].GetType().Name != "DBNull" && dr["nguoiDo"] != null)
        {
            this.nguoiDo = Convert.ToString(dr["nguoiDo"]);
        }
        if (dr["treBuGioDau"].GetType().Name != "DBNull" && dr["treBuGioDau"] != null)
        {
            this.treBuGioDau = Convert.ToInt32(dr["treBuGioDau"]);
        }
        if (dr["tiemVitaminK"].GetType().Name != "DBNull" && dr["tiemVitaminK"] != null)
        {
            this.tiemVitaminK = Convert.ToInt32(dr["tiemVitaminK"]);
        }
        if (dr["ngayKhamTuanDau"].GetType().Name != "DBNull" && dr["ngayKhamTuanDau"] != null)
        {
            this.ngayKhamTuanDau = Convert.ToString(dr["ngayKhamTuanDau"]);
        }
        if (dr["khamTu7Den42NgaySauDe"].GetType().Name != "DBNull" && dr["khamTu7Den42NgaySauDe"] != null)
        {
            this.khamTu7Den42NgaySauDe = Convert.ToString(dr["khamTu7Den42NgaySauDe"]);
        }
        if (dr["benhVienDe"].GetType().Name != "DBNull" && dr["benhVienDe"] != null)
        {
            this.benhVienDe = Convert.ToString(dr["benhVienDe"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static TinhTrangDe GetTinhTrangDe(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new TinhTrangDe(dr);
            }
        }
        return null;
    }
}

public class ThongTinKeHoachHoaGiaDinh
{
    private string _noiThucHien;
    public string noiThucHien
    {
        get
        {
            return _noiThucHien;
        }
        set
        {
            _noiThucHien = value;
        }
    }
    private string _ngayThucHien;
    public string ngayThucHien
    {
        get
        {
            return _ngayThucHien;
        }
        set
        {
            _ngayThucHien = value;
        }
    }
    private int _baoCaoSu;
    public int baoCaoSu
    {
        get
        {
            return _baoCaoSu;
        }
        set
        {
            _baoCaoSu = value;
        }
    }
    private int _datVong;
    public int datVong
    {
        get
        {
            return _datVong;
        }
        set
        {
            _datVong = value;
        }
    }
    private int _trietSan;
    public int trietSan
    {
        get
        {
            return _trietSan;
        }
        set
        {
            _trietSan = value;
        }
    }
    private int _thuocCay;
    public int thuocCay
    {
        get
        {
            return _thuocCay;
        }
        set
        {
            _thuocCay = value;
        }
    }
    private string _nguoiThucHien;
    public string nguoiThucHien
    {
        get
        {
            return _nguoiThucHien;
        }
        set
        {
            _nguoiThucHien = value;
        }
    }
    private int _tinhTrangHonNhan;
    public int tinhTrangHonNhan
    {
        get
        {
            return _tinhTrangHonNhan;
        }
        set
        {
            _tinhTrangHonNhan = value;
        }
    }
    private int _loaiTaiBien;
    public int loaiTaiBien
    {
        get
        {
            return _loaiTaiBien;
        }
        set
        {
            _loaiTaiBien = value;
        }
    }
    private string _taiBien;
    public string taiBien
    {
        get
        {
            return _taiBien;
        }
        set
        {
            _taiBien = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    public ThongTinKeHoachHoaGiaDinh()
    {

    }
    public ThongTinKeHoachHoaGiaDinh(IDataReader dr)
    {
        if (dr["noiThucHien"].GetType().Name != "DBNull" && dr["noiThucHien"] != null)
        {
            this.noiThucHien = Convert.ToString(dr["noiThucHien"]);
        }
        if (dr["ngayThucHien"].GetType().Name != "DBNull" && dr["ngayThucHien"] != null)
        {
            this.ngayThucHien = Convert.ToString(dr["ngayThucHien"]);
        }
        if (dr["baoCaoSu"].GetType().Name != "DBNull" && dr["baoCaoSu"] != null)
        {
            this.baoCaoSu = Convert.ToInt32(dr["baoCaoSu"]);
        }
        if (dr["datVong"].GetType().Name != "DBNull" && dr["datVong"] != null)
        {
            this.datVong = Convert.ToInt32(dr["datVong"]);
        }
        if (dr["trietSan"].GetType().Name != "DBNull" && dr["trietSan"] != null)
        {
            this.trietSan = Convert.ToInt32(dr["trietSan"]);
        }
        if (dr["thuocCay"].GetType().Name != "DBNull" && dr["thuocCay"] != null)
        {
            this.thuocCay = Convert.ToInt32(dr["thuocCay"]);
        }
        if (dr["nguoiThucHien"].GetType().Name != "DBNull" && dr["nguoiThucHien"] != null)
        {
            this.nguoiThucHien = Convert.ToString(dr["nguoiThucHien"]);
        }
        if (dr["tinhTrangHonNhan"].GetType().Name != "DBNull" && dr["tinhTrangHonNhan"] != null)
        {
            this.tinhTrangHonNhan = Convert.ToInt32(dr["tinhTrangHonNhan"]);
        }
        if (dr["loaiTaiBien"].GetType().Name != "DBNull" && dr["loaiTaiBien"] != null)
        {
            this.loaiTaiBien = Convert.ToInt32(dr["loaiTaiBien"]);
        }
        if (dr["taiBien"].GetType().Name != "DBNull" && dr["taiBien"] != null)
        {
            this.taiBien = Convert.ToString(dr["taiBien"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinKeHoachHoaGiaDinh GetThongTinKeHoachHoaGiaDinh(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinKeHoachHoaGiaDinh(dr);
            }
        }
        return null;
    }
}

public class ThongTinPhaThai
{
    private int _lanPha;
    public int lanPha
    {
        get
        {
            return _lanPha;
        }
        set
        {
            _lanPha = value;
        }
    }
    private string _ngayKinhCuoi;
    public string ngayKinhCuoi
    {
        get
        {
            return _ngayKinhCuoi;
        }
        set
        {
            _ngayKinhCuoi = value;
        }
    }
    private int _phuongPhapPhaThai;
    public int phuongPhapPhaThai
    {
        get
        {
            return _phuongPhapPhaThai;
        }
        set
        {
            _phuongPhapPhaThai = value;
        }
    }
    private int _ketQuaSoiMo;
    public int ketQuaSoiMo
    {
        get
        {
            return _ketQuaSoiMo;
        }
        set
        {
            _ketQuaSoiMo = value;
        }
    }
    private int _loaiTaiBien;
    public int loaiTaiBien
    {
        get
        {
            return _loaiTaiBien;
        }
        set
        {
            _loaiTaiBien = value;
        }
    }
    private string _taiBien;
    public string taiBien
    {
        get
        {
            return _taiBien;
        }
        set
        {
            _taiBien = value;
        }
    }
    private string _nguoiThucHien;
    public string nguoiThucHien
    {
        get
        {
            return _nguoiThucHien;
        }
        set
        {
            _nguoiThucHien = value;
        }
    }
    private string _noiThucHien;
    public string noiThucHien
    {
        get
        {
            return _noiThucHien;
        }
        set
        {
            _noiThucHien = value;
        }
    }
    private int _khamLaiSau2Tuan;
    public int khamLaiSau2Tuan
    {
        get
        {
            return _khamLaiSau2Tuan;
        }
        set
        {
            _khamLaiSau2Tuan = value;
        }
    }
    private string _ngayThucHien;
    public string ngayThucHien
    {
        get
        {
            return _ngayThucHien;
        }
        set
        {
            _ngayThucHien = value;
        }
    }
    private int _tinhTrangHonNhan;
    public int tinhTrangHonNhan
    {
        get
        {
            return _tinhTrangHonNhan;
        }
        set
        {
            _tinhTrangHonNhan = value;
        }
    }
    private int _soConHienCo;
    public int soConHienCo
    {
        get
        {
            return _soConHienCo;
        }
        set
        {
            _soConHienCo = value;
        }
    }
    private int _chanDoanThai;
    public int chanDoanThai
    {
        get
        {
            return _chanDoanThai;
        }
        set
        {
            _chanDoanThai = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    public ThongTinPhaThai()
    {

    }
    public ThongTinPhaThai(Int32 lanPha, String ngayKinhCuoi, Int32 phuongPhapPhaThai, Int32 ketQuaSoiMo, Int32 loaiTaiBien, String taiBien, String nguoiThucHien, String noiThucHien, Int32 khamLaiSau2Tuan, String ngayThucHien, Int32 tinhTrangHonNhan, Int32 soConHienCo, Int32 chanDoanThai, String ghiChu)
    {
        this.lanPha = lanPha;
        this.ngayKinhCuoi = ngayKinhCuoi;
        this.phuongPhapPhaThai = phuongPhapPhaThai;
        this.ketQuaSoiMo = ketQuaSoiMo;
        this.loaiTaiBien = loaiTaiBien;
        this.taiBien = taiBien;
        this.nguoiThucHien = nguoiThucHien;
        this.noiThucHien = noiThucHien;
        this.khamLaiSau2Tuan = khamLaiSau2Tuan;
        this.ngayThucHien = ngayThucHien;
        this.tinhTrangHonNhan = tinhTrangHonNhan;
        this.soConHienCo = soConHienCo;
        this.chanDoanThai = chanDoanThai;
        this.ghiChu = ghiChu;
    }
    public ThongTinPhaThai(IDataReader dr)
    {
        if (dr["lanPha"].GetType().Name != "DBNull" && dr["lanPha"] != null)
        {
            this.lanPha = Convert.ToInt32(dr["lanPha"]);
        }
        if (dr["ngayKinhCuoi"].GetType().Name != "DBNull" && dr["ngayKinhCuoi"] != null)
        {
            this.ngayKinhCuoi = Convert.ToString(dr["ngayKinhCuoi"]);
        }
        if (dr["phuongPhapPhaThai"].GetType().Name != "DBNull" && dr["phuongPhapPhaThai"] != null)
        {
            this.phuongPhapPhaThai = Convert.ToInt32(dr["phuongPhapPhaThai"]);
        }
        if (dr["ketQuaSoiMo"].GetType().Name != "DBNull" && dr["ketQuaSoiMo"] != null)
        {
            this.ketQuaSoiMo = Convert.ToInt32(dr["ketQuaSoiMo"]);
        }
        if (dr["loaiTaiBien"].GetType().Name != "DBNull" && dr["loaiTaiBien"] != null)
        {
            this.loaiTaiBien = Convert.ToInt32(dr["loaiTaiBien"]);
        }
        if (dr["taiBien"].GetType().Name != "DBNull" && dr["taiBien"] != null)
        {
            this.taiBien = Convert.ToString(dr["taiBien"]);
        }
        if (dr["nguoiThucHien"].GetType().Name != "DBNull" && dr["nguoiThucHien"] != null)
        {
            this.nguoiThucHien = Convert.ToString(dr["nguoiThucHien"]);
        }
        if (dr["noiThucHien"].GetType().Name != "DBNull" && dr["noiThucHien"] != null)
        {
            this.noiThucHien = Convert.ToString(dr["noiThucHien"]);
        }
        if (dr["khamLaiSau2Tuan"].GetType().Name != "DBNull" && dr["khamLaiSau2Tuan"] != null)
        {
            this.khamLaiSau2Tuan = Convert.ToInt32(dr["khamLaiSau2Tuan"]);
        }
        if (dr["ngayThucHien"].GetType().Name != "DBNull" && dr["ngayThucHien"] != null)
        {
            this.ngayThucHien = Convert.ToString(dr["ngayThucHien"]);
        }
        if (dr["tinhTrangHonNhan"].GetType().Name != "DBNull" && dr["tinhTrangHonNhan"] != null)
        {
            this.tinhTrangHonNhan = Convert.ToInt32(dr["tinhTrangHonNhan"]);
        }
        if (dr["soConHienCo"].GetType().Name != "DBNull" && dr["soConHienCo"] != null)
        {
            this.soConHienCo = Convert.ToInt32(dr["soConHienCo"]);
        }
        if (dr["chanDoanThai"].GetType().Name != "DBNull" && dr["chanDoanThai"] != null)
        {
            this.chanDoanThai = Convert.ToInt32(dr["chanDoanThai"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinPhaThai GetThongTinPhaThai(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinPhaThai(dr);
            }
        }
        return null;
    }
}

public class ThongTinBenhSotRet
{
    private string _ngayKham;
    public string ngayKham
    {
        get
        {
            return _ngayKham;
        }
        set
        {
            _ngayKham = value;
        }
    }
    private int _coThai;
    public int coThai
    {
        get
        {
            return _coThai;
        }
        set
        {
            _coThai = value;
        }
    }
    private int _coSot;
    public int coSot
    {
        get
        {
            return _coSot;
        }
        set
        {
            _coSot = value;
        }
    }
    private int _xetNghiemLamQueThu;
    public int xetNghiemLamQueThu
    {
        get
        {
            return _xetNghiemLamQueThu;
        }
        set
        {
            _xetNghiemLamQueThu = value;
        }
    }
    private string _kqXetNghiem;
    public string kqXetNghiem
    {
        get
        {
            return _kqXetNghiem;
        }
        set
        {
            _kqXetNghiem = value;
        }
    }
    private string _chanDoan;
    public string chanDoan
    {
        get
        {
            return _chanDoan;
        }
        set
        {
            _chanDoan = value;
        }
    }
    private string _kqDieuTri;
    public string kqDieuTri
    {
        get
        {
            return _kqDieuTri;
        }
        set
        {
            _kqDieuTri = value;
        }
    }
    private string _thuocDieuTri;
    public string thuocDieuTri
    {
        get
        {
            return _thuocDieuTri;
        }
        set
        {
            _thuocDieuTri = value;
        }
    }
    private string _thuocCapTuDieuTri;
    public string thuocCapTuDieuTri
    {
        get
        {
            return _thuocCapTuDieuTri;
        }
        set
        {
            _thuocCapTuDieuTri = value;
        }
    }
    private string _noiPhatHien;
    public string noiPhatHien
    {
        get
        {
            return _noiPhatHien;
        }
        set
        {
            _noiPhatHien = value;
        }
    }
    public ThongTinBenhSotRet()
    {

    }
    public ThongTinBenhSotRet(String ngayKham, Int32 coThai, Int32 coSot, Int32 xetNghiemLamQueThu, String kqXetNghiem, String chanDoan, String kqDieuTri, String thuocDieuTri, String thuocCapTuDieuTri, String noiPhatHien)
    {
        this.ngayKham = ngayKham;
        this.coThai = coThai;
        this.coSot = coSot;
        this.xetNghiemLamQueThu = xetNghiemLamQueThu;
        this.kqXetNghiem = kqXetNghiem;
        this.chanDoan = chanDoan;
        this.kqDieuTri = kqDieuTri;
        this.thuocDieuTri = thuocDieuTri;
        this.thuocCapTuDieuTri = thuocCapTuDieuTri;
        this.noiPhatHien = noiPhatHien;
    }
    public ThongTinBenhSotRet(IDataReader dr)
    {
        if (dr["ngayKham"].GetType().Name != "DBNull" && dr["ngayKham"] != null)
        {
            this.ngayKham = Convert.ToString(dr["ngayKham"]);
        }
        if (dr["coThai"].GetType().Name != "DBNull" && dr["coThai"] != null)
        {
            this.coThai = Convert.ToInt32(dr["coThai"]);
        }
        if (dr["coSot"].GetType().Name != "DBNull" && dr["coSot"] != null)
        {
            this.coSot = Convert.ToInt32(dr["coSot"]);
        }
        if (dr["xetNghiemLamQueThu"].GetType().Name != "DBNull" && dr["xetNghiemLamQueThu"] != null)
        {
            this.xetNghiemLamQueThu = Convert.ToInt32(dr["xetNghiemLamQueThu"]);
        }
        if (dr["kqXetNghiem"].GetType().Name != "DBNull" && dr["kqXetNghiem"] != null)
        {
            this.kqXetNghiem = Convert.ToString(dr["kqXetNghiem"]);
        }
        if (dr["chanDoan"].GetType().Name != "DBNull" && dr["chanDoan"] != null)
        {
            this.chanDoan = Convert.ToString(dr["chanDoan"]);
        }
        if (dr["kqDieuTri"].GetType().Name != "DBNull" && dr["kqDieuTri"] != null)
        {
            this.kqDieuTri = Convert.ToString(dr["kqDieuTri"]);
        }
        if (dr["thuocDieuTri"].GetType().Name != "DBNull" && dr["thuocDieuTri"] != null)
        {
            this.thuocDieuTri = Convert.ToString(dr["thuocDieuTri"]);
        }
        if (dr["thuocCapTuDieuTri"].GetType().Name != "DBNull" && dr["thuocCapTuDieuTri"] != null)
        {
            this.thuocCapTuDieuTri = Convert.ToString(dr["thuocCapTuDieuTri"]);
        }
        if (dr["noiPhatHien"].GetType().Name != "DBNull" && dr["noiPhatHien"] != null)
        {
            this.noiPhatHien = Convert.ToString(dr["noiPhatHien"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinBenhSotRet GetThongTinBenhSotRet(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinBenhSotRet(dr);
            }
        }
        return null;
    }
}

public class ThongTinBenhTamThanTuKy
{
    private int _chanDoanDongKinh;
    public int chanDoanDongKinh
    {
        get
        {
            return _chanDoanDongKinh;
        }
        set
        {
            _chanDoanDongKinh = value;
        }
    }
    private int _chanDoanTramCam;
    public int chanDoanTramCam
    {
        get
        {
            return _chanDoanTramCam;
        }
        set
        {
            _chanDoanTramCam = value;
        }
    }
    private int _chanDoanTamThanPhanLiet;
    public int chanDoanTamThanPhanLiet
    {
        get
        {
            return _chanDoanTamThanPhanLiet;
        }
        set
        {
            _chanDoanTamThanPhanLiet = value;
        }
    }
    private int _nhanThuocThang1;
    public int nhanThuocThang1
    {
        get
        {
            return _nhanThuocThang1;
        }
        set
        {
            _nhanThuocThang1 = value;
        }
    }
    private int _nhanThuocThang2;
    public int nhanThuocThang2
    {
        get
        {
            return _nhanThuocThang2;
        }
        set
        {
            _nhanThuocThang2 = value;
        }
    }
    private int _nhanThuocThang3;
    public int nhanThuocThang3
    {
        get
        {
            return _nhanThuocThang3;
        }
        set
        {
            _nhanThuocThang3 = value;
        }
    }
    private int _nhanThuocThang4;
    public int nhanThuocThang4
    {
        get
        {
            return _nhanThuocThang4;
        }
        set
        {
            _nhanThuocThang4 = value;
        }
    }
    private int _nhanThuocThang5;
    public int nhanThuocThang5
    {
        get
        {
            return _nhanThuocThang5;
        }
        set
        {
            _nhanThuocThang5 = value;
        }
    }
    private int _nhanThuocThang6;
    public int nhanThuocThang6
    {
        get
        {
            return _nhanThuocThang6;
        }
        set
        {
            _nhanThuocThang6 = value;
        }
    }
    private int _nhanThuocThang7;
    public int nhanThuocThang7
    {
        get
        {
            return _nhanThuocThang7;
        }
        set
        {
            _nhanThuocThang7 = value;
        }
    }
    private int _nhanThuocThang8;
    public int nhanThuocThang8
    {
        get
        {
            return _nhanThuocThang8;
        }
        set
        {
            _nhanThuocThang8 = value;
        }
    }
    private int _nhanThuocThang9;
    public int nhanThuocThang9
    {
        get
        {
            return _nhanThuocThang9;
        }
        set
        {
            _nhanThuocThang9 = value;
        }
    }
    private int _nhanThuocThang10;
    public int nhanThuocThang10
    {
        get
        {
            return _nhanThuocThang10;
        }
        set
        {
            _nhanThuocThang10 = value;
        }
    }
    private int _nhanThuocThang11;
    public int nhanThuocThang11
    {
        get
        {
            return _nhanThuocThang11;
        }
        set
        {
            _nhanThuocThang11 = value;
        }
    }
    private int _nhanThuocThang12;
    public int nhanThuocThang12
    {
        get
        {
            return _nhanThuocThang12;
        }
        set
        {
            _nhanThuocThang12 = value;
        }
    }
    private int _phucHoiChucNang;
    public int phucHoiChucNang
    {
        get
        {
            return _phucHoiChucNang;
        }
        set
        {
            _phucHoiChucNang = value;
        }
    }
    private int _kiemTraTaiNha;
    public int kiemTraTaiNha
    {
        get
        {
            return _kiemTraTaiNha;
        }
        set
        {
            _kiemTraTaiNha = value;
        }
    }
    private string _thuocThang1;
    public string thuocThang1
    {
        get
        {
            return _thuocThang1;
        }
        set
        {
            _thuocThang1 = value;
        }
    }
    private string _thuocThang2;
    public string thuocThang2
    {
        get
        {
            return _thuocThang2;
        }
        set
        {
            _thuocThang2 = value;
        }
    }
    private string _thuocThang3;
    public string thuocThang3
    {
        get
        {
            return _thuocThang3;
        }
        set
        {
            _thuocThang3 = value;
        }
    }
    private string _thuocThang4;
    public string thuocThang4
    {
        get
        {
            return _thuocThang4;
        }
        set
        {
            _thuocThang4 = value;
        }
    }
    private string _thuocThang5;
    public string thuocThang5
    {
        get
        {
            return _thuocThang5;
        }
        set
        {
            _thuocThang5 = value;
        }
    }
    private string _thuocThang6;
    public string thuocThang6
    {
        get
        {
            return _thuocThang6;
        }
        set
        {
            _thuocThang6 = value;
        }
    }
    private string _thuocThang7;
    public string thuocThang7
    {
        get
        {
            return _thuocThang7;
        }
        set
        {
            _thuocThang7 = value;
        }
    }
    private string _thuocThang8;
    public string thuocThang8
    {
        get
        {
            return _thuocThang8;
        }
        set
        {
            _thuocThang8 = value;
        }
    }
    private string _thuocThang9;
    public string thuocThang9
    {
        get
        {
            return _thuocThang9;
        }
        set
        {
            _thuocThang9 = value;
        }
    }
    private string _thuocThang10;
    public string thuocThang10
    {
        get
        {
            return _thuocThang10;
        }
        set
        {
            _thuocThang10 = value;
        }
    }
    private string _thuocThang11;
    public string thuocThang11
    {
        get
        {
            return _thuocThang11;
        }
        set
        {
            _thuocThang11 = value;
        }
    }
    private string _thuocThang12;
    public string thuocThang12
    {
        get
        {
            return _thuocThang12;
        }
        set
        {
            _thuocThang12 = value;
        }
    }
    private string _ngayGhiSo;
    public string ngayGhiSo
    {
        get
        {
            return _ngayGhiSo;
        }
        set
        {
            _ngayGhiSo = value;
        }
    }
    public ThongTinBenhTamThanTuKy()
    {

    }
    public ThongTinBenhTamThanTuKy(Int32 chanDoanDongKinh, Int32 chanDoanTramCam, Int32 chanDoanTamThanPhanLiet, Int32 nhanThuocThang1, Int32 nhanThuocThang2, Int32 nhanThuocThang3, Int32 nhanThuocThang4, Int32 nhanThuocThang5, Int32 nhanThuocThang6, Int32 nhanThuocThang7, Int32 nhanThuocThang8, Int32 nhanThuocThang9, Int32 nhanThuocThang10, Int32 nhanThuocThang11, Int32 nhanThuocThang12, Int32 phucHoiChucNang, Int32 kiemTraTaiNha, String thuocThang1, String thuocThang2, String thuocThang3, String thuocThang4, String thuocThang5, String thuocThang6, String thuocThang7, String thuocThang8, String thuocThang9, String thuocThang10, String thuocThang11, String thuocThang12, String ngayGhiSo)
    {
        this.chanDoanDongKinh = chanDoanDongKinh;
        this.chanDoanTramCam = chanDoanTramCam;
        this.chanDoanTamThanPhanLiet = chanDoanTamThanPhanLiet;
        this.nhanThuocThang1 = nhanThuocThang1;
        this.nhanThuocThang2 = nhanThuocThang2;
        this.nhanThuocThang3 = nhanThuocThang3;
        this.nhanThuocThang4 = nhanThuocThang4;
        this.nhanThuocThang5 = nhanThuocThang5;
        this.nhanThuocThang6 = nhanThuocThang6;
        this.nhanThuocThang7 = nhanThuocThang7;
        this.nhanThuocThang8 = nhanThuocThang8;
        this.nhanThuocThang9 = nhanThuocThang9;
        this.nhanThuocThang10 = nhanThuocThang10;
        this.nhanThuocThang11 = nhanThuocThang11;
        this.nhanThuocThang12 = nhanThuocThang12;
        this.phucHoiChucNang = phucHoiChucNang;
        this.kiemTraTaiNha = kiemTraTaiNha;
        this.thuocThang1 = thuocThang1;
        this.thuocThang2 = thuocThang2;
        this.thuocThang3 = thuocThang3;
        this.thuocThang4 = thuocThang4;
        this.thuocThang5 = thuocThang5;
        this.thuocThang6 = thuocThang6;
        this.thuocThang7 = thuocThang7;
        this.thuocThang8 = thuocThang8;
        this.thuocThang9 = thuocThang9;
        this.thuocThang10 = thuocThang10;
        this.thuocThang11 = thuocThang11;
        this.thuocThang12 = thuocThang12;
        this.ngayGhiSo = ngayGhiSo;
    }
    public ThongTinBenhTamThanTuKy(IDataReader dr)
    {
        if (dr["chanDoanDongKinh"].GetType().Name != "DBNull" && dr["chanDoanDongKinh"] != null)
        {
            this.chanDoanDongKinh = Convert.ToInt32(dr["chanDoanDongKinh"]);
        }
        if (dr["chanDoanTramCam"].GetType().Name != "DBNull" && dr["chanDoanTramCam"] != null)
        {
            this.chanDoanTramCam = Convert.ToInt32(dr["chanDoanTramCam"]);
        }
        if (dr["chanDoanTamThanPhanLiet"].GetType().Name != "DBNull" && dr["chanDoanTamThanPhanLiet"] != null)
        {
            this.chanDoanTamThanPhanLiet = Convert.ToInt32(dr["chanDoanTamThanPhanLiet"]);
        }
        if (dr["nhanThuocThang1"].GetType().Name != "DBNull" && dr["nhanThuocThang1"] != null)
        {
            this.nhanThuocThang1 = Convert.ToInt32(dr["nhanThuocThang1"]);
        }
        if (dr["nhanThuocThang2"].GetType().Name != "DBNull" && dr["nhanThuocThang2"] != null)
        {
            this.nhanThuocThang2 = Convert.ToInt32(dr["nhanThuocThang2"]);
        }
        if (dr["nhanThuocThang3"].GetType().Name != "DBNull" && dr["nhanThuocThang3"] != null)
        {
            this.nhanThuocThang3 = Convert.ToInt32(dr["nhanThuocThang3"]);
        }
        if (dr["nhanThuocThang4"].GetType().Name != "DBNull" && dr["nhanThuocThang4"] != null)
        {
            this.nhanThuocThang4 = Convert.ToInt32(dr["nhanThuocThang4"]);
        }
        if (dr["nhanThuocThang5"].GetType().Name != "DBNull" && dr["nhanThuocThang5"] != null)
        {
            this.nhanThuocThang5 = Convert.ToInt32(dr["nhanThuocThang5"]);
        }
        if (dr["nhanThuocThang6"].GetType().Name != "DBNull" && dr["nhanThuocThang6"] != null)
        {
            this.nhanThuocThang6 = Convert.ToInt32(dr["nhanThuocThang6"]);
        }
        if (dr["nhanThuocThang7"].GetType().Name != "DBNull" && dr["nhanThuocThang7"] != null)
        {
            this.nhanThuocThang7 = Convert.ToInt32(dr["nhanThuocThang7"]);
        }
        if (dr["nhanThuocThang8"].GetType().Name != "DBNull" && dr["nhanThuocThang8"] != null)
        {
            this.nhanThuocThang8 = Convert.ToInt32(dr["nhanThuocThang8"]);
        }
        if (dr["nhanThuocThang9"].GetType().Name != "DBNull" && dr["nhanThuocThang9"] != null)
        {
            this.nhanThuocThang9 = Convert.ToInt32(dr["nhanThuocThang9"]);
        }
        if (dr["nhanThuocThang10"].GetType().Name != "DBNull" && dr["nhanThuocThang10"] != null)
        {
            this.nhanThuocThang10 = Convert.ToInt32(dr["nhanThuocThang10"]);
        }
        if (dr["nhanThuocThang11"].GetType().Name != "DBNull" && dr["nhanThuocThang11"] != null)
        {
            this.nhanThuocThang11 = Convert.ToInt32(dr["nhanThuocThang11"]);
        }
        if (dr["nhanThuocThang12"].GetType().Name != "DBNull" && dr["nhanThuocThang12"] != null)
        {
            this.nhanThuocThang12 = Convert.ToInt32(dr["nhanThuocThang12"]);
        }
        if (dr["phucHoiChucNang"].GetType().Name != "DBNull" && dr["phucHoiChucNang"] != null)
        {
            this.phucHoiChucNang = Convert.ToInt32(dr["phucHoiChucNang"]);
        }
        if (dr["kiemTraTaiNha"].GetType().Name != "DBNull" && dr["kiemTraTaiNha"] != null)
        {
            this.kiemTraTaiNha = Convert.ToInt32(dr["kiemTraTaiNha"]);
        }
        if (dr["thuocThang1"].GetType().Name != "DBNull" && dr["thuocThang1"] != null)
        {
            this.thuocThang1 = Convert.ToString(dr["thuocThang1"]);
        }
        if (dr["thuocThang2"].GetType().Name != "DBNull" && dr["thuocThang2"] != null)
        {
            this.thuocThang2 = Convert.ToString(dr["thuocThang2"]);
        }
        if (dr["thuocThang3"].GetType().Name != "DBNull" && dr["thuocThang3"] != null)
        {
            this.thuocThang3 = Convert.ToString(dr["thuocThang3"]);
        }
        if (dr["thuocThang4"].GetType().Name != "DBNull" && dr["thuocThang4"] != null)
        {
            this.thuocThang4 = Convert.ToString(dr["thuocThang4"]);
        }
        if (dr["thuocThang5"].GetType().Name != "DBNull" && dr["thuocThang5"] != null)
        {
            this.thuocThang5 = Convert.ToString(dr["thuocThang5"]);
        }
        if (dr["thuocThang6"].GetType().Name != "DBNull" && dr["thuocThang6"] != null)
        {
            this.thuocThang6 = Convert.ToString(dr["thuocThang6"]);
        }
        if (dr["thuocThang7"].GetType().Name != "DBNull" && dr["thuocThang7"] != null)
        {
            this.thuocThang7 = Convert.ToString(dr["thuocThang7"]);
        }
        if (dr["thuocThang8"].GetType().Name != "DBNull" && dr["thuocThang8"] != null)
        {
            this.thuocThang8 = Convert.ToString(dr["thuocThang8"]);
        }
        if (dr["thuocThang9"].GetType().Name != "DBNull" && dr["thuocThang9"] != null)
        {
            this.thuocThang9 = Convert.ToString(dr["thuocThang9"]);
        }
        if (dr["thuocThang10"].GetType().Name != "DBNull" && dr["thuocThang10"] != null)
        {
            this.thuocThang10 = Convert.ToString(dr["thuocThang10"]);
        }
        if (dr["thuocThang11"].GetType().Name != "DBNull" && dr["thuocThang11"] != null)
        {
            this.thuocThang11 = Convert.ToString(dr["thuocThang11"]);
        }
        if (dr["thuocThang12"].GetType().Name != "DBNull" && dr["thuocThang12"] != null)
        {
            this.thuocThang12 = Convert.ToString(dr["thuocThang12"]);
        }
        if (dr["ngayGhiSo"].GetType().Name != "DBNull" && dr["ngayGhiSo"] != null)
        {
            this.ngayGhiSo = Convert.ToString(dr["ngayGhiSo"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinBenhTamThanTuKy GetThongTinBenhTamThanTuKy(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinBenhTamThanTuKy(dr);
            }
        }
        return null;
    }
}

public class ThongTinBenhLao
{
    private string _ngayPhatHienLao;
    public string ngayPhatHienLao
    {
        get
        {
            return _ngayPhatHienLao;
        }
        set
        {
            _ngayPhatHienLao = value;
        }
    }
    private string _laoNgoaiPhoi;
    public string laoNgoaiPhoi
    {
        get
        {
            return _laoNgoaiPhoi;
        }
        set
        {
            _laoNgoaiPhoi = value;
        }
    }
    private string _ngayVeXaDieuTri;
    public string ngayVeXaDieuTri
    {
        get
        {
            return _ngayVeXaDieuTri;
        }
        set
        {
            _ngayVeXaDieuTri = value;
        }
    }
    private string _soPhieuDTCKS;
    public string soPhieuDTCKS
    {
        get
        {
            return _soPhieuDTCKS;
        }
        set
        {
            _soPhieuDTCKS = value;
        }
    }
    private int _phanLoaiBN;
    public int phanLoaiBN
    {
        get
        {
            return _phanLoaiBN;
        }
        set
        {
            _phanLoaiBN = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    private int _ketQuaDieuTri;
    public int ketQuaDieuTri
    {
        get
        {
            return _ketQuaDieuTri;
        }
        set
        {
            _ketQuaDieuTri = value;
        }
    }
    public ThongTinBenhLao()
    {
    }

    public ThongTinBenhLao(String ngayPhatHienLao, String laoNgoaiPhoi, String ngayVeXaDieuTri, String soPhieuDTCKS, Int32 phanLoaiBN, String ghiChu, Int32 ketQuaDieuTri)
    {
        this.ngayPhatHienLao = ngayPhatHienLao;
        this.laoNgoaiPhoi = laoNgoaiPhoi;
        this.ngayVeXaDieuTri = ngayVeXaDieuTri;
        this.soPhieuDTCKS = soPhieuDTCKS;
        this.phanLoaiBN = phanLoaiBN;
        this.ghiChu = ghiChu;
        this.ketQuaDieuTri = ketQuaDieuTri;
    }
    public ThongTinBenhLao(IDataReader dr)
    {
        if (dr["ngayPhatHienLao"].GetType().Name != "DBNull" && dr["ngayPhatHienLao"] != null)
        {
            this.ngayPhatHienLao = Convert.ToString(dr["ngayPhatHienLao"]);
        }
        if (dr["laoNgoaiPhoi"].GetType().Name != "DBNull" && dr["laoNgoaiPhoi"] != null)
        {
            this.laoNgoaiPhoi = Convert.ToString(dr["laoNgoaiPhoi"]);
        }
        if (dr["ngayVeXaDieuTri"].GetType().Name != "DBNull" && dr["ngayVeXaDieuTri"] != null)
        {
            this.ngayVeXaDieuTri = Convert.ToString(dr["ngayVeXaDieuTri"]);
        }
        if (dr["soPhieuDTCKS"].GetType().Name != "DBNull" && dr["soPhieuDTCKS"] != null)
        {
            this.soPhieuDTCKS = Convert.ToString(dr["soPhieuDTCKS"]);
        }
        if (dr["phanLoaiBN"].GetType().Name != "DBNull" && dr["phanLoaiBN"] != null)
        {
            this.phanLoaiBN = Convert.ToInt32(dr["phanLoaiBN"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
        if (dr["ketQuaDieuTri"].GetType().Name != "DBNull" && dr["ketQuaDieuTri"] != null)
        {
            this.ketQuaDieuTri = Convert.ToInt32(dr["ketQuaDieuTri"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinBenhLao GetThongTinBenhLao(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinBenhLao(dr);
            }
        }
        return null;
    }
}

public class ThongTinBenhHIV
{
    private int _maDoiTuong;
    public int maDoiTuong
    {
        get
        {
            return _maDoiTuong;
        }
        set
        {
            _maDoiTuong = value;
        }
    }
    private string _ngayXetNghiemKhangDinh;
    public string ngayXetNghiemKhangDinh
    {
        get
        {
            return _ngayXetNghiemKhangDinh;
        }
        set
        {
            _ngayXetNghiemKhangDinh = value;
        }
    }
    private string _ngayVaoSo;
    public string ngayVaoSo
    {
        get
        {
            return _ngayVaoSo;
        }
        set
        {
            _ngayVaoSo = value;
        }
    }
    private string _thoiGianCoThai;
    public string thoiGianCoThai
    {
        get
        {
            return _thoiGianCoThai;
        }
        set
        {
            _thoiGianCoThai = value;
        }
    }
    private string _noiKhangDinhNhiemHIV;
    public string noiKhangDinhNhiemHIV
    {
        get
        {
            return _noiKhangDinhNhiemHIV;
        }
        set
        {
            _noiKhangDinhNhiemHIV = value;
        }
    }
    private string _noiQuanLyDieuTriARV;
    public string noiQuanLyDieuTriARV
    {
        get
        {
            return _noiQuanLyDieuTriARV;
        }
        set
        {
            _noiQuanLyDieuTriARV = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    public ThongTinBenhHIV()
    {

    }
    public ThongTinBenhHIV(Int32 maDoiTuong, String ngayXetNghiemKhangDinh, String thoiGianCoThai, String noiKhangDinhNhiemHIV, String noiQuanLyDieuTriARV, String ghiChu)
    {
        this.maDoiTuong = maDoiTuong;
        this.ngayXetNghiemKhangDinh = ngayXetNghiemKhangDinh;
        this.thoiGianCoThai = thoiGianCoThai;
        this.noiKhangDinhNhiemHIV = noiKhangDinhNhiemHIV;
        this.noiQuanLyDieuTriARV = noiQuanLyDieuTriARV;
        this.ghiChu = ghiChu;
    }
    public ThongTinBenhHIV(IDataReader dr)
    {
        if (dr["maDoiTuong"].GetType().Name != "DBNull" && dr["maDoiTuong"] != null)
        {
            this.maDoiTuong = Convert.ToInt32(dr["maDoiTuong"]);
        }
        if (dr["ngayXetNghiemKhangDinh"].GetType().Name != "DBNull" && dr["ngayXetNghiemKhangDinh"] != null)
        {
            this.ngayXetNghiemKhangDinh = Convert.ToString(dr["ngayXetNghiemKhangDinh"]);
        }
        if (dr["thoiGianCoThai"].GetType().Name != "DBNull" && dr["thoiGianCoThai"] != null)
        {
            this.thoiGianCoThai = Convert.ToString(dr["thoiGianCoThai"]);
        }
        if (dr["noiKhangDinhNhiemHIV"].GetType().Name != "DBNull" && dr["noiKhangDinhNhiemHIV"] != null)
        {
            this.noiKhangDinhNhiemHIV = Convert.ToString(dr["noiKhangDinhNhiemHIV"]);
        }
        if (dr["noiQuanLyDieuTriARV"].GetType().Name != "DBNull" && dr["noiQuanLyDieuTriARV"] != null)
        {
            this.noiQuanLyDieuTriARV = Convert.ToString(dr["noiQuanLyDieuTriARV"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinBenhHIV GetThongTinBenhHIV(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinBenhHIV(dr);
            }
        }
        return null;
    }
}

public class ThongTinBenhKhongLayNhiem
{
    private string _maBenh;
    public string maBenh
    {
        get
        {
            return _maBenh;
        }
        set
        {
            _maBenh = value;
        }
    }
    private string _ngayPhatHien;
    public string ngayPhatHien
    {
        get
        {
            return _ngayPhatHien;
        }
        set
        {
            _ngayPhatHien = value;
        }
    }
    private string _ghiChu;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    private int _noiPhatHien;
    public int noiPhatHien
    {
        get
        {
            return _noiPhatHien;
        }
        set
        {
            _noiPhatHien = value;
        }
    }
    public ThongTinBenhKhongLayNhiem()
    {

    }
    public ThongTinBenhKhongLayNhiem(String maBenh, String ngayPhatHien, String ghiChu, Int32 noiPhatHien)
    {
        this.maBenh = maBenh;
        this.ngayPhatHien = ngayPhatHien;
        this.ghiChu = ghiChu;
        this.noiPhatHien = noiPhatHien;
    }
    public ThongTinBenhKhongLayNhiem(IDataReader dr)
    {
        if (dr["maBenh"].GetType().Name != "DBNull" && dr["maBenh"] != null)
        {
            this.maBenh = Convert.ToString(dr["maBenh"]);
        }
        if (dr["ngayPhatHien"].GetType().Name != "DBNull" && dr["ngayPhatHien"] != null)
        {
            this.ngayPhatHien = Convert.ToString(dr["ngayPhatHien"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
        if (dr["noiPhatHien"].GetType().Name != "DBNull" && dr["noiPhatHien"] != null)
        {
            this.noiPhatHien = Convert.ToInt32(dr["noiPhatHien"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinBenhKhongLayNhiem GetThongTinBenhKhongLayNhiem(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinBenhKhongLayNhiem(dr);
            }
        }
        return null;
    }
}

public class ThongTinTuVong
{
    private string _ngayTuVong = string.Empty;
    public string ngayTuVong
    {
        get
        {
            return _ngayTuVong;
        }
        set
        {
            _ngayTuVong = value;
        }
    }
    private string _ngayGhiSo = string.Empty;
    public string ngayGhiSo
    {
        get
        {
            return _ngayGhiSo;
        }
        set
        {
            _ngayGhiSo = value;
        }
    }
    private int _noiTuVong = 0;
    public int noiTuVong
    {
        get
        {
            return _noiTuVong;
        }
        set
        {
            _noiTuVong = value;
        }
    }
    private string _nguyenNhan = string.Empty;
    public string nguyenNhan
    {
        get
        {
            return _nguyenNhan;
        }
        set
        {
            _nguyenNhan = value;
        }
    }
    private int _coCanBoYTeChamSocKhiTuVong = 0;
    public int coCanBoYTeChamSocKhiTuVong
    {
        get
        {
            return _coCanBoYTeChamSocKhiTuVong;
        }
        set
        {
            _coCanBoYTeChamSocKhiTuVong = value;
        }
    }
    private string _ghiChu = string.Empty;
    public string ghiChu
    {
        get
        {
            return _ghiChu;
        }
        set
        {
            _ghiChu = value;
        }
    }
    private string _nguoiThuThapThongTin = string.Empty;
    public string nguoiThuThapThongTin
    {
        get
        {
            return _nguoiThuThapThongTin;
        }
        set
        {
            _nguoiThuThapThongTin = value;
        }
    }
    public ThongTinTuVong()
    {
    }
    public ThongTinTuVong(String ngayTuVong, String ngayGhiSo, Int32 noiTuVong, String nguyenNhan, Int32 coCanBoYTeChamSocKhiTuVong, String ghiChu, String nguoiThuThapThongTin)
    {
        this.ngayTuVong = ngayTuVong;
        this.ngayGhiSo = ngayGhiSo;
        this.noiTuVong = noiTuVong;
        this.nguyenNhan = nguyenNhan;
        this.coCanBoYTeChamSocKhiTuVong = coCanBoYTeChamSocKhiTuVong;
        this.ghiChu = ghiChu;
        this.nguoiThuThapThongTin = nguoiThuThapThongTin;
    }
    public ThongTinTuVong(IDataReader dr)
    {
        if (dr["ngayTuVong"].GetType().Name != "DBNull" && dr["ngayTuVong"] != null)
        {
            this.ngayTuVong = Convert.ToString(dr["ngayTuVong"]);
        }
        if (dr["ngayGhiSo"].GetType().Name != "DBNull" && dr["ngayGhiSo"] != null)
        {
            this.ngayGhiSo = Convert.ToString(dr["ngayGhiSo"]);
        }
        if (dr["noiTuVong"].GetType().Name != "DBNull" && dr["noiTuVong"] != null)
        {
            this.noiTuVong = Convert.ToInt32(dr["noiTuVong"]);
        }
        if (dr["nguyenNhan"].GetType().Name != "DBNull" && dr["nguyenNhan"] != null)
        {
            this.nguyenNhan = Convert.ToString(dr["nguyenNhan"]);
        }
        if (dr["coCanBoYTeChamSocKhiTuVong"].GetType().Name != "DBNull" && dr["coCanBoYTeChamSocKhiTuVong"] != null)
        {
            this.coCanBoYTeChamSocKhiTuVong = Convert.ToInt32(dr["coCanBoYTeChamSocKhiTuVong"]);
        }
        if (dr["ghiChu"].GetType().Name != "DBNull" && dr["ghiChu"] != null)
        {
            this.ghiChu = Convert.ToString(dr["ghiChu"]);
        }
        if (dr["nguoiThuThapThongTin"].GetType().Name != "DBNull" && dr["nguoiThuThapThongTin"] != null)
        {
            this.nguoiThuThapThongTin = Convert.ToString(dr["nguoiThuThapThongTin"]);
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static ThongTinTuVong GetThongTinTuVong(String mabn, string makhoa, DateTime tungay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        using (IDataReader dr = ((IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_khamthai_GET", mabn, makhoa, tungay, denngay, loai, DK, qadmin)))
        {
            while (dr.Read())
            {
                return new ThongTinTuVong(dr);
            }
        }
        return null;
    }
}
[Serializable()]
public class PID
{
    public String fULLNAME { get; set; }
    public Int32 sEX { get; set; }
    public Int32 dATEOFBIRTH { get; set; }
    public String pLACEOFBIRTH { get; set; }
    public String hOMETOWN { get; set; }
    public String hEALTHINSURANCEIDCARD { get; set; }
    public String iDENTIICATIONIDCARD { get; set; }
    public String pHONE { get; set; }
    public String cURENTPROVICECODE { get; set; }
    public String cURENTDISTRICTCODE { get; set; }
    public String cURENTCOMMUNECODE { get; set; }
    public String nAMEOFCONSERVATOR { get; set; }
    public Int32? rELATIONWITHCONSERVATOR { get; set; }
    public String iDOFCONSERVATOR { get; set; }
    public String pHONEOFCONSERVATOR { get; set; }
    public String pROVINCIALBIRTHREGISTRATIONCODE { get; set; }
    public PID()
    {
        fULLNAME = "";
        sEX = 0;
        dATEOFBIRTH = 0;
        pLACEOFBIRTH = "";
        hOMETOWN = "";
        hEALTHINSURANCEIDCARD = "";
        iDENTIICATIONIDCARD = "";
        pHONE = "";
        cURENTPROVICECODE = "";
        cURENTDISTRICTCODE = "";
        cURENTCOMMUNECODE = "";
        nAMEOFCONSERVATOR = "";
        rELATIONWITHCONSERVATOR = null;
        iDOFCONSERVATOR = "";
        pHONEOFCONSERVATOR = "";
        pROVINCIALBIRTHREGISTRATIONCODE = "";
    }
    public PID(String fULLNAME, Int32 sEX, Int32 dATEOFBIRTH, String pLACEOFBIRTH, String hOMETOWN, String hEALTHINSURANCEIDCARD, String iDENTIICATIONIDCARD, String pHONE, String cURENTPROVICECODE, String cURENTDISTRICTCODE, String cURENTCOMMUNECODE, String nAMEOFCONSERVATOR, Int32 rELATIONWITHCONSERVATOR, String iDOFCONSERVATOR, String pHONEOFCONSERVATOR, String pROVINCIALBIRTHREGISTRATIONCODE)
    {
        this.fULLNAME = fULLNAME;
        this.sEX = sEX;
        this.dATEOFBIRTH = dATEOFBIRTH;
        this.pLACEOFBIRTH = pLACEOFBIRTH;
        this.hOMETOWN = hOMETOWN;
        this.hEALTHINSURANCEIDCARD = hEALTHINSURANCEIDCARD;
        this.iDENTIICATIONIDCARD = iDENTIICATIONIDCARD;
        this.pHONE = pHONE;
        this.cURENTPROVICECODE = cURENTPROVICECODE;
        this.cURENTDISTRICTCODE = cURENTDISTRICTCODE;
        this.cURENTCOMMUNECODE = cURENTCOMMUNECODE;
        this.nAMEOFCONSERVATOR = nAMEOFCONSERVATOR;
        this.rELATIONWITHCONSERVATOR = rELATIONWITHCONSERVATOR;
        this.iDOFCONSERVATOR = iDOFCONSERVATOR;
        this.pHONEOFCONSERVATOR = pHONEOFCONSERVATOR;
        this.pROVINCIALBIRTHREGISTRATIONCODE = pROVINCIALBIRTHREGISTRATIONCODE;
    }
    public PID(IDataReader dr)
    {
        if (dr["fULLNAME"].GetType().Name != "DBNull" && dr["fULLNAME"] != null)
        {
            this.fULLNAME = Convert.ToString(dr["fULLNAME"]);
        }
        else
        {
            this.fULLNAME = "";
        }
        if (dr["sEX"].GetType().Name != "DBNull" && dr["sEX"] != null)
        {
            this.sEX = Convert.ToInt32(dr["sEX"]);
        }
        else
        {
            this.sEX = 0;
        }
        if (dr["dATEOFBIRTH"].GetType().Name != "DBNull" && dr["dATEOFBIRTH"] != null)
        {
            this.dATEOFBIRTH = Convert.ToInt32(dr["dATEOFBIRTH"]);
        }
        else
        {
            this.dATEOFBIRTH = 0;
        }
        if (dr["pLACEOFBIRTH"].GetType().Name != "DBNull" && dr["pLACEOFBIRTH"] != null)
        {
            this.pLACEOFBIRTH = Convert.ToString(dr["pLACEOFBIRTH"]);
        }
        else
        {
            this.pLACEOFBIRTH = "";
        }
        if (dr["hOMETOWN"].GetType().Name != "DBNull" && dr["hOMETOWN"] != null)
        {
            this.hOMETOWN = Convert.ToString(dr["hOMETOWN"]);
        }
        else
        {
            this.hOMETOWN = "";
        }
        if (dr["hEALTHINSURANCEIDCARD"].GetType().Name != "DBNull" && dr["hEALTHINSURANCEIDCARD"] != null)
        {
            this.hEALTHINSURANCEIDCARD = Convert.ToString(dr["hEALTHINSURANCEIDCARD"]);
        }
        else
        {
            this.hEALTHINSURANCEIDCARD = "";
        }
        if (dr["iDENTIICATIONIDCARD"].GetType().Name != "DBNull" && dr["iDENTIICATIONIDCARD"] != null)
        {
            this.iDENTIICATIONIDCARD = Convert.ToString(dr["iDENTIICATIONIDCARD"]);
        }
        else
        {
            this.iDENTIICATIONIDCARD = "";
        }
        if (dr["pHONE"].GetType().Name != "DBNull" && dr["pHONE"] != null)
        {
            this.pHONE = Convert.ToString(dr["pHONE"]);
        }
        else
        {
            this.pHONE = "";
        }
        if (dr["cURENTPROVICECODE"].GetType().Name != "DBNull" && dr["cURENTPROVICECODE"] != null)
        {
            this.cURENTPROVICECODE = Convert.ToString(dr["cURENTPROVICECODE"]);
        }
        else
        {
            this.cURENTPROVICECODE = "";
        }
        if (dr["cURENTDISTRICTCODE"].GetType().Name != "DBNull" && dr["cURENTDISTRICTCODE"] != null)
        {
            this.cURENTDISTRICTCODE = Convert.ToString(dr["cURENTDISTRICTCODE"]);
        }
        else
        {
            this.cURENTDISTRICTCODE = "";
        }
        if (dr["cURENTCOMMUNECODE"].GetType().Name != "DBNull" && dr["cURENTCOMMUNECODE"] != null)
        {
            this.cURENTCOMMUNECODE = Convert.ToString(dr["cURENTCOMMUNECODE"]);
        }
        else
        {
            this.cURENTCOMMUNECODE = "";
        }
        if (dr["nAMEOFCONSERVATOR"].GetType().Name != "DBNull" && dr["nAMEOFCONSERVATOR"] != null)
        {
            this.nAMEOFCONSERVATOR = Convert.ToString(dr["nAMEOFCONSERVATOR"]);
        }
        else
        {
            this.nAMEOFCONSERVATOR = "";
        }
        if (dr["rELATIONWITHCONSERVATOR"].GetType().Name != "DBNull" && dr["rELATIONWITHCONSERVATOR"] != null)
        {
            this.rELATIONWITHCONSERVATOR = Convert.ToInt32(dr["rELATIONWITHCONSERVATOR"]);
        }
        else
        {
            this.rELATIONWITHCONSERVATOR = null;
        }
        if (dr["iDOFCONSERVATOR"].GetType().Name != "DBNull" && dr["iDOFCONSERVATOR"] != null)
        {
            this.iDOFCONSERVATOR = Convert.ToString(dr["iDOFCONSERVATOR"]);
        }
        else
        {
            this.iDOFCONSERVATOR = "";
        }
        if (dr["pHONEOFCONSERVATOR"].GetType().Name != "DBNull" && dr["pHONEOFCONSERVATOR"] != null)
        {
            this.pHONEOFCONSERVATOR = Convert.ToString(dr["pHONEOFCONSERVATOR"]);
        }
        else
        {
            this.pHONEOFCONSERVATOR = "";
        }
        if (dr["pROVINCIALBIRTHREGISTRATIONCODE"].GetType().Name != "DBNull" && dr["pROVINCIALBIRTHREGISTRATIONCODE"] != null)
        {
            this.pROVINCIALBIRTHREGISTRATIONCODE = Convert.ToString(dr["pROVINCIALBIRTHREGISTRATIONCODE"]);
        }
        else
        {
            this.pROVINCIALBIRTHREGISTRATIONCODE = "";
        }
    }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static PID Get(string mabn, string makhoa, DateTime tunngay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        PID List = new PID();
        using (IDataReader dr = (IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_request", mabn, makhoa, tunngay, denngay, loai, DK, qadmin))
        {
            while (dr.Read())
            {
                return new PID(dr);
            }
        }
        return List;
    }
}
[Serializable()]
public class DSBN
{
    public Int32 Ordernumber { get; set; }
    public String maThe { get; set; }
    public String hoTen { get; set; }
    public String gioiTinh { get; set; }
    public String nhomMauHeAbo { get; set; }
    public String nhomMauHeRh { get; set; }
    public String ngaySinh { get; set; }
    public String maTinhKhaiSinh { get; set; }
    public String maDanToc { get; set; }
    public String maQuocTich { get; set; }
    public String maTonGiao { get; set; }
    public String maNgheNghiep { get; set; }
    public String soCmnd { get; set; }
    public String ngayCap { get; set; }
    public String noiCap { get; set; }
    public String diaChiChiTietThuongTru { get; set; }
    public String maTinhThuongTru { get; set; }
    public String maHuyenThuongTru { get; set; }
    public String maXaThuongTru { get; set; }
    public String diaChiChiTietHienTai { get; set; }
    public String maTinhHienTai { get; set; }
    public String maHuyenHienTai { get; set; }
    public String maXaHienTai { get; set; }
    public String dienThoaiNR { get; set; }
    public String dienThoaiDd { get; set; }
    public String email { get; set; }
    public String hoTenBo { get; set; }
    public String hoTenMe { get; set; }
    public String maYTeBo { get; set; }
    public String maYTeMe { get; set; }
    public String nguoiChamSocChinh { get; set; }
    public String quanHeNguoiChamSoc { get; set; }
    public String dienThoaiCoDinhNCSC { get; set; }
    public String dienThoaiDiDDongNCSC { get; set; }
    public String maYTeCaNhan { get; set; }
    public String tenBenh { get; set; }
    public String ngayRaVien { get; set; }
    public String tenKhoaRaVien { get; set; }
    public String MaBN { get; set; }
    public String maCSKCB { get; set; }
    public String MaSoKham { get; set; }
    public DSBN()
    {
        maThe = "";
        hoTen = "";
        gioiTinh = "";
        nhomMauHeAbo = "";
        nhomMauHeRh = "";
        ngaySinh = "";
        maTinhKhaiSinh = "";
        maDanToc = "";
        maQuocTich = "";
        maTonGiao = "";
        maNgheNghiep = "";
        soCmnd = "";
        ngayCap = "";
        noiCap = "";
        diaChiChiTietThuongTru = "";
        maTinhThuongTru = "";
        maHuyenThuongTru = "";
        maXaThuongTru = "";
        diaChiChiTietHienTai = "";
        maTinhHienTai = "";
        maHuyenHienTai = "";
        maXaHienTai = "";
        dienThoaiNR = "";
        dienThoaiDd = "";
        email = "";
        hoTenBo = "";
        hoTenMe = "";
        maYTeBo = "";
        maYTeMe = "";
        nguoiChamSocChinh = "";
        quanHeNguoiChamSoc = "";
        dienThoaiCoDinhNCSC = "";
        dienThoaiDiDDongNCSC = "";
        maYTeCaNhan = "";
        tenBenh = "";
        ngayRaVien = "";
        tenKhoaRaVien = "";
        MaBN = "";
        maCSKCB = "";
        Ordernumber = 0;
        MaSoKham = "";
    }

    public DSBN(String maThe, String hoTen, String gioiTinh, String nhomMauHeAbo, String nhomMauHeRh, String ngaySinh, String maTinhKhaiSinh, String maDanToc, String maQuocTich, String maTonGiao, String maNgheNghiep, String soCmnd, String ngayCap, String noiCap, String diaChiChiTietThuongTru, String maTinhThuongTru, String maHuyenThuongTru, String maXaThuongTru, String diaChiChiTietHienTai, String maTinhHienTai, String maHuyenHienTai, String maXaHienTai, String dienThoaiNR, String dienThoaiDd, String email, String hoTenBo, String hoTenMe, String maYTeBo, String maYTeMe, String nguoiChamSocChinh, String quanHeNguoiChamSoc, String dienThoaiCoDinhNCSC, String dienThoaiDiDDongNCSC, String maYTeCaNhan, String tenBenh, String ngayRaVien, String tenKhoaRaVien, String MaBN, String maCSKCB, string MaSoKham, Int32 Ordernumber)
    {
        this.maThe = maThe;
        this.hoTen = hoTen;
        this.gioiTinh = gioiTinh;
        this.nhomMauHeAbo = nhomMauHeAbo;
        this.nhomMauHeRh = nhomMauHeRh;
        this.ngaySinh = ngaySinh;
        this.maTinhKhaiSinh = maTinhKhaiSinh;
        this.maDanToc = maDanToc;
        this.maQuocTich = maQuocTich;
        this.maTonGiao = maTonGiao;
        this.maNgheNghiep = maNgheNghiep;
        this.soCmnd = soCmnd;
        this.ngayCap = ngayCap;
        this.noiCap = noiCap;
        this.diaChiChiTietThuongTru = diaChiChiTietThuongTru;
        this.maTinhThuongTru = maTinhThuongTru;
        this.maHuyenThuongTru = maHuyenThuongTru;
        this.maXaThuongTru = maXaThuongTru;
        this.diaChiChiTietHienTai = diaChiChiTietHienTai;
        this.maTinhHienTai = maTinhHienTai;
        this.maHuyenHienTai = maHuyenHienTai;
        this.maXaHienTai = maXaHienTai;
        this.dienThoaiNR = dienThoaiNR;
        this.dienThoaiDd = dienThoaiDd;
        this.email = email;
        this.hoTenBo = hoTenBo;
        this.hoTenMe = hoTenMe;
        this.maYTeBo = maYTeBo;
        this.maYTeMe = maYTeMe;
        this.nguoiChamSocChinh = nguoiChamSocChinh;
        this.quanHeNguoiChamSoc = quanHeNguoiChamSoc;
        this.dienThoaiCoDinhNCSC = dienThoaiCoDinhNCSC;
        this.dienThoaiDiDDongNCSC = dienThoaiDiDDongNCSC;
        this.maYTeCaNhan = maYTeCaNhan;
        this.tenBenh = tenBenh;
        this.ngayRaVien = ngayRaVien;
        this.tenKhoaRaVien = tenKhoaRaVien;
        this.MaBN = MaBN;
        this.maCSKCB = maCSKCB;
        this.MaSoKham = MaSoKham;
        this.Ordernumber = Ordernumber;
    }
    public DSBN(IDataReader dr, Int32 Ordernumber)
    {
        if (dr["maThe"].GetType().Name != "DBNull" && dr["maThe"] != null)
        {
            this.maThe = Convert.ToString(dr["maThe"]);
        }
        else
        {
            this.maThe = "";
        }
        if (dr["hoTen"].GetType().Name != "DBNull" && dr["hoTen"] != null)
        {
            this.hoTen = Convert.ToString(dr["hoTen"]);
        }
        else
        {
            this.hoTen = "";
        }
        if (dr["gioiTinh"].GetType().Name != "DBNull" && dr["gioiTinh"] != null)
        {
            this.gioiTinh = Convert.ToString(dr["gioiTinh"]);
        }
        else
        {
            this.gioiTinh = "";
        }
        if (dr["nhomMauHeAbo"].GetType().Name != "DBNull" && dr["nhomMauHeAbo"] != null)
        {
            this.nhomMauHeAbo = Convert.ToString(dr["nhomMauHeAbo"]);
        }
        else
        {
            this.nhomMauHeAbo = "";
        }
        if (dr["nhomMauHeRh"].GetType().Name != "DBNull" && dr["nhomMauHeRh"] != null)
        {
            this.nhomMauHeRh = Convert.ToString(dr["nhomMauHeRh"]);
        }
        else
        {
            this.nhomMauHeRh = "";
        }
        if (dr["ngaySinh"].GetType().Name != "DBNull" && dr["ngaySinh"] != null)
        {
            this.ngaySinh = Convert.ToString(dr["ngaySinh"]);
        }
        else
        {
            this.ngaySinh = "";
        }
        if (dr["maTinhKhaiSinh"].GetType().Name != "DBNull" && dr["maTinhKhaiSinh"] != null)
        {
            this.maTinhKhaiSinh = Convert.ToString(dr["maTinhKhaiSinh"]);
        }
        else
        {
            this.maTinhKhaiSinh = "";
        }
        if (dr["maDanToc"].GetType().Name != "DBNull" && dr["maDanToc"] != null)
        {
            this.maDanToc = Convert.ToString(dr["maDanToc"]);
        }
        else
        {
            this.maDanToc = "";
        }
        if (dr["maQuocTich"].GetType().Name != "DBNull" && dr["maQuocTich"] != null)
        {
            this.maQuocTich = Convert.ToString(dr["maQuocTich"]);
        }
        else
        {
            this.maQuocTich = "";
        }
        if (dr["maTonGiao"].GetType().Name != "DBNull" && dr["maTonGiao"] != null)
        {
            this.maTonGiao = Convert.ToString(dr["maTonGiao"]);
        }
        else
        {
            this.maTonGiao = "";
        }
        if (dr["maNgheNghiep"].GetType().Name != "DBNull" && dr["maNgheNghiep"] != null)
        {
            this.maNgheNghiep = Convert.ToString(dr["maNgheNghiep"]);
        }
        else
        {
            this.maNgheNghiep = "";
        }
        if (dr["soCmnd"].GetType().Name != "DBNull" && dr["soCmnd"] != null)
        {
            this.soCmnd = Convert.ToString(dr["soCmnd"]);
        }
        else
        {
            this.soCmnd = "";
        }
        if (dr["ngayCap"].GetType().Name != "DBNull" && dr["ngayCap"] != null)
        {
            this.ngayCap = Convert.ToString(dr["ngayCap"]);
        }
        else
        {
            this.ngayCap = "";
        }
        if (dr["noiCap"].GetType().Name != "DBNull" && dr["noiCap"] != null)
        {
            this.noiCap = Convert.ToString(dr["noiCap"]);
        }
        else
        {
            this.noiCap = "";
        }
        if (dr["diaChiChiTietThuongTru"].GetType().Name != "DBNull" && dr["diaChiChiTietThuongTru"] != null)
        {
            this.diaChiChiTietThuongTru = Convert.ToString(dr["diaChiChiTietThuongTru"]);
        }
        else
        {
            this.diaChiChiTietThuongTru = "";
        }
        if (dr["maTinhThuongTru"].GetType().Name != "DBNull" && dr["maTinhThuongTru"] != null)
        {
            this.maTinhThuongTru = Convert.ToString(dr["maTinhThuongTru"]);
        }
        else
        {
            this.maTinhThuongTru = "";
        }
        if (dr["maHuyenThuongTru"].GetType().Name != "DBNull" && dr["maHuyenThuongTru"] != null)
        {
            this.maHuyenThuongTru = Convert.ToString(dr["maHuyenThuongTru"]);
        }
        else
        {
            this.maHuyenThuongTru = "";
        }
        if (dr["maXaThuongTru"].GetType().Name != "DBNull" && dr["maXaThuongTru"] != null)
        {
            this.maXaThuongTru = Convert.ToString(dr["maXaThuongTru"]);
        }
        else
        {
            this.maXaThuongTru = "";
        }
        if (dr["diaChiChiTietHienTai"].GetType().Name != "DBNull" && dr["diaChiChiTietHienTai"] != null)
        {
            this.diaChiChiTietHienTai = Convert.ToString(dr["diaChiChiTietHienTai"]);
        }
        else
        {
            this.diaChiChiTietHienTai = "";
        }
        if (dr["maTinhHienTai"].GetType().Name != "DBNull" && dr["maTinhHienTai"] != null)
        {
            this.maTinhHienTai = Convert.ToString(dr["maTinhHienTai"]);
        }
        else
        {
            this.maTinhHienTai = "";
        }
        if (dr["maHuyenHienTai"].GetType().Name != "DBNull" && dr["maHuyenHienTai"] != null)
        {
            this.maHuyenHienTai = Convert.ToString(dr["maHuyenHienTai"]);
        }
        else
        {
            this.maHuyenHienTai = "";
        }
        if (dr["maXaHienTai"].GetType().Name != "DBNull" && dr["maXaHienTai"] != null)
        {
            this.maXaHienTai = Convert.ToString(dr["maXaHienTai"]);
        }
        else
        {
            this.maXaHienTai = "";
        }
        if (dr["dienThoaiNR"].GetType().Name != "DBNull" && dr["dienThoaiNR"] != null)
        {
            this.dienThoaiNR = Convert.ToString(dr["dienThoaiNR"]);
        }
        else
        {
            this.dienThoaiNR = "";
        }
        if (dr["dienThoaiDd"].GetType().Name != "DBNull" && dr["dienThoaiDd"] != null)
        {
            this.dienThoaiDd = Convert.ToString(dr["dienThoaiDd"]);
        }
        else
        {
            this.dienThoaiDd = "";
        }
        if (dr["email"].GetType().Name != "DBNull" && dr["email"] != null)
        {
            this.email = Convert.ToString(dr["email"]);
        }
        else
        {
            this.email = "";
        }
        if (dr["hoTenBo"].GetType().Name != "DBNull" && dr["hoTenBo"] != null)
        {
            this.hoTenBo = Convert.ToString(dr["hoTenBo"]);
        }
        else
        {
            this.hoTenBo = "";
        }
        if (dr["hoTenMe"].GetType().Name != "DBNull" && dr["hoTenMe"] != null)
        {
            this.hoTenMe = Convert.ToString(dr["hoTenMe"]);
        }
        else
        {
            this.hoTenMe = "";
        }
        if (dr["maYTeBo"].GetType().Name != "DBNull" && dr["maYTeBo"] != null)
        {
            this.maYTeBo = Convert.ToString(dr["maYTeBo"]);
        }
        else
        {
            this.maYTeBo = "";
        }
        if (dr["maYTeMe"].GetType().Name != "DBNull" && dr["maYTeMe"] != null)
        {
            this.maYTeMe = Convert.ToString(dr["maYTeMe"]);
        }
        else
        {
            this.maYTeMe = "";
        }
        if (dr["nguoiChamSocChinh"].GetType().Name != "DBNull" && dr["nguoiChamSocChinh"] != null)
        {
            this.nguoiChamSocChinh = Convert.ToString(dr["nguoiChamSocChinh"]);
        }
        else
        {
            this.nguoiChamSocChinh = "";
        }
        if (dr["quanHeNguoiChamSoc"].GetType().Name != "DBNull" && dr["quanHeNguoiChamSoc"] != null)
        {
            this.quanHeNguoiChamSoc = Convert.ToString(dr["quanHeNguoiChamSoc"]);
        }
        else
        {
            this.quanHeNguoiChamSoc = "";
        }
        if (dr["dienThoaiCoDinhNCSC"].GetType().Name != "DBNull" && dr["dienThoaiCoDinhNCSC"] != null)
        {
            this.dienThoaiCoDinhNCSC = Convert.ToString(dr["dienThoaiCoDinhNCSC"]);
        }
        else
        {
            this.dienThoaiCoDinhNCSC = "";
        }
        if (dr["dienThoaiDiDDongNCSC"].GetType().Name != "DBNull" && dr["dienThoaiDiDDongNCSC"] != null)
        {
            this.dienThoaiDiDDongNCSC = Convert.ToString(dr["dienThoaiDiDDongNCSC"]);
        }
        else
        {
            this.dienThoaiDiDDongNCSC = "";
        }
        if (dr["maYTeCaNhan"].GetType().Name != "DBNull" && dr["maYTeCaNhan"] != null)
        {
            this.maYTeCaNhan = Convert.ToString(dr["maYTeCaNhan"]);
        }
        else
        {
            this.maYTeCaNhan = "";
        }
        if (dr["tenBenh"].GetType().Name != "DBNull" && dr["tenBenh"] != null)
        {
            this.tenBenh = Convert.ToString(dr["tenBenh"]);
        }
        else
        {
            this.tenBenh = "";
        }
        if (dr["ngayRaVien"].GetType().Name != "DBNull" && dr["ngayRaVien"] != null)
        {
            this.ngayRaVien = Convert.ToDateTime(dr["ngayRaVien"]).ToString("dd/MM/yyyy");
        }
        else
        {
            this.ngayRaVien = "";
        }
        if (dr["tenKhoaRaVien"].GetType().Name != "DBNull" && dr["tenKhoaRaVien"] != null)
        {
            this.tenKhoaRaVien = Convert.ToString(dr["tenKhoaRaVien"]);
        }
        else
        {
            this.tenKhoaRaVien = "";
        }
        if (dr["MaBN"].GetType().Name != "DBNull" && dr["MaBN"] != null)
        {
            this.MaBN = Convert.ToString(dr["MaBN"]);
        }
        else
        {
            this.MaBN = "";
        }
        if (dr["maCSKCB"].GetType().Name != "DBNull" && dr["maCSKCB"] != null)
        {
            this.maCSKCB = Convert.ToString(dr["maCSKCB"]);
        }
        else
        {
            this.maCSKCB = "";
        }
        if (dr["MaSoKham"].GetType().Name != "DBNull" && dr["MaSoKham"] != null)
        {
            this.MaSoKham = Convert.ToString(dr["MaSoKham"]);
        }
        else
        {
            this.MaSoKham = "";
        }
        this.Ordernumber = Ordernumber;
    }
}
[Serializable()]
public class DSBNList : List<DSBN>
{
    public DSBNList()
    { }
    private static string ConnectString
    {
        get
        {
            return ConfigurationManager.ConnectionStrings["SqlDataProvider"].ConnectionString + "; connection timeout=600; pooling=true; Max Pool Size=6000;Timeout=600;MultipleActiveResultSets=True";
        }
    }
    public static DSBNList GetAll(string makhoa, DateTime tunngay, DateTime denngay, int loai, string DK, bool qadmin)
    {
        DSBNList List = new DSBNList();
        using (IDataReader dr = (IDataReader)SqlHelper.ExecuteReader(ConnectString, "dbo.HoSoSucKhoe_GETALL", makhoa, tunngay, denngay, loai, DK, qadmin))
        {
            int Ordernumber = 0;
            while (dr.Read())
            {
                Ordernumber++;
                List.Add(new DSBN(dr, Ordernumber));
            }
        }
        return List;
    }
}

public class Hilo
{
    //giai ma chuoi xml thanh object 
    public T Deserialize<T>(string input) where T : class
    {
        System.Xml.Serialization.XmlSerializer ser = new System.Xml.Serialization.XmlSerializer(typeof(T));

        using (StringReader sr = new StringReader(input))
        {
            return (T)ser.Deserialize(sr);
        }
    }
    // ma hoa object thanh chuoi xml 
    public string Serialize<T>(T ObjectToSerialize)
    {
        //XmlSerializer xmlSerializer = new XmlSerializer(ObjectToSerialize.GetType());

        //using (StringWriter textWriter = new StringWriter())
        //{
        //    xmlSerializer.Serialize(textWriter, ObjectToSerialize);
        //    return textWriter.ToString();
        //}
        System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(typeof(T));

        XmlWriterSettings settings = new XmlWriterSettings();
        settings.Encoding = new UnicodeEncoding(false, false); // no BOM in a .NET string
        settings.Indent = true;
        settings.OmitXmlDeclaration = true;

        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        // exclude xsi and xsd namespaces by adding the following:
        ns.Add(string.Empty, string.Empty);

        using (StringWriter textWriter = new StringWriter())
        {
            using (XmlWriter xmlWriter = XmlWriter.Create(textWriter, settings))
            {
                serializer.Serialize(xmlWriter, ObjectToSerialize, ns);
            }
            return textWriter.ToString().Replace(" p5:nil=\"true\" xmlns:p5=\"http://www.w3.org/2001/XMLSchema-instance\"", "").Replace(" p2:nil=\"true\" xmlns:p2=\"http://www.w3.org/2001/XMLSchema-instance\"", "").Replace("\r\n ", string.Empty).Replace("  ", string.Empty); //This is the output as a string
        }
    }
    public string PostURL(string url, string jsondata)
    {
        Uri myUri = new Uri(url);
        WebRequest myWebRequest = HttpWebRequest.Create(myUri);
        myWebRequest.ContentType = "application/json";
        myWebRequest.Method = "POST";
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)myWebRequest;
        NetworkCredential myNetworkCredential = new NetworkCredential();
        CredentialCache myCredentialCache = new CredentialCache();
        myCredentialCache.Add(myUri, "Basic", myNetworkCredential);
        myHttpWebRequest.PreAuthenticate = true;
        myHttpWebRequest.Accept = "application/json";
        myHttpWebRequest.Credentials = myCredentialCache;
        using (var streamWriter = new StreamWriter(myWebRequest.GetRequestStream()))
        {
            streamWriter.Write(jsondata);
            streamWriter.Flush();
            streamWriter.Close();
        }
        WebResponse myWebResponse = myWebRequest.GetResponse();
        Stream responseStream = myWebResponse.GetResponseStream();
        StreamReader myStreamReader = new StreamReader(responseStream, Encoding.Default);
        string pageContent = myStreamReader.ReadToEnd();
        responseStream.Close();
        myWebResponse.Close();
        return pageContent;
    }
    public string PostInvoice(string url, string token, string jsondata)
    {
        Uri myUri = new Uri(url);
        WebRequest myWebRequest = HttpWebRequest.Create(myUri);
        myWebRequest.ContentType = "multipart/form-data";
        myWebRequest.Method = "POST";
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)myWebRequest;
        myHttpWebRequest.PreAuthenticate = true;
        myHttpWebRequest.Headers.Add("Authorization", "Bearer " + token);
        using (var streamWriter = new StreamWriter(myWebRequest.GetRequestStream()))
        {
            streamWriter.Write(jsondata);
            streamWriter.Flush();
            streamWriter.Close();
        }
        WebResponse myWebResponse = myWebRequest.GetResponse();
        Stream responseStream = myWebResponse.GetResponseStream();
        StreamReader myStreamReader = new StreamReader(responseStream, Encoding.Default);
        string pageContent = myStreamReader.ReadToEnd();
        responseStream.Close();
        myWebResponse.Close();
        return pageContent;
    }
    public string PostURLtoken(string url, string token, string jsondata)
    {
        Uri myUri = new Uri(url);
        WebRequest myWebRequest = HttpWebRequest.Create(myUri);
        myWebRequest.ContentType = "application/json";
        myWebRequest.Method = "POST";
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)myWebRequest;
        myHttpWebRequest.PreAuthenticate = true;
        myHttpWebRequest.Headers.Add("Authorization", "Basic " + token);
        using (var streamWriter = new StreamWriter(myWebRequest.GetRequestStream()))
        {
            streamWriter.Write(jsondata);
            streamWriter.Flush();
            streamWriter.Close();
        }
        WebResponse myWebResponse = myWebRequest.GetResponse();
        Stream responseStream = myWebResponse.GetResponseStream();
        StreamReader myStreamReader = new StreamReader(responseStream, Encoding.Default);
        string pageContent = myStreamReader.ReadToEnd();
        responseStream.Close();
        myWebResponse.Close();
        return pageContent;
    }
    public string GetTokenPID(string url, string username, string password)
    {
        Uri myUri = new Uri(url);
        WebRequest myWebRequest = HttpWebRequest.Create(myUri);
        myWebRequest.ContentType = "application/json";
        myWebRequest.Method = "POST";
        HttpWebRequest myHttpWebRequest = (HttpWebRequest)myWebRequest;
        myHttpWebRequest.PreAuthenticate = true;
        //myHttpWebRequest.Headers.Add("U", username);
        //myHttpWebRequest.Headers.Add("P", password);
        string jsondata = "{\"username\":\"" + username + "\",\"password\":\"" + password + "\"}";
        using (var streamWriter = new StreamWriter(myWebRequest.GetRequestStream()))
        {
            streamWriter.Write(jsondata);
            streamWriter.Flush();
            streamWriter.Close();
        }
        WebResponse myWebResponse = myWebRequest.GetResponse();
        Stream responseStream = myWebResponse.GetResponseStream();
        StreamReader myStreamReader = new StreamReader(responseStream, Encoding.Default);
        string pageContent = myStreamReader.ReadToEnd();
        responseStream.Close();
        myWebResponse.Close();
        return pageContent;
    }
}
[Serializable()]
public class LoginError
{
    private int _StatusCode = 0;
    public int StatusCode
    {
        get
        {
            return _StatusCode;
        }
        set
        {
            _StatusCode = value;
        }
    }
    private string _Token = string.Empty;
    public string Token
    {
        get
        {
            return _Token;
        }
        set
        {
            _Token = value;
        }
    }
    private string _id_token = string.Empty;
    public string id_token
    {
        get
        {
            return _id_token;
        }
        set
        {
            _id_token = value;
        }
    }
    private string _Comment = string.Empty;
    public string Comment
    {
        get
        {
            return _Comment;
        }
        set
        {
            _Comment = value;
        }
    }
    private string _PID = string.Empty;
    public string PID
    {
        get
        {
            return _PID;
        }
        set
        {
            _PID = value;
        }
    }
    private List<PID> _Data;
    public List<PID> Data
    {
        get
        {
            if (_Data == null)
                _Data = new List<PID>();
            return _Data;
        }
        set
        {
            _Data = value;
        }
    }
    private string _maGiaoDich = string.Empty;
    public string maGiaoDich
    {
        get
        {
            return _maGiaoDich;
        }
        set
        {
            _maGiaoDich = value;
        }
    }
    private string _message = string.Empty;
    public string message
    {
        get
        {
            return _message;
        }
        set
        {
            _message = value;
        }
    }
    private int _status = 0;
    public int status
    {
        get
        {
            return _status;
        }
        set
        {
            _status = value;
        }
    }
}
#endregion